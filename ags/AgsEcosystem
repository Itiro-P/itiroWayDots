// ../../../../usr/share/astal/gjs/gtk4/index.ts
import Astal6 from "gi://Astal?version=4.0";
import Gtk4 from "gi://Gtk?version=4.0";
import Gdk2 from "gi://Gdk?version=4.0";

// ../../../../usr/share/astal/gjs/variable.ts
import Astal3 from "gi://AstalIO";

// ../../../../usr/share/astal/gjs/binding.ts
var snakeify = (str) => str.replace(/([a-z])([A-Z])/g, "$1_$2").replaceAll("-", "_").toLowerCase();
var kebabify = (str) => str.replace(/([a-z])([A-Z])/g, "$1-$2").replaceAll("_", "-").toLowerCase();
var Binding = class _Binding {
  transformFn = (v) => v;
  #emitter;
  #prop;
  static bind(emitter, prop) {
    return new _Binding(emitter, prop);
  }
  constructor(emitter, prop) {
    this.#emitter = emitter;
    this.#prop = prop && kebabify(prop);
  }
  toString() {
    return `Binding<${this.#emitter}${this.#prop ? `, "${this.#prop}"` : ""}>`;
  }
  as(fn) {
    const bind2 = new _Binding(this.#emitter, this.#prop);
    bind2.transformFn = (v) => fn(this.transformFn(v));
    return bind2;
  }
  get() {
    if (typeof this.#emitter.get === "function")
      return this.transformFn(this.#emitter.get());
    if (typeof this.#prop === "string") {
      const getter = `get_${snakeify(this.#prop)}`;
      if (typeof this.#emitter[getter] === "function")
        return this.transformFn(this.#emitter[getter]());
      return this.transformFn(this.#emitter[this.#prop]);
    }
    throw Error("can not get value of binding");
  }
  subscribe(callback) {
    if (typeof this.#emitter.subscribe === "function") {
      return this.#emitter.subscribe(() => {
        callback(this.get());
      });
    } else if (typeof this.#emitter.connect === "function") {
      const signal = `notify::${this.#prop}`;
      const id = this.#emitter.connect(signal, () => {
        callback(this.get());
      });
      return () => {
        this.#emitter.disconnect(id);
      };
    }
    throw Error(`${this.#emitter} is not bindable`);
  }
};
var { bind } = Binding;
var binding_default = Binding;

// ../../../../usr/share/astal/gjs/time.ts
import Astal from "gi://AstalIO";
var Time = Astal.Time;
function interval(interval2, callback) {
  return Astal.Time.interval(interval2, () => void callback?.());
}

// ../../../../usr/share/astal/gjs/process.ts
import Astal2 from "gi://AstalIO";
var Process = Astal2.Process;
function subprocess(argsOrCmd, onOut = print, onErr = printerr) {
  const args = Array.isArray(argsOrCmd) || typeof argsOrCmd === "string";
  const { cmd, err, out } = {
    cmd: args ? argsOrCmd : argsOrCmd.cmd,
    err: args ? onErr : argsOrCmd.err || onErr,
    out: args ? onOut : argsOrCmd.out || onOut
  };
  const proc = Array.isArray(cmd) ? Astal2.Process.subprocessv(cmd) : Astal2.Process.subprocess(cmd);
  proc.connect("stdout", (_, stdout) => out(stdout));
  proc.connect("stderr", (_, stderr) => err(stderr));
  return proc;
}
function execAsync(cmd) {
  return new Promise((resolve, reject) => {
    if (Array.isArray(cmd)) {
      Astal2.Process.exec_asyncv(cmd, (_, res) => {
        try {
          resolve(Astal2.Process.exec_asyncv_finish(res));
        } catch (error) {
          reject(error);
        }
      });
    } else {
      Astal2.Process.exec_async(cmd, (_, res) => {
        try {
          resolve(Astal2.Process.exec_finish(res));
        } catch (error) {
          reject(error);
        }
      });
    }
  });
}

// ../../../../usr/share/astal/gjs/variable.ts
var VariableWrapper = class extends Function {
  variable;
  errHandler = console.error;
  _value;
  _poll;
  _watch;
  pollInterval = 1e3;
  pollExec;
  pollTransform;
  pollFn;
  watchTransform;
  watchExec;
  constructor(init) {
    super();
    this._value = init;
    this.variable = new Astal3.VariableBase();
    this.variable.connect("dropped", () => {
      this.stopWatch();
      this.stopPoll();
    });
    this.variable.connect("error", (_, err) => this.errHandler?.(err));
    return new Proxy(this, {
      apply: (target, _, args) => target._call(args[0])
    });
  }
  _call(transform) {
    const b = binding_default.bind(this);
    return transform ? b.as(transform) : b;
  }
  toString() {
    return String(`Variable<${this.get()}>`);
  }
  get() {
    return this._value;
  }
  set(value) {
    if (value !== this._value) {
      this._value = value;
      this.variable.emit("changed");
    }
  }
  startPoll() {
    if (this._poll)
      return;
    if (this.pollFn) {
      this._poll = interval(this.pollInterval, () => {
        const v = this.pollFn(this.get());
        if (v instanceof Promise) {
          v.then((v2) => this.set(v2)).catch((err) => this.variable.emit("error", err));
        } else {
          this.set(v);
        }
      });
    } else if (this.pollExec) {
      this._poll = interval(this.pollInterval, () => {
        execAsync(this.pollExec).then((v) => this.set(this.pollTransform(v, this.get()))).catch((err) => this.variable.emit("error", err));
      });
    }
  }
  startWatch() {
    if (this._watch)
      return;
    this._watch = subprocess({
      cmd: this.watchExec,
      out: (out) => this.set(this.watchTransform(out, this.get())),
      err: (err) => this.variable.emit("error", err)
    });
  }
  stopPoll() {
    this._poll?.cancel();
    delete this._poll;
  }
  stopWatch() {
    this._watch?.kill();
    delete this._watch;
  }
  isPolling() {
    return !!this._poll;
  }
  isWatching() {
    return !!this._watch;
  }
  drop() {
    this.variable.emit("dropped");
  }
  onDropped(callback) {
    this.variable.connect("dropped", callback);
    return this;
  }
  onError(callback) {
    delete this.errHandler;
    this.variable.connect("error", (_, err) => callback(err));
    return this;
  }
  subscribe(callback) {
    const id = this.variable.connect("changed", () => {
      callback(this.get());
    });
    return () => this.variable.disconnect(id);
  }
  poll(interval2, exec, transform = (out) => out) {
    this.stopPoll();
    this.pollInterval = interval2;
    this.pollTransform = transform;
    if (typeof exec === "function") {
      this.pollFn = exec;
      delete this.pollExec;
    } else {
      this.pollExec = exec;
      delete this.pollFn;
    }
    this.startPoll();
    return this;
  }
  watch(exec, transform = (out) => out) {
    this.stopWatch();
    this.watchExec = exec;
    this.watchTransform = transform;
    this.startWatch();
    return this;
  }
  observe(objs, sigOrFn, callback) {
    const f = typeof sigOrFn === "function" ? sigOrFn : callback ?? (() => this.get());
    const set = (obj, ...args) => this.set(f(obj, ...args));
    if (Array.isArray(objs)) {
      for (const obj of objs) {
        const [o, s] = obj;
        const id = o.connect(s, set);
        this.onDropped(() => o.disconnect(id));
      }
    } else {
      if (typeof sigOrFn === "string") {
        const id = objs.connect(sigOrFn, set);
        this.onDropped(() => objs.disconnect(id));
      }
    }
    return this;
  }
  static derive(deps, fn = (...args) => args) {
    const update = () => fn(...deps.map((d) => d.get()));
    const derived = new Variable(update());
    const unsubs = deps.map((dep) => dep.subscribe(() => derived.set(update())));
    derived.onDropped(() => unsubs.map((unsub) => unsub()));
    return derived;
  }
};
var Variable = new Proxy(VariableWrapper, {
  apply: (_t, _a, args) => new VariableWrapper(args[0])
});
var { derive } = Variable;
var variable_default = Variable;

// ../../../../usr/share/astal/gjs/_astal.ts
var noImplicitDestroy = Symbol("no no implicit destroy");
var setChildren = Symbol("children setter method");
function mergeBindings(array) {
  function getValues(...args) {
    let i = 0;
    return array.map(
      (value) => value instanceof binding_default ? args[i++] : value
    );
  }
  const bindings = array.filter((i) => i instanceof binding_default);
  if (bindings.length === 0)
    return array;
  if (bindings.length === 1)
    return bindings[0].as(getValues);
  return variable_default.derive(bindings, getValues)();
}
function setProp(obj, prop, value) {
  try {
    const setter = `set_${snakeify(prop)}`;
    if (typeof obj[setter] === "function")
      return obj[setter](value);
    return obj[prop] = value;
  } catch (error) {
    console.error(`could not set property "${prop}" on ${obj}:`, error);
  }
}
function construct(widget, config) {
  let { setup, child, children = [], ...props } = config;
  if (children instanceof binding_default) {
    children = [children];
  }
  if (child) {
    children.unshift(child);
  }
  for (const [key, value] of Object.entries(props)) {
    if (value === void 0) {
      delete props[key];
    }
  }
  const bindings = Object.keys(props).reduce((acc, prop) => {
    if (props[prop] instanceof binding_default) {
      const binding = props[prop];
      delete props[prop];
      return [...acc, [prop, binding]];
    }
    return acc;
  }, []);
  const onHandlers = Object.keys(props).reduce((acc, key) => {
    if (key.startsWith("on")) {
      const sig = kebabify(key).split("-").slice(1).join("-");
      const handler2 = props[key];
      delete props[key];
      return [...acc, [sig, handler2]];
    }
    return acc;
  }, []);
  const mergedChildren = mergeBindings(children.flat(Infinity));
  if (mergedChildren instanceof binding_default) {
    widget[setChildren](mergedChildren.get());
    widget.connect("destroy", mergedChildren.subscribe((v) => {
      widget[setChildren](v);
    }));
  } else {
    if (mergedChildren.length > 0) {
      widget[setChildren](mergedChildren);
    }
  }
  for (const [signal, callback] of onHandlers) {
    const sig = signal.startsWith("notify") ? signal.replace("-", "::") : signal;
    if (typeof callback === "function") {
      widget.connect(sig, callback);
    } else {
      widget.connect(sig, () => execAsync(callback).then(print).catch(console.error));
    }
  }
  for (const [prop, binding] of bindings) {
    if (prop === "child" || prop === "children") {
      widget.connect("destroy", binding.subscribe((v) => {
        widget[setChildren](v);
      }));
    }
    widget.connect("destroy", binding.subscribe((v) => {
      setProp(widget, prop, v);
    }));
    setProp(widget, prop, binding.get());
  }
  for (const [key, value] of Object.entries(props)) {
    if (value === void 0) {
      delete props[key];
    }
  }
  Object.assign(widget, props);
  setup?.(widget);
  return widget;
}
function isArrowFunction(func) {
  return !Object.hasOwn(func, "prototype");
}
function jsx(ctors2, ctor, { children, ...props }) {
  children ??= [];
  if (!Array.isArray(children))
    children = [children];
  children = children.filter(Boolean);
  if (children.length === 1)
    props.child = children[0];
  else if (children.length > 1)
    props.children = children;
  if (typeof ctor === "string") {
    if (isArrowFunction(ctors2[ctor]))
      return ctors2[ctor](props);
    return new ctors2[ctor](props);
  }
  if (isArrowFunction(ctor))
    return ctor(props);
  return new ctor(props);
}

// ../../../../usr/share/astal/gjs/gtk4/astalify.ts
import Gtk from "gi://Gtk?version=4.0";
import Gdk from "gi://Gdk?version=4.0";
var type = Symbol("child type");
var dummyBulder = new Gtk.Builder();
function _getChildren(widget) {
  if ("get_child" in widget && typeof widget.get_child == "function") {
    return widget.get_child() ? [widget.get_child()] : [];
  }
  const children = [];
  let ch = widget.get_first_child();
  while (ch !== null) {
    children.push(ch);
    ch = ch.get_next_sibling();
  }
  return children;
}
function _setChildren(widget, children) {
  children = children.flat(Infinity).map((ch) => ch instanceof Gtk.Widget ? ch : new Gtk.Label({ visible: true, label: String(ch) }));
  for (const child of children) {
    widget.vfunc_add_child(
      dummyBulder,
      child,
      type in child ? child[type] : null
    );
  }
}
function astalify(cls, config = {}) {
  Object.assign(cls.prototype, {
    [setChildren](children) {
      const w = this;
      for (const child of config.getChildren?.(w) || _getChildren(w)) {
        if (child instanceof Gtk.Widget) {
          child.unparent();
          if (!children.includes(child) && noImplicitDestroy in this)
            child.run_dispose();
        }
      }
      if (config.setChildren) {
        config.setChildren(w, children);
      } else {
        _setChildren(w, children);
      }
    }
  });
  return {
    [cls.name]: (props = {}, ...children) => {
      const widget = new cls("cssName" in props ? { cssName: props.cssName } : {});
      if ("cssName" in props) {
        delete props.cssName;
      }
      if (props.noImplicitDestroy) {
        Object.assign(widget, { [noImplicitDestroy]: true });
        delete props.noImplicitDestroy;
      }
      if (props.type) {
        Object.assign(widget, { [type]: props.type });
        delete props.type;
      }
      if (children.length > 0) {
        Object.assign(props, { children });
      }
      return construct(widget, setupControllers(widget, props));
    }
  }[cls.name];
}
function setupControllers(widget, {
  onFocusEnter,
  onFocusLeave,
  onKeyPressed,
  onKeyReleased,
  onKeyModifier,
  onLegacy,
  onButtonPressed,
  onButtonReleased,
  onHoverEnter,
  onHoverLeave,
  onMotion,
  onScroll,
  onScrollDecelerate,
  ...props
}) {
  if (onFocusEnter || onFocusLeave) {
    const focus = new Gtk.EventControllerFocus();
    widget.add_controller(focus);
    if (onFocusEnter)
      focus.connect("enter", () => onFocusEnter(widget));
    if (onFocusLeave)
      focus.connect("leave", () => onFocusLeave(widget));
  }
  if (onKeyPressed || onKeyReleased || onKeyModifier) {
    const key = new Gtk.EventControllerKey();
    widget.add_controller(key);
    if (onKeyPressed)
      key.connect("key-pressed", (_, val, code, state) => onKeyPressed(widget, val, code, state));
    if (onKeyReleased)
      key.connect("key-released", (_, val, code, state) => onKeyReleased(widget, val, code, state));
    if (onKeyModifier)
      key.connect("modifiers", (_, state) => onKeyModifier(widget, state));
  }
  if (onLegacy || onButtonPressed || onButtonReleased) {
    const legacy = new Gtk.EventControllerLegacy();
    widget.add_controller(legacy);
    legacy.connect("event", (_, event) => {
      if (event.get_event_type() === Gdk.EventType.BUTTON_PRESS) {
        onButtonPressed?.(widget, event);
      }
      if (event.get_event_type() === Gdk.EventType.BUTTON_RELEASE) {
        onButtonReleased?.(widget, event);
      }
      onLegacy?.(widget, event);
    });
  }
  if (onMotion || onHoverEnter || onHoverLeave) {
    const hover = new Gtk.EventControllerMotion();
    widget.add_controller(hover);
    if (onHoverEnter)
      hover.connect("enter", (_, x, y) => onHoverEnter(widget, x, y));
    if (onHoverLeave)
      hover.connect("leave", () => onHoverLeave(widget));
    if (onMotion)
      hover.connect("motion", (_, x, y) => onMotion(widget, x, y));
  }
  if (onScroll || onScrollDecelerate) {
    const scroll = new Gtk.EventControllerScroll();
    scroll.flags = Gtk.EventControllerScrollFlags.BOTH_AXES | Gtk.EventControllerScrollFlags.KINETIC;
    widget.add_controller(scroll);
    if (onScroll)
      scroll.connect("scroll", (_, x, y) => onScroll(widget, x, y));
    if (onScrollDecelerate)
      scroll.connect("decelerate", (_, x, y) => onScrollDecelerate(widget, x, y));
  }
  return props;
}

// ../../../../usr/share/astal/gjs/gtk4/app.ts
import GLib from "gi://GLib?version=2.0";
import Gtk2 from "gi://Gtk?version=4.0";
import Astal4 from "gi://Astal?version=4.0";

// ../../../../usr/share/astal/gjs/overrides.ts
var snakeify2 = (str) => str.replace(/([a-z])([A-Z])/g, "$1_$2").replaceAll("-", "_").toLowerCase();
async function suppress(mod, patch2) {
  return mod.then((m) => patch2(m.default)).catch(() => void 0);
}
function patch(proto, prop) {
  Object.defineProperty(proto, prop, {
    get() {
      return this[`get_${snakeify2(prop)}`]();
    }
  });
}
await suppress(import("gi://AstalApps"), ({ Apps, Application }) => {
  patch(Apps.prototype, "list");
  patch(Application.prototype, "keywords");
  patch(Application.prototype, "categories");
});
await suppress(import("gi://AstalBattery"), ({ UPower }) => {
  patch(UPower.prototype, "devices");
});
await suppress(import("gi://AstalBluetooth"), ({ Adapter, Bluetooth, Device }) => {
  patch(Adapter.prototype, "uuids");
  patch(Bluetooth.prototype, "adapters");
  patch(Bluetooth.prototype, "devices");
  patch(Device.prototype, "uuids");
});
await suppress(import("gi://AstalHyprland"), ({ Hyprland, Monitor, Workspace }) => {
  patch(Hyprland.prototype, "binds");
  patch(Hyprland.prototype, "monitors");
  patch(Hyprland.prototype, "workspaces");
  patch(Hyprland.prototype, "clients");
  patch(Monitor.prototype, "availableModes");
  patch(Monitor.prototype, "available_modes");
  patch(Workspace.prototype, "clients");
});
await suppress(import("gi://AstalMpris"), ({ Mpris: Mpris2, Player }) => {
  patch(Mpris2.prototype, "players");
  patch(Player.prototype, "supported_uri_schemes");
  patch(Player.prototype, "supportedUriSchemes");
  patch(Player.prototype, "supported_mime_types");
  patch(Player.prototype, "supportedMimeTypes");
  patch(Player.prototype, "comments");
});
await suppress(import("gi://AstalNetwork"), ({ Wifi: Wifi2 }) => {
  patch(Wifi2.prototype, "access_points");
  patch(Wifi2.prototype, "accessPoints");
});
await suppress(import("gi://AstalNotifd"), ({ Notifd, Notification }) => {
  patch(Notifd.prototype, "notifications");
  patch(Notification.prototype, "actions");
});
await suppress(import("gi://AstalPowerProfiles"), ({ PowerProfiles }) => {
  patch(PowerProfiles.prototype, "actions");
});
await suppress(import("gi://AstalWp"), ({ Wp: Wp2, Audio, Video }) => {
  patch(Wp2.prototype, "endpoints");
  patch(Wp2.prototype, "devices");
  patch(Audio.prototype, "streams");
  patch(Audio.prototype, "recorders");
  patch(Audio.prototype, "microphones");
  patch(Audio.prototype, "speakers");
  patch(Audio.prototype, "devices");
  patch(Video.prototype, "streams");
  patch(Video.prototype, "recorders");
  patch(Video.prototype, "sinks");
  patch(Video.prototype, "sources");
  patch(Video.prototype, "devices");
});

// ../../../../usr/share/astal/gjs/_app.ts
import { setConsoleLogDomain } from "console";
import { exit, programArgs } from "system";
import IO from "gi://AstalIO";
import GObject from "gi://GObject";
function mkApp(App) {
  return new class AstalJS extends App {
    static {
      GObject.registerClass({ GTypeName: "AstalJS" }, this);
    }
    eval(body) {
      return new Promise((res, rej) => {
        try {
          const fn = Function(`return (async function() {
                        ${body.includes(";") ? body : `return ${body};`}
                    })`);
          fn()().then(res).catch(rej);
        } catch (error) {
          rej(error);
        }
      });
    }
    requestHandler;
    vfunc_request(msg, conn) {
      if (typeof this.requestHandler === "function") {
        this.requestHandler(msg, (response) => {
          IO.write_sock(
            conn,
            String(response),
            (_, res) => IO.write_sock_finish(res)
          );
        });
      } else {
        super.vfunc_request(msg, conn);
      }
    }
    apply_css(style, reset = false) {
      super.apply_css(style, reset);
    }
    quit(code) {
      super.quit();
      exit(code ?? 0);
    }
    start({ requestHandler, css, hold, main, client, icons, ...cfg } = {}) {
      const app = this;
      client ??= () => {
        print(`Astal instance "${app.instanceName}" already running`);
        exit(1);
      };
      Object.assign(this, cfg);
      setConsoleLogDomain(app.instanceName);
      this.requestHandler = requestHandler;
      app.connect("activate", () => {
        main?.(...programArgs);
      });
      try {
        app.acquire_socket();
      } catch (error) {
        return client((msg) => IO.send_request(app.instanceName, msg), ...programArgs);
      }
      if (css)
        this.apply_css(css, false);
      if (icons)
        app.add_icons(icons);
      hold ??= true;
      if (hold)
        app.hold();
      app.runAsync([]);
    }
  }();
}

// ../../../../usr/share/astal/gjs/gtk4/app.ts
Gtk2.init();
GLib.unsetenv("LD_PRELOAD");
await import("gi://Adw?version=1").then(({ default: Adw }) => Adw.init()).catch(() => void 0);
var app_default = mkApp(Astal4.Application);

// ../../../../usr/share/astal/gjs/gtk4/widget.ts
import Astal5 from "gi://Astal?version=4.0";
import Gtk3 from "gi://Gtk?version=4.0";
function filter(children) {
  return children.flat(Infinity).map((ch) => ch instanceof Gtk3.Widget ? ch : new Gtk3.Label({ visible: true, label: String(ch) }));
}
Object.defineProperty(Astal5.Box.prototype, "children", {
  get() {
    return this.get_children();
  },
  set(v) {
    this.set_children(v);
  }
});
var Box = astalify(Astal5.Box, {
  getChildren(self) {
    return self.get_children();
  },
  setChildren(self, children) {
    return self.set_children(filter(children));
  }
});
var Button = astalify(Gtk3.Button);
var CenterBox = astalify(Gtk3.CenterBox, {
  getChildren(box) {
    return [box.startWidget, box.centerWidget, box.endWidget];
  },
  setChildren(box, children) {
    const ch = filter(children);
    box.startWidget = ch[0] || new Gtk3.Box();
    box.centerWidget = ch[1] || new Gtk3.Box();
    box.endWidget = ch[2] || new Gtk3.Box();
  }
});
var Entry = astalify(Gtk3.Entry, {
  getChildren() {
    return [];
  }
});
var Image = astalify(Gtk3.Image, {
  getChildren() {
    return [];
  }
});
var Label = astalify(Gtk3.Label, {
  getChildren() {
    return [];
  },
  setChildren(self, children) {
    self.label = String(children);
  }
});
var LevelBar = astalify(Gtk3.LevelBar, {
  getChildren() {
    return [];
  }
});
var Overlay = astalify(Gtk3.Overlay, {
  getChildren(self) {
    const children = [];
    let ch = self.get_first_child();
    while (ch !== null) {
      children.push(ch);
      ch = ch.get_next_sibling();
    }
    return children.filter((ch2) => ch2 !== self.child);
  },
  setChildren(self, children) {
    for (const child of filter(children)) {
      const types = type in child ? child[type].split(/\s+/) : [];
      if (types.includes("overlay")) {
        self.add_overlay(child);
      } else {
        self.set_child(child);
      }
      self.set_measure_overlay(child, types.includes("measure"));
      self.set_clip_overlay(child, types.includes("clip"));
    }
  }
});
var Revealer = astalify(Gtk3.Revealer);
var Slider = astalify(Astal5.Slider, {
  getChildren() {
    return [];
  }
});
var Stack = astalify(Gtk3.Stack, {
  setChildren(self, children) {
    for (const child of filter(children)) {
      if (child.name != "" && child.name != null) {
        self.add_named(child, child.name);
      } else {
        self.add_child(child);
      }
    }
  }
});
var Switch = astalify(Gtk3.Switch, {
  getChildren() {
    return [];
  }
});
var Window = astalify(Astal5.Window);
var MenuButton = astalify(Gtk3.MenuButton, {
  getChildren(self) {
    return [self.popover, self.child];
  },
  setChildren(self, children) {
    for (const child of filter(children)) {
      if (child instanceof Gtk3.Popover) {
        self.set_popover(child);
      } else {
        self.set_child(child);
      }
    }
  }
});
var Popover = astalify(Gtk3.Popover);

// sass:/home/itiro/.config/ags/style.scss
var style_default = 'button, button *, popover, popover *, * {\n  font-family: "Monospace";\n  font-size: 16px;\n  -gtk-icon-size: 16px;\n  color: #cdd6f4;\n  background: transparent;\n  border-width: 0;\n  border-style: none;\n  box-shadow: none;\n  outline: none;\n  margin: 0;\n  padding: 0;\n}\n\n.Background {\n  padding: 20px;\n  margin: 5px;\n  background-color: #1e1e2e;\n  border-radius: 50px;\n  transition: all 0.2s ease-in-out;\n  opacity: 0.5;\n}\n.Background .Media {\n  border: 2px solid #74c7ec;\n  border-radius: 10px;\n  background-color: #1e1e2e;\n}\n.Background .Media * {\n  transition: all 0.2s ease-in-out;\n}\n.Background .Media .MprisInfo {\n  padding: 5px;\n  border-radius: 0 0 7px 7px;\n  background-color: #1e1e2e;\n}\n.Background .Media .MprisInfo .MprisLabel {\n  color: #74c7ec;\n}\n.Background .Media .CavaContainer {\n  border-radius: 6px 6px 0px 0px;\n  color: #74c7ec;\n  background: none;\n}\n.Background .MediaPlaying .CavaContainer {\n  color: #74c7ec;\n  background: none;\n}\n.Background .MediaPlaying .MprisInfo {\n  background-color: #74c7ec;\n}\n.Background .MediaPlaying .MprisInfo .MprisLabel {\n  color: #1e1e2e;\n}\n.Background .MediaPlaying:hover .CavaContainer {\n  color: #1e1e2e;\n  background-color: #74c7ec;\n}\n.Background .MediaPlaying:hover .MprisInfo {\n  background-color: #1e1e2e;\n}\n.Background .MediaPlaying:hover .MprisInfo .MprisLabel {\n  color: #74c7ec;\n}\n.Background .DateTime * {\n  transition: all 0.2s ease-in-out;\n  border-radius: 10px;\n}\n.Background .DateTime .Time {\n  transition: all 0.2s ease-in-out;\n}\n.Background .DateTime .Time .TimeLabel {\n  font-weight: bold;\n  font-size: 90px;\n}\n.Background .DateTime .Time popover > contents {\n  padding: 5px;\n  background: #313244;\n  border: 2px solid #74c7ec;\n}\n.Background .DateTime .Time popover > contents .CalendarContainer {\n  background-color: #1e1e2e;\n  color: #cdd6f4;\n}\n.Background .DateTime .Time popover > contents .CalendarContainer label.today {\n  background-color: #89b4fa;\n  border: none;\n  color: #1e1e2e;\n}\n.Background .DateTime .Time popover > contents .CalendarContainer label:selected {\n  background-color: #b4befe;\n  border: none;\n  color: #1e1e2e;\n}\n.Background .DateTime .Time:hover {\n  background-color: #74c7ec;\n}\n.Background .DateTime .Time:hover .TimeLabel {\n  color: #181825;\n}\n.Background .DateTime .Date {\n  font-size: 40px;\n}\n.Background:hover {\n  opacity: 0.9;\n}\n\n.SystemMonitor, .AudioControl, .SystemTray, .Wired, .Wifi, .MiniTime {\n  background-color: #1e1e2e;\n  border: 2px solid #89b4fa;\n  border-radius: 10px;\n  padding: 0px 2px;\n  margin: 0px 2px;\n}\n\n.CpuUsage, .MemoryUsage, .Battery, .IconBtn, .LabelAudioControl, .AudioControlBtn, .TrayItem, .Wired, .Wifi, .MiniTime {\n  padding: 1px 4px;\n}\n\n.BatteryIcon, .CpuUsageIcon, .MemoryUsageIcon {\n  margin: 0px 5px 0px 0px;\n}\n\n.CpuUsage .CpuUsageIcon, .CpuUsage .CpuUsageLabel {\n  color: #a6e3a1;\n}\n\n.MemoryUsage .MemoryUsageIcon, .MemoryUsage .MemoryUsageLabel {\n  color: #fab387;\n}\n\n.Battery .BatteryIcon, .Battery .BatteryLabel {\n  color: #b4befe;\n}\n\n.BatteryCritical .BatteryIcon, .BatteryCritical .BatteryLabel {\n  color: #f38ba8;\n}\n\n.TrayItem popover.menu {\n  margin: 10px;\n  background-color: #313244;\n  border-radius: 10px;\n  padding: 5px;\n}\n.TrayItem popover.menu > contents {\n  padding: 5px;\n}\n.TrayItem popover.menu modelbutton {\n  padding: 2px;\n  border-radius: 4px;\n  margin: 0 2px;\n}\n.TrayItem popover.menu modelbutton:hover {\n  background: rgba(69, 71, 90, 0.2);\n}\n.TrayItem popover.menu modelbutton:active {\n  background: rgba(69, 71, 90, 0.4);\n}\n\ntooltip {\n  background-color: #1e1e2e;\n  color: #cdd6f4;\n  border-radius: 8px;\n  padding: 8px 12px;\n  border: 1px solid #313244;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}';

// modules/SystemMonitor.tsx
import AstalBattery from "gi://AstalBattery";

// ../../../../usr/share/astal/gjs/index.ts
import { default as default3 } from "gi://AstalIO?version=0.1";

// ../../../../usr/share/astal/gjs/file.ts
import Astal7 from "gi://AstalIO";
import Gio from "gi://Gio?version=2.0";

// ../../../../usr/share/astal/gjs/gobject.ts
import GObject2 from "gi://GObject";
import { default as default2 } from "gi://GLib?version=2.0";
var meta = Symbol("meta");
var priv = Symbol("priv");
var { ParamSpec, ParamFlags } = GObject2;

// modules/SystemMonitor.tsx
import GTop from "gi://GTop?version=2.0";

// ../../../../usr/share/astal/gjs/gtk4/jsx-runtime.ts
function jsx2(ctor, props) {
  return jsx(ctors, ctor, props);
}
var ctors = {
  box: Box,
  button: Button,
  centerbox: CenterBox,
  // circularprogress: Widget.CircularProgress,
  // drawingarea: Widget.DrawingArea,
  entry: Entry,
  image: Image,
  label: Label,
  levelbar: LevelBar,
  overlay: Overlay,
  revealer: Revealer,
  slider: Slider,
  stack: Stack,
  switch: Switch,
  window: Window,
  menubutton: MenuButton,
  popover: Popover
};
var jsxs = jsx2;

// modules/SystemMonitor.tsx
function formatTime(seconds) {
  return `${Math.floor(seconds / 3600)}h${Math.floor(seconds % 3600 / 60)}m`;
}
var milliseconds = 2e3;
var cpu = new GTop.glibtop_cpu();
var mem = new GTop.glibtop_mem();
var battery = AstalBattery.get_default();
var prev = {
  user: cpu.user,
  sys: cpu.sys,
  total: cpu.total
};
var diff = {
  user: 0,
  sys: 0,
  total: 0
};
var metrics = Variable(
  {
    cpu: 0,
    mem: 0
  }
).poll(
  milliseconds,
  () => {
    prev.user = cpu.user;
    prev.sys = cpu.sys;
    prev.total = cpu.total;
    GTop.glibtop_get_cpu(cpu);
    GTop.glibtop_get_mem(mem);
    diff.user = cpu.user - prev.user;
    diff.sys = cpu.sys - prev.sys;
    diff.total = cpu.total - prev.total;
    return {
      cpu: diff.total > 0 ? Math.round((diff.user + diff.sys) / diff.total * 100) : 0,
      mem: Math.round(mem.user / mem.total * 100)
    };
  }
);
var CpuUsage = () => {
  return /* @__PURE__ */ jsxs("box", { cssClasses: ["CpuUsage"], children: [
    /* @__PURE__ */ jsx2("label", { cssClasses: ["CpuUsageIcon"], label: "\uF2DB" }),
    /* @__PURE__ */ jsx2("label", { cssClasses: ["CpuUsageLabel"], label: bind(metrics).as((m) => `${m.cpu}%`) })
  ] });
};
var MemoryUsage = () => {
  return /* @__PURE__ */ jsxs("box", { cssClasses: ["MemoryUsage"], children: [
    /* @__PURE__ */ jsx2("label", { cssClasses: ["MemoryUsageIcon"], label: "\uF538" }),
    /* @__PURE__ */ jsx2("label", { cssClasses: ["MemoryUsageLabel"], label: bind(metrics).as((m) => `${m.mem}%`) })
  ] });
};
var Battery = () => {
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["Battery"],
      tooltipText: bind(battery, "charging").as((b) => `${battery.get_charging() ? `Carregando: ${formatTime(battery.time_to_full)} restante(s)` : `Descarregando: ${formatTime(battery.time_to_empty)} restante(s)`}`),
      setup: (self) => {
        battery.connect(
          "notify::charging",
          () => {
            if (battery.percentage <= 0.2 && !battery.charging) {
              self.add_css_class("BatteryCritical");
            } else {
              self.remove_css_class("BatteryCritical");
            }
          }
        );
      },
      children: [
        /* @__PURE__ */ jsx2("image", { cssClasses: ["BatteryIcon"], iconName: bind(battery, "iconName") }),
        /* @__PURE__ */ jsx2("label", { label: bind(battery, "percentage").as((p) => `${Math.round(p * 100)}%`) })
      ]
    }
  );
};
function SystemMonitor() {
  return /* @__PURE__ */ jsxs("box", { cssClasses: ["SystemMonitor"], onDestroy: () => metrics.drop(), children: [
    /* @__PURE__ */ jsx2(CpuUsage, {}),
    /* @__PURE__ */ jsx2(MemoryUsage, {}),
    /* @__PURE__ */ jsx2(Battery, {})
  ] });
}

// modules/AudioControl.tsx
import Wp from "gi://AstalWp";
function AudioControl() {
  const audio = Wp.get_default().defaultSpeaker;
  const step = 0.02;
  const scroll = new Gtk4.EventControllerScroll({ flags: Gtk4.EventControllerScrollFlags.VERTICAL });
  const click = { left: new Gtk4.GestureClick(), right: new Gtk4.GestureClick() };
  click.left.set_button(Gdk2.BUTTON_PRIMARY);
  click.right.set_button(Gdk2.BUTTON_SECONDARY);
  const handlers2 = [
    scroll.connect("scroll", (controler, dx, dy) => {
      audio.volume = dy < 0 ? Math.min(audio.get_volume() + step, 1) : audio.get_volume() - step;
    }),
    click.left.connect("pressed", () => {
      audio.set_mute(!audio.get_mute());
    }),
    click.right.connect("pressed", () => {
      default2.spawn_command_line_async("pavucontrol");
    })
  ];
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["AudioControl"],
      setup: (self) => {
        self.add_controller(click.left);
        self.add_controller(click.right);
        self.add_controller(scroll);
      },
      onDestroy: () => {
        scroll.disconnect(handlers2[0]);
        click.left.disconnect(handlers2[1]);
        click.right.disconnect(handlers2[2]);
      },
      tooltipText: bind(audio, "description").as((n) => `Dispositivo atual: ${n}`),
      children: [
        /* @__PURE__ */ jsx2(
          "image",
          {
            cssClasses: ["AudioControlBtn"],
            iconName: bind(audio, "volumeIcon")
          }
        ),
        /* @__PURE__ */ jsx2(
          "label",
          {
            cssClasses: ["LabelAudioControl"],
            label: bind(audio, "volume").as((a) => `${Math.round(a * 100)}%`)
          }
        )
      ]
    }
  );
}

// modules/Network.tsx
import AstalNetwork from "gi://AstalNetwork";
var stateTexts = {
  [AstalNetwork.DeviceState.UNKNOWN]: "Desconhecido",
  [AstalNetwork.DeviceState.UNMANAGED]: "N\xE3o gerenciado",
  [AstalNetwork.DeviceState.UNAVAILABLE]: "Indispon\xEDvel",
  [AstalNetwork.DeviceState.DISCONNECTED]: "Desconectado",
  [AstalNetwork.DeviceState.PREPARE]: "Preparando",
  [AstalNetwork.DeviceState.CONFIG]: "Configurando",
  [AstalNetwork.DeviceState.NEED_AUTH]: "Necessita autentica\xE7\xE3o",
  [AstalNetwork.DeviceState.IP_CONFIG]: "Configurando IP",
  [AstalNetwork.DeviceState.IP_CHECK]: "Verificando IP",
  [AstalNetwork.DeviceState.SECONDARIES]: "Configurando secund\xE1rios",
  [AstalNetwork.DeviceState.ACTIVATED]: "Ativado",
  [AstalNetwork.DeviceState.DEACTIVATING]: "Desconectado",
  [AstalNetwork.DeviceState.FAILED]: "Falha"
};
function stateString(s) {
  return stateTexts[s] ?? "Estado desconhecido";
}
var network = AstalNetwork.get_default();
var stats = Variable(
  {
    wifi: {
      name: network.wifi.device.get_iface(),
      ssid: network.wifi.ssid ?? "",
      state: network.wifi.state ?? AstalNetwork.DeviceState.UNKNOWN
    },
    wired: {
      name: network.wired?.device.get_iface() ?? "Sem dispositivo",
      state: AstalNetwork.DeviceState.UNKNOWN
    }
  }
);
var handlers = [
  network.wifi.connect(
    "state-changed",
    () => {
      stats.set(
        {
          ...stats.get(),
          wifi: {
            name: network.wifi.device.get_iface() ?? "Sem dispositivo",
            ssid: network.wifi.ssid ?? "",
            state: network.wifi.state ?? AstalNetwork.DeviceState.UNAVAILABLE
          }
        }
      );
    }
  )
];
function Wifi() {
  return /* @__PURE__ */ jsx2("box", { cssClasses: ["Wifi"], children: /* @__PURE__ */ jsx2(
    "label",
    {
      maxWidthChars: 20,
      label: bind(stats).as((s) => s.wifi.state === AstalNetwork.DeviceState.ACTIVATED || s.wifi.state === AstalNetwork.DeviceState.SECONDARIES ? `${s.wifi.name}: ${s.wifi.ssid}` : `${s.wifi.name}: ${stateString(s.wifi.state)}`)
    }
  ) });
}
function Wired() {
  return /* @__PURE__ */ jsx2("box", { cssClasses: ["Wired"], children: /* @__PURE__ */ jsx2(
    "label",
    {
      maxWidthChars: 20,
      label: bind(stats).as((s) => s.wired.state === AstalNetwork.DeviceState.ACTIVATED || s.wired.state === AstalNetwork.DeviceState.SECONDARIES ? `${s.wired.name}: Connectado` : `${s.wired.name}${s.wired.name === "Sem dispositivo" ? "" : ": " + stateString(s.wired.state)}`)
    }
  ) });
}
function Network() {
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["Network"],
      onDestroy: () => {
        stats.drop();
        network.wifi.disconnect(handlers[0]);
      },
      children: [
        /* @__PURE__ */ jsx2(Wifi, {}),
        /* @__PURE__ */ jsx2(Wired, {})
      ]
    }
  );
}

// modules/SystemTray.tsx
import Tray from "gi://AstalTray";
function TrayItem({ item }) {
  let handlers2 = {
    primary: 0,
    middle: 0,
    secondary: 0,
    menuModel: 0,
    actionG: 0
  };
  const clickPrimary = new Gtk4.GestureClick({ button: Gdk2.BUTTON_PRIMARY });
  const clickSecondary = new Gtk4.GestureClick({ button: Gdk2.BUTTON_SECONDARY });
  const clickMiddle = new Gtk4.GestureClick({ button: Gdk2.BUTTON_MIDDLE });
  return /* @__PURE__ */ jsx2(
    "menubutton",
    {
      cssClasses: ["TrayItem"],
      tooltipText: bind(item, "tooltipMarkup"),
      menuModel: item.menuModel,
      usePopover: true,
      direction: Gtk4.ArrowType.DOWN,
      setup: (self) => {
        handlers2 = {
          primary: clickPrimary.connect("pressed", (_self, _n, x, y) => {
            if (item.is_menu) self.get_popover().popup();
            else item.activate(x, y);
          }),
          middle: clickMiddle.connect("pressed", (_self, _n, x, y) => {
            item.secondary_activate(x, y);
          }),
          secondary: clickSecondary.connect("pressed", () => {
            item.about_to_show();
            self.get_popover().popup();
          }),
          menuModel: item.connect("notify::menu-model", () => {
            self.set_menu_model(item.menuModel);
          }),
          actionG: item.connect("notify::action-group", () => {
            self.insert_action_group("dbusmenu", item.actionGroup);
          })
        };
        self.add_controller(clickPrimary);
        self.add_controller(clickMiddle);
        self.add_controller(clickSecondary);
      },
      onDestroy: (self) => {
        clickPrimary.disconnect(handlers2.primary);
        clickMiddle.disconnect(handlers2.middle);
        clickSecondary.disconnect(handlers2.secondary);
        item.disconnect(handlers2.menuModel);
        item.disconnect(handlers2.actionG);
        self.remove_controller(clickPrimary);
        self.remove_controller(clickMiddle);
        self.remove_controller(clickSecondary);
      },
      children: /* @__PURE__ */ jsx2("image", { gicon: bind(item, "gicon"), pixelSize: 16 })
    }
  );
}
function SystemTray() {
  const tray = Tray.get_default();
  return /* @__PURE__ */ jsx2(
    "box",
    {
      cssClasses: ["SystemTray"],
      orientation: Gtk4.Orientation.HORIZONTAL,
      spacing: 4,
      marginEnd: 8,
      children: bind(tray, "items").as(
        (items) => items.map(
          (item) => /* @__PURE__ */ jsx2(TrayItem, { item })
        )
      )
    }
  );
}

// modules/DateTime.tsx
var time = Variable({ clock: "", date: "" }).poll(
  6e4,
  () => {
    const dateConstructor = /* @__PURE__ */ new Date();
    return {
      clock: dateConstructor.toLocaleTimeString("pt-br", { hour: "2-digit", minute: "2-digit" }),
      date: dateConstructor.toLocaleDateString("pt-br", { weekday: "long", day: "numeric", month: "long", year: "numeric" }).replace(/^./, (char) => char.toUpperCase())
    };
  }
);
var Calendar = astalify(Gtk4.Calendar, {
  getChildren(self) {
    return [];
  },
  setChildren(self, children) {
  }
});
function MenuCalendar() {
  const selectedDate = Variable("Nenhuma data selecionada");
  return /* @__PURE__ */ jsxs("box", { cssClasses: ["Calendar"], orientation: Gtk4.Orientation.VERTICAL, onDestroy: () => {
    selectedDate.drop();
  }, children: [
    /* @__PURE__ */ jsx2("label", { cssClasses: ["CalendarLabel"], label: bind(selectedDate) }),
    /* @__PURE__ */ jsx2(
      Calendar,
      {
        cssClasses: ["CalendarContainer"],
        setup: (self) => {
          const daySelectedId = self.connect("day-selected", () => {
            const date = self.get_date();
            selectedDate.set(`Selecionado: ${date.format("%d-%m-%Y")}`);
          });
          return () => {
            self.disconnect(daySelectedId);
          };
        }
      }
    )
  ] });
}
function DateTime() {
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["DateTime"],
      orientation: Gtk4.Orientation.VERTICAL,
      onDestroy: () => {
        time.drop();
      },
      children: [
        /* @__PURE__ */ jsxs("menubutton", { cssClasses: ["Time"], halign: Gtk4.Align.END, children: [
          /* @__PURE__ */ jsx2("label", { cssClasses: ["TimeLabel"], label: bind(time).as((t) => `${t.clock}`) }),
          /* @__PURE__ */ jsx2("popover", { position: Gtk4.PositionType.TOP, children: /* @__PURE__ */ jsx2(MenuCalendar, {}) })
        ] }),
        /* @__PURE__ */ jsx2("label", { cssClasses: ["Date"], label: bind(time).as((t) => `${t.date}`) })
      ]
    }
  );
}
function MiniTime() {
  const shouldReveal = Variable(false);
  const transitionSpeed = 750;
  function toggleReveal() {
    shouldReveal.set(!shouldReveal.get());
  }
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["MiniTime"],
      onDestroy: () => {
        time.drop();
        shouldReveal.drop();
      },
      onHoverEnter: () => toggleReveal(),
      onHoverLeave: () => toggleReveal(),
      children: [
        /* @__PURE__ */ jsx2(
          "revealer",
          {
            revealChild: bind(shouldReveal).as((s) => !s),
            transitionType: Gtk4.RevealerTransitionType.SLIDE_LEFT,
            transitionDuration: transitionSpeed / 4,
            children: /* @__PURE__ */ jsx2("label", { label: bind(time).as((t) => `${t.clock}`) })
          }
        ),
        /* @__PURE__ */ jsx2(
          "revealer",
          {
            revealChild: bind(shouldReveal).as((s) => s),
            transitionType: Gtk4.RevealerTransitionType.SLIDE_RIGHT,
            transitionDuration: transitionSpeed,
            children: /* @__PURE__ */ jsx2("label", { label: bind(time).as((t) => `Hoje \xE9: ${t.date}`) })
          }
        )
      ]
    }
  );
}

// widget/Bar.tsx
function Bar(gdkmonitor) {
  const { TOP, LEFT, RIGHT } = Astal6.WindowAnchor;
  return /* @__PURE__ */ jsx2(
    "window",
    {
      visible: true,
      gdkmonitor,
      exclusivity: Astal6.Exclusivity.EXCLUSIVE,
      anchor: TOP | RIGHT | LEFT,
      application: app_default,
      children: /* @__PURE__ */ jsxs("centerbox", { cssClasses: ["Bar"], halign: Gtk4.Align.FILL, children: [
        /* @__PURE__ */ jsx2("box", { halign: Gtk4.Align.START, children: /* @__PURE__ */ jsx2(SystemTray, {}) }),
        /* @__PURE__ */ jsx2("box", { halign: Gtk4.Align.CENTER, children: /* @__PURE__ */ jsx2(MiniTime, {}) }),
        /* @__PURE__ */ jsxs("box", { halign: Gtk4.Align.END, children: [
          /* @__PURE__ */ jsx2(Network, {}),
          /* @__PURE__ */ jsx2(AudioControl, {}),
          /* @__PURE__ */ jsx2(SystemMonitor, {})
        ] })
      ] })
    }
  );
}

// modules/Media.tsx
import Mpris from "gi://AstalMpris";

// modules/Cava.tsx
import Gsk from "gi://Gsk";
import AstalCava from "gi://AstalCava?version=0.1";
import GObject3 from "gi://GObject";
import Graphene from "gi://Graphene?version=1.0";
var CavaConfig = {
  autosens: true,
  bars: 40,
  barWidth: 20,
  barHeight: 140,
  framerate: 60,
  input: AstalCava.Input.PIPEWIRE,
  noiseReduction: 0.77,
  sensitivity: 0.75,
  stereo: false,
  lerpFactor: 1
};
var cavaInstance = AstalCava.get_default();
var handler = null;
var Cava = GObject3.registerClass({ GTypeName: "Cava" }, class Cava2 extends Gtk4.DrawingArea {
  _rect = new Graphene.Rect();
  _size = new Graphene.Size();
  builder = new Gsk.PathBuilder();
  clip;
  values;
  norm;
  constructor() {
    super();
    this.setupRect();
    this.setupCava();
  }
  setupRect() {
    this.set_size_request(CavaConfig.barWidth * CavaConfig.bars, CavaConfig.barHeight);
    this.clip = new Gsk.RoundedRect();
    this._size.init(7, 7);
    this._rect.init(0, 0, this.get_allocated_width(), this.get_allocated_height());
    this.clip.init(this._rect, this._size, this._size, Graphene.Size.zero(), Graphene.Size.zero());
  }
  setupCava() {
    if (cavaInstance) {
      cavaInstance.set_autosens(CavaConfig.autosens);
      cavaInstance.set_bars(CavaConfig.bars);
      cavaInstance.set_framerate(CavaConfig.framerate);
      cavaInstance.set_input(CavaConfig.input);
      cavaInstance.set_noise_reduction(CavaConfig.noiseReduction);
      cavaInstance.set_stereo(CavaConfig.stereo);
      this.add_css_class("CavaContainer");
      this.values = new Float32Array(CavaConfig.bars);
      this.norm = new Float32Array(CavaConfig.bars);
      handler = cavaInstance.connect("notify::values", () => {
        this.queue_draw();
      });
    }
  }
  vfunc_size_allocate(width, height) {
    this.clip = null;
    super.vfunc_size_allocate(width, height, -1);
  }
  vfunc_snapshot(snapshot) {
    if (!cavaInstance) return;
    if (!this.clip) {
      this.clip = new Gsk.RoundedRect();
      this._rect.init(0, 0, this.get_allocated_width(), this.get_allocated_height());
      this.clip.init(this._rect, this._size, this._size, Graphene.Size.zero(), Graphene.Size.zero());
    }
    snapshot.push_rounded_clip(this.clip);
    this.draw_catmull_rom(snapshot);
    snapshot.pop();
  }
  // Code from Kotontrion. See https://github.com/kotontrion/kompass/blob/main/libkompass/src/cava.vala
  draw_catmull_rom(snapshot) {
    if (!cavaInstance) return;
    if (!this.builder) this.builder = new Gsk.PathBuilder();
    const width = this.get_allocated_width();
    const height = this.get_allocated_height();
    const raw = cavaInstance.get_values();
    const bars = CavaConfig.bars;
    const barWidth = width / (bars - 1);
    const color = this.get_color();
    const sens = CavaConfig.sensitivity;
    const lerp = CavaConfig.lerpFactor;
    const invSix = 1 / 6;
    for (let i = 0; i < bars; i++) {
      const vRaw = raw[i] * sens;
      const v = this.values[i] += (vRaw - this.values[i]) * lerp;
      this.norm[i] = height - height * v;
    }
    this.builder.move_to(0, this.norm[0]);
    for (let i = 0; i < bars - 1; i++) {
      const p0x = (i - 1) * barWidth;
      const p0y = this.norm[i > 0 ? i - 1 : 0];
      const p1x = i * barWidth;
      const p1y = this.norm[i];
      const p2x = (i + 1) * barWidth;
      const p2y = this.norm[i + 1];
      const p3x = (i + 2) * barWidth;
      const p3y = this.norm[i + 2 < bars ? i + 2 : bars - 1];
      const c1x = p1x + (p2x - p0x) * invSix;
      const c1y = p1y + (p2y - p0y) * invSix;
      const c2x = p2x - (p3x - p1x) * invSix;
      const c2y = p2y - (p3y - p1y) * invSix;
      this.builder.cubic_to(c1x, c1y, c2x, c2y, p2x, p2y);
    }
    this.builder.line_to(width, height);
    this.builder.line_to(0, height);
    snapshot.append_fill(this.builder.to_path(), Gsk.FillRule.WINDING, color);
  }
});
function CavaContainer() {
  return /* @__PURE__ */ jsx2(
    "box",
    {
      setup: (self) => self.set_size_request(CavaConfig.barWidth * CavaConfig.bars, CavaConfig.barHeight),
      onDestroy: () => {
        if (handler) {
          cavaInstance?.disconnect(handler);
        }
      },
      children: /* @__PURE__ */ jsx2(Cava, {})
    }
  );
}

// modules/Media.tsx
var mediaState = Variable(
  {
    currentState: "Nada tocando...",
    currentCss: "",
    lastPlayer: null,
    handlers: []
  }
);
var updateTimeout = null;
var DEBOUNCE_DELAY = 100;
var mpris = Mpris.get_default();
function disconnectFromPlayer() {
  const state = mediaState.get();
  if (updateTimeout) {
    clearTimeout(updateTimeout);
    updateTimeout = null;
  }
  if (state.lastPlayer && state.handlers.length > 0) {
    state.handlers.forEach((handler2) => {
      state.lastPlayer.disconnect(handler2);
    });
  }
  mediaState.set({
    ...state,
    lastPlayer: null,
    handlers: [],
    currentCss: "",
    currentState: "Nada tocando..."
  });
}
function connectToPlayer(player) {
  disconnectFromPlayer();
  if (!player) return;
  const handlers2 = [
    player.connect("notify::playback-status", () => {
      updateMediaState(player);
    }),
    player.connect("notify::title", () => {
      updateMediaState(player);
    }),
    player.connect("notify::artist", () => {
      updateMediaState(player);
    }),
    // Alguns players enviam notify::metadata em vez dos campos especÃ­ficos
    player.connect("notify::metadata", () => {
      updateMediaState(player);
    })
  ];
  mediaState.set({
    ...mediaState.get(),
    lastPlayer: player,
    handlers: handlers2
  });
  updateMediaState(player);
}
function updateMediaState(player) {
  if (updateTimeout) {
    clearTimeout(updateTimeout);
  }
  updateTimeout = setTimeout(() => {
    executeUpdateMediaState(player);
    updateTimeout = null;
  }, DEBOUNCE_DELAY);
}
function executeUpdateMediaState(player) {
  if (!player) {
    mediaState.set({
      ...mediaState.get(),
      currentCss: "",
      currentState: "Nada tocando..."
    });
    return;
  }
  try {
    if (!player.busName) {
      const nextPlayer = findBestPlayer();
      if (nextPlayer && nextPlayer !== player) {
        connectToPlayer(nextPlayer);
        return;
      }
    }
    const title = player.title || "T\xEDtulo desconhecido";
    const artist = player.artist || "Artista desconhecido";
    const status = player.playbackStatus;
    switch (status) {
      case Mpris.PlaybackStatus.PLAYING:
        mediaState.set({
          ...mediaState.get(),
          currentCss: "MediaPlaying",
          currentState: `Tocando agora: ${title} \u2013 ${artist}`
        });
        break;
      case Mpris.PlaybackStatus.PAUSED:
        mediaState.set({
          ...mediaState.get(),
          currentCss: "MediaPlaying",
          currentState: `Pausado: ${title} \u2013 ${artist}`
        });
        break;
      case Mpris.PlaybackStatus.STOPPED:
      default:
        mediaState.set({
          ...mediaState.get(),
          currentCss: "",
          currentState: "Nada tocando..."
        });
        break;
    }
  } catch (error) {
    console.warn("Erro ao acessar propriedades do player MPRIS:", error);
    const nextPlayer = findBestPlayer();
    if (nextPlayer && nextPlayer !== player) {
      connectToPlayer(nextPlayer);
    } else {
      mediaState.set({
        ...mediaState.get(),
        currentCss: "",
        currentState: "Nada tocando..."
      });
    }
  }
}
function findBestPlayer() {
  const players = mpris.players;
  if (players.length === 0) return null;
  const validPlayers = players.filter((p) => {
    try {
      return p.busName && p.busName.length > 0;
    } catch {
      return false;
    }
  });
  if (validPlayers.length === 0) return null;
  const playingPlayer = validPlayers.find((p) => {
    try {
      return p.playbackStatus === Mpris.PlaybackStatus.PLAYING;
    } catch {
      return false;
    }
  });
  if (playingPlayer) {
    return playingPlayer;
  }
  const pausedPlayer = validPlayers.find((p) => {
    try {
      return p.playbackStatus === Mpris.PlaybackStatus.PAUSED;
    } catch {
      return false;
    }
  });
  if (pausedPlayer) {
    return pausedPlayer;
  }
  return validPlayers[0];
}
function initializeMpris() {
  console.log("Inicializando MPRIS...");
  const initialPlayer = findBestPlayer();
  if (initialPlayer) {
    connectToPlayer(initialPlayer);
  } else {
    console.log("Nenhum player dispon\xEDvel na inicializa\xE7\xE3o");
  }
}
var mprisHandlers = [
  mpris.connect("player-added", (_, player) => {
    const currentPlayer = mediaState.get().lastPlayer;
    if (!currentPlayer) {
      connectToPlayer(player);
    } else {
      try {
        if (player.playbackStatus === Mpris.PlaybackStatus.PLAYING) {
          connectToPlayer(player);
        }
      } catch (error) {
        console.warn("Erro ao verificar status do novo player:", error);
      }
    }
  }),
  mpris.connect("player-closed", (_, player) => {
    const currentPlayer = mediaState.get().lastPlayer;
    if (currentPlayer === player) {
      const nextPlayer = findBestPlayer();
      if (nextPlayer) {
        connectToPlayer(nextPlayer);
      } else {
        disconnectFromPlayer();
      }
    }
  })
];
function MprisInfo() {
  return /* @__PURE__ */ jsx2("box", { cssClasses: ["MprisInfo"], vexpand: true, children: /* @__PURE__ */ jsx2(
    "label",
    {
      cssClasses: ["MprisLabel"],
      label: bind(mediaState).as((c) => c.currentState),
      ellipsize: 3,
      maxWidthChars: 75
    }
  ) });
}
function Media() {
  initializeMpris();
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: bind(mediaState).as((m) => ["Media", m.currentCss]),
      orientation: Gtk4.Orientation.VERTICAL,
      setup: (self) => {
        const click = new Gtk4.GestureClick();
        click.set_button(Gdk2.BUTTON_PRIMARY);
        click.connect("pressed", () => {
          const player = mediaState.get().lastPlayer;
          if (player) {
            try {
              player.play_pause();
              setTimeout(() => executeUpdateMediaState(player), 100);
            } catch (error) {
              console.warn("Erro ao pausar/tocar:", error);
            }
          }
        });
        self.add_controller(click);
      },
      onDestroy: () => {
        disconnectFromPlayer();
        mediaState.drop();
        mprisHandlers.forEach((h) => mpris.disconnect(h));
      },
      children: [
        /* @__PURE__ */ jsx2(CavaContainer, {}),
        /* @__PURE__ */ jsx2(MprisInfo, {})
      ]
    }
  );
}

// widget/Background.tsx
function Background(gdkmonitor) {
  const { BOTTOM, RIGHT, LEFT } = Astal6.WindowAnchor;
  return /* @__PURE__ */ jsx2(
    "window",
    {
      visible: true,
      gdkmonitor,
      exclusivity: Astal6.Exclusivity.IGNORE,
      layer: Astal6.Layer.BOTTOM,
      anchor: BOTTOM | LEFT | RIGHT,
      application: app_default,
      popup: false,
      children: /* @__PURE__ */ jsxs("centerbox", { cssClasses: ["Background"], halign: Gtk4.Align.FILL, children: [
        /* @__PURE__ */ jsx2("box", { cssClasses: ["BackgroundLeftModules"], halign: Gtk4.Align.START, children: /* @__PURE__ */ jsx2(Media, {}) }),
        /* @__PURE__ */ jsx2("box", { cssClasses: ["BackgroundLeftModules"], halign: Gtk4.Align.CENTER, hexpand: true }),
        /* @__PURE__ */ jsx2("box", { cssClasses: ["BackgroundRightModules"], halign: Gtk4.Align.END, children: /* @__PURE__ */ jsx2(DateTime, {}) })
      ] })
    }
  );
}

// app.ts
app_default.start({
  instanceName: "AgsEcosystem",
  css: "",
  main() {
    const provider = new Gtk4.CssProvider();
    provider.load_from_string(style_default);
    Gtk4.StyleContext.add_provider_for_display(Gdk2.Display.get_default(), provider, Gtk4.STYLE_PROVIDER_PRIORITY_USER);
    app_default.get_monitors().map(
      (monitor) => {
        Bar(monitor);
        Background(monitor);
      }
    );
  }
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9ndGs0L2luZGV4LnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvdmFyaWFibGUudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9iaW5kaW5nLnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvdGltZS50cyIsICIuLi8uLi8uLi8uLi91c3Ivc2hhcmUvYXN0YWwvZ2pzL3Byb2Nlc3MudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9fYXN0YWwudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9ndGs0L2FzdGFsaWZ5LnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvZ3RrNC9hcHAudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9vdmVycmlkZXMudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9fYXBwLnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvZ3RrNC93aWRnZXQudHMiLCAic2FzczovaG9tZS9pdGlyby8uY29uZmlnL2Fncy9zdHlsZS5zY3NzIiwgIm1vZHVsZXMvU3lzdGVtTW9uaXRvci50c3giLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9pbmRleC50cyIsICIuLi8uLi8uLi8uLi91c3Ivc2hhcmUvYXN0YWwvZ2pzL2ZpbGUudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9nb2JqZWN0LnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvZ3RrNC9qc3gtcnVudGltZS50cyIsICJtb2R1bGVzL0F1ZGlvQ29udHJvbC50c3giLCAibW9kdWxlcy9OZXR3b3JrLnRzeCIsICJtb2R1bGVzL1N5c3RlbVRyYXkudHN4IiwgIm1vZHVsZXMvRGF0ZVRpbWUudHN4IiwgIndpZGdldC9CYXIudHN4IiwgIm1vZHVsZXMvTWVkaWEudHN4IiwgIm1vZHVsZXMvQ2F2YS50c3giLCAid2lkZ2V0L0JhY2tncm91bmQudHN4IiwgImFwcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IEFzdGFsIGZyb20gXCJnaTovL0FzdGFsP3ZlcnNpb249NC4wXCJcbmltcG9ydCBHdGsgZnJvbSBcImdpOi8vR3RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBHZGsgZnJvbSBcImdpOi8vR2RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBhc3RhbGlmeSwgeyB0eXBlIENvbnN0cnVjdFByb3BzIH0gZnJvbSBcIi4vYXN0YWxpZnkuanNcIlxuXG5leHBvcnQgeyBBc3RhbCwgR3RrLCBHZGsgfVxuZXhwb3J0IHsgZGVmYXVsdCBhcyBBcHAgfSBmcm9tIFwiLi9hcHAuanNcIlxuZXhwb3J0IHsgYXN0YWxpZnksIENvbnN0cnVjdFByb3BzIH1cbmV4cG9ydCAqIGFzIFdpZGdldCBmcm9tIFwiLi93aWRnZXQuanNcIlxuZXhwb3J0IHsgaG9vayB9IGZyb20gXCIuLi9fYXN0YWxcIlxuIiwgImltcG9ydCBBc3RhbCBmcm9tIFwiZ2k6Ly9Bc3RhbElPXCJcbmltcG9ydCBCaW5kaW5nLCB7IHR5cGUgQ29ubmVjdGFibGUsIHR5cGUgU3Vic2NyaWJhYmxlIH0gZnJvbSBcIi4vYmluZGluZy5qc1wiXG5pbXBvcnQgeyBpbnRlcnZhbCB9IGZyb20gXCIuL3RpbWUuanNcIlxuaW1wb3J0IHsgZXhlY0FzeW5jLCBzdWJwcm9jZXNzIH0gZnJvbSBcIi4vcHJvY2Vzcy5qc1wiXG5cbmNsYXNzIFZhcmlhYmxlV3JhcHBlcjxUPiBleHRlbmRzIEZ1bmN0aW9uIHtcbiAgICBwcml2YXRlIHZhcmlhYmxlITogQXN0YWwuVmFyaWFibGVCYXNlXG4gICAgcHJpdmF0ZSBlcnJIYW5kbGVyPyA9IGNvbnNvbGUuZXJyb3JcblxuICAgIHByaXZhdGUgX3ZhbHVlOiBUXG4gICAgcHJpdmF0ZSBfcG9sbD86IEFzdGFsLlRpbWVcbiAgICBwcml2YXRlIF93YXRjaD86IEFzdGFsLlByb2Nlc3NcblxuICAgIHByaXZhdGUgcG9sbEludGVydmFsID0gMTAwMFxuICAgIHByaXZhdGUgcG9sbEV4ZWM/OiBzdHJpbmdbXSB8IHN0cmluZ1xuICAgIHByaXZhdGUgcG9sbFRyYW5zZm9ybT86IChzdGRvdXQ6IHN0cmluZywgcHJldjogVCkgPT4gVFxuICAgIHByaXZhdGUgcG9sbEZuPzogKHByZXY6IFQpID0+IFQgfCBQcm9taXNlPFQ+XG5cbiAgICBwcml2YXRlIHdhdGNoVHJhbnNmb3JtPzogKHN0ZG91dDogc3RyaW5nLCBwcmV2OiBUKSA9PiBUXG4gICAgcHJpdmF0ZSB3YXRjaEV4ZWM/OiBzdHJpbmdbXSB8IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3IoaW5pdDogVCkge1xuICAgICAgICBzdXBlcigpXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gaW5pdFxuICAgICAgICB0aGlzLnZhcmlhYmxlID0gbmV3IEFzdGFsLlZhcmlhYmxlQmFzZSgpXG4gICAgICAgIHRoaXMudmFyaWFibGUuY29ubmVjdChcImRyb3BwZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdG9wV2F0Y2goKVxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbCgpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMudmFyaWFibGUuY29ubmVjdChcImVycm9yXCIsIChfLCBlcnIpID0+IHRoaXMuZXJySGFuZGxlcj8uKGVycikpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodGhpcywge1xuICAgICAgICAgICAgYXBwbHk6ICh0YXJnZXQsIF8sIGFyZ3MpID0+IHRhcmdldC5fY2FsbChhcmdzWzBdKSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jYWxsPFIgPSBUPih0cmFuc2Zvcm0/OiAodmFsdWU6IFQpID0+IFIpOiBCaW5kaW5nPFI+IHtcbiAgICAgICAgY29uc3QgYiA9IEJpbmRpbmcuYmluZCh0aGlzKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtID8gYi5hcyh0cmFuc2Zvcm0pIDogYiBhcyB1bmtub3duIGFzIEJpbmRpbmc8Uj5cbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhgVmFyaWFibGU8JHt0aGlzLmdldCgpfT5gKVxuICAgIH1cblxuICAgIGdldCgpOiBUIHsgcmV0dXJuIHRoaXMuX3ZhbHVlIH1cbiAgICBzZXQodmFsdWU6IFQpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLl92YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgdGhpcy52YXJpYWJsZS5lbWl0KFwiY2hhbmdlZFwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnRQb2xsKCkge1xuICAgICAgICBpZiAodGhpcy5fcG9sbClcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIGlmICh0aGlzLnBvbGxGbikge1xuICAgICAgICAgICAgdGhpcy5fcG9sbCA9IGludGVydmFsKHRoaXMucG9sbEludGVydmFsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMucG9sbEZuISh0aGlzLmdldCgpKVxuICAgICAgICAgICAgICAgIGlmICh2IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB2LnRoZW4odiA9PiB0aGlzLnNldCh2KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gdGhpcy52YXJpYWJsZS5lbWl0KFwiZXJyb3JcIiwgZXJyKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCh2KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wb2xsRXhlYykge1xuICAgICAgICAgICAgdGhpcy5fcG9sbCA9IGludGVydmFsKHRoaXMucG9sbEludGVydmFsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZXhlY0FzeW5jKHRoaXMucG9sbEV4ZWMhKVxuICAgICAgICAgICAgICAgICAgICAudGhlbih2ID0+IHRoaXMuc2V0KHRoaXMucG9sbFRyYW5zZm9ybSEodiwgdGhpcy5nZXQoKSkpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHRoaXMudmFyaWFibGUuZW1pdChcImVycm9yXCIsIGVycikpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnRXYXRjaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3dhdGNoKVxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5fd2F0Y2ggPSBzdWJwcm9jZXNzKHtcbiAgICAgICAgICAgIGNtZDogdGhpcy53YXRjaEV4ZWMhLFxuICAgICAgICAgICAgb3V0OiBvdXQgPT4gdGhpcy5zZXQodGhpcy53YXRjaFRyYW5zZm9ybSEob3V0LCB0aGlzLmdldCgpKSksXG4gICAgICAgICAgICBlcnI6IGVyciA9PiB0aGlzLnZhcmlhYmxlLmVtaXQoXCJlcnJvclwiLCBlcnIpLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0b3BQb2xsKCkge1xuICAgICAgICB0aGlzLl9wb2xsPy5jYW5jZWwoKVxuICAgICAgICBkZWxldGUgdGhpcy5fcG9sbFxuICAgIH1cblxuICAgIHN0b3BXYXRjaCgpIHtcbiAgICAgICAgdGhpcy5fd2F0Y2g/LmtpbGwoKVxuICAgICAgICBkZWxldGUgdGhpcy5fd2F0Y2hcbiAgICB9XG5cbiAgICBpc1BvbGxpbmcoKSB7IHJldHVybiAhIXRoaXMuX3BvbGwgfVxuICAgIGlzV2F0Y2hpbmcoKSB7IHJldHVybiAhIXRoaXMuX3dhdGNoIH1cblxuICAgIGRyb3AoKSB7XG4gICAgICAgIHRoaXMudmFyaWFibGUuZW1pdChcImRyb3BwZWRcIilcbiAgICB9XG5cbiAgICBvbkRyb3BwZWQoY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZS5jb25uZWN0KFwiZHJvcHBlZFwiLCBjYWxsYmFjaylcbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIG9uRXJyb3IoY2FsbGJhY2s6IChlcnI6IHN0cmluZykgPT4gdm9pZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5lcnJIYW5kbGVyXG4gICAgICAgIHRoaXMudmFyaWFibGUuY29ubmVjdChcImVycm9yXCIsIChfLCBlcnIpID0+IGNhbGxiYWNrKGVycikpXG4gICAgICAgIHJldHVybiB0aGlzIGFzIHVua25vd24gYXMgVmFyaWFibGU8VD5cbiAgICB9XG5cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2s6ICh2YWx1ZTogVCkgPT4gdm9pZCkge1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMudmFyaWFibGUuY29ubmVjdChcImNoYW5nZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5nZXQoKSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMudmFyaWFibGUuZGlzY29ubmVjdChpZClcbiAgICB9XG5cbiAgICBwb2xsKFxuICAgICAgICBpbnRlcnZhbDogbnVtYmVyLFxuICAgICAgICBleGVjOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICAgICAgdHJhbnNmb3JtPzogKHN0ZG91dDogc3RyaW5nLCBwcmV2OiBUKSA9PiBUXG4gICAgKTogVmFyaWFibGU8VD5cblxuICAgIHBvbGwoXG4gICAgICAgIGludGVydmFsOiBudW1iZXIsXG4gICAgICAgIGNhbGxiYWNrOiAocHJldjogVCkgPT4gVCB8IFByb21pc2U8VD5cbiAgICApOiBWYXJpYWJsZTxUPlxuXG4gICAgcG9sbChcbiAgICAgICAgaW50ZXJ2YWw6IG51bWJlcixcbiAgICAgICAgZXhlYzogc3RyaW5nIHwgc3RyaW5nW10gfCAoKHByZXY6IFQpID0+IFQgfCBQcm9taXNlPFQ+KSxcbiAgICAgICAgdHJhbnNmb3JtOiAoc3Rkb3V0OiBzdHJpbmcsIHByZXY6IFQpID0+IFQgPSBvdXQgPT4gb3V0IGFzIFQsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGwoKVxuICAgICAgICB0aGlzLnBvbGxJbnRlcnZhbCA9IGludGVydmFsXG4gICAgICAgIHRoaXMucG9sbFRyYW5zZm9ybSA9IHRyYW5zZm9ybVxuICAgICAgICBpZiAodHlwZW9mIGV4ZWMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5wb2xsRm4gPSBleGVjXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wb2xsRXhlY1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wb2xsRXhlYyA9IGV4ZWNcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBvbGxGblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhcnRQb2xsKClcbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIHdhdGNoKFxuICAgICAgICBleGVjOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICAgICAgdHJhbnNmb3JtOiAoc3Rkb3V0OiBzdHJpbmcsIHByZXY6IFQpID0+IFQgPSBvdXQgPT4gb3V0IGFzIFQsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuc3RvcFdhdGNoKClcbiAgICAgICAgdGhpcy53YXRjaEV4ZWMgPSBleGVjXG4gICAgICAgIHRoaXMud2F0Y2hUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbiAgICAgICAgdGhpcy5zdGFydFdhdGNoKClcbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIG9ic2VydmUoXG4gICAgICAgIG9ianM6IEFycmF5PFtvYmo6IENvbm5lY3RhYmxlLCBzaWduYWw6IHN0cmluZ10+LFxuICAgICAgICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBULFxuICAgICk6IFZhcmlhYmxlPFQ+XG5cbiAgICBvYnNlcnZlKFxuICAgICAgICBvYmo6IENvbm5lY3RhYmxlLFxuICAgICAgICBzaWduYWw6IHN0cmluZyxcbiAgICAgICAgY2FsbGJhY2s6ICguLi5hcmdzOiBhbnlbXSkgPT4gVCxcbiAgICApOiBWYXJpYWJsZTxUPlxuXG4gICAgb2JzZXJ2ZShcbiAgICAgICAgb2JqczogQ29ubmVjdGFibGUgfCBBcnJheTxbb2JqOiBDb25uZWN0YWJsZSwgc2lnbmFsOiBzdHJpbmddPixcbiAgICAgICAgc2lnT3JGbjogc3RyaW5nIHwgKChvYmo6IENvbm5lY3RhYmxlLCAuLi5hcmdzOiBhbnlbXSkgPT4gVCksXG4gICAgICAgIGNhbGxiYWNrPzogKG9iajogQ29ubmVjdGFibGUsIC4uLmFyZ3M6IGFueVtdKSA9PiBULFxuICAgICkge1xuICAgICAgICBjb25zdCBmID0gdHlwZW9mIHNpZ09yRm4gPT09IFwiZnVuY3Rpb25cIiA/IHNpZ09yRm4gOiBjYWxsYmFjayA/PyAoKCkgPT4gdGhpcy5nZXQoKSlcbiAgICAgICAgY29uc3Qgc2V0ID0gKG9iajogQ29ubmVjdGFibGUsIC4uLmFyZ3M6IGFueVtdKSA9PiB0aGlzLnNldChmKG9iaiwgLi4uYXJncykpXG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIG9ianMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBbbywgc10gPSBvYmpcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IG8uY29ubmVjdChzLCBzZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyb3BwZWQoKCkgPT4gby5kaXNjb25uZWN0KGlkKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2lnT3JGbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gb2Jqcy5jb25uZWN0KHNpZ09yRm4sIHNldClcbiAgICAgICAgICAgICAgICB0aGlzLm9uRHJvcHBlZCgoKSA9PiBvYmpzLmRpc2Nvbm5lY3QoaWQpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIHN0YXRpYyBkZXJpdmU8XG4gICAgICAgIGNvbnN0IERlcHMgZXh0ZW5kcyBBcnJheTxTdWJzY3JpYmFibGU8YW55Pj4sXG4gICAgICAgIEFyZ3MgZXh0ZW5kcyB7XG4gICAgICAgICAgICBbSyBpbiBrZXlvZiBEZXBzXTogRGVwc1tLXSBleHRlbmRzIFN1YnNjcmliYWJsZTxpbmZlciBUPiA/IFQgOiBuZXZlclxuICAgICAgICB9LFxuICAgICAgICBWID0gQXJncyxcbiAgICA+KGRlcHM6IERlcHMsIGZuOiAoLi4uYXJnczogQXJncykgPT4gViA9ICguLi5hcmdzKSA9PiBhcmdzIGFzIHVua25vd24gYXMgVikge1xuICAgICAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiBmbiguLi5kZXBzLm1hcChkID0+IGQuZ2V0KCkpIGFzIEFyZ3MpXG4gICAgICAgIGNvbnN0IGRlcml2ZWQgPSBuZXcgVmFyaWFibGUodXBkYXRlKCkpXG4gICAgICAgIGNvbnN0IHVuc3VicyA9IGRlcHMubWFwKGRlcCA9PiBkZXAuc3Vic2NyaWJlKCgpID0+IGRlcml2ZWQuc2V0KHVwZGF0ZSgpKSkpXG4gICAgICAgIGRlcml2ZWQub25Ecm9wcGVkKCgpID0+IHVuc3Vicy5tYXAodW5zdWIgPT4gdW5zdWIoKSkpXG4gICAgICAgIHJldHVybiBkZXJpdmVkXG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhcmlhYmxlPFQ+IGV4dGVuZHMgT21pdDxWYXJpYWJsZVdyYXBwZXI8VD4sIFwiYmluZFwiPiB7XG4gICAgPFI+KHRyYW5zZm9ybTogKHZhbHVlOiBUKSA9PiBSKTogQmluZGluZzxSPlxuICAgICgpOiBCaW5kaW5nPFQ+XG59XG5cbmV4cG9ydCBjb25zdCBWYXJpYWJsZSA9IG5ldyBQcm94eShWYXJpYWJsZVdyYXBwZXIgYXMgYW55LCB7XG4gICAgYXBwbHk6IChfdCwgX2EsIGFyZ3MpID0+IG5ldyBWYXJpYWJsZVdyYXBwZXIoYXJnc1swXSksXG59KSBhcyB7XG4gICAgZGVyaXZlOiB0eXBlb2YgVmFyaWFibGVXcmFwcGVyW1wiZGVyaXZlXCJdXG4gICAgPFQ+KGluaXQ6IFQpOiBWYXJpYWJsZTxUPlxuICAgIG5ldzxUPihpbml0OiBUKTogVmFyaWFibGU8VD5cbn1cblxuZXhwb3J0IGNvbnN0IHsgZGVyaXZlIH0gPSBWYXJpYWJsZVxuZXhwb3J0IGRlZmF1bHQgVmFyaWFibGVcbiIsICJleHBvcnQgY29uc3Qgc25ha2VpZnkgPSAoc3RyOiBzdHJpbmcpID0+IHN0clxuICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxXyQyXCIpXG4gICAgLnJlcGxhY2VBbGwoXCItXCIsIFwiX1wiKVxuICAgIC50b0xvd2VyQ2FzZSgpXG5cbmV4cG9ydCBjb25zdCBrZWJhYmlmeSA9IChzdHI6IHN0cmluZykgPT4gc3RyXG4gICAgLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEtJDJcIilcbiAgICAucmVwbGFjZUFsbChcIl9cIiwgXCItXCIpXG4gICAgLnRvTG93ZXJDYXNlKClcblxuZXhwb3J0IGludGVyZmFjZSBTdWJzY3JpYmFibGU8VCA9IHVua25vd24+IHtcbiAgICBzdWJzY3JpYmUoY2FsbGJhY2s6ICh2YWx1ZTogVCkgPT4gdm9pZCk6ICgpID0+IHZvaWRcbiAgICBnZXQoKTogVFxuICAgIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RhYmxlIHtcbiAgICBjb25uZWN0KHNpZ25hbDogc3RyaW5nLCBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiB1bmtub3duKTogbnVtYmVyXG4gICAgZGlzY29ubmVjdChpZDogbnVtYmVyKTogdm9pZFxuICAgIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG5leHBvcnQgY2xhc3MgQmluZGluZzxWYWx1ZT4ge1xuICAgIHByaXZhdGUgdHJhbnNmb3JtRm4gPSAodjogYW55KSA9PiB2XG5cbiAgICAjZW1pdHRlcjogU3Vic2NyaWJhYmxlPFZhbHVlPiB8IENvbm5lY3RhYmxlXG4gICAgI3Byb3A/OiBzdHJpbmdcblxuICAgIHN0YXRpYyBiaW5kPFxuICAgICAgICBUIGV4dGVuZHMgQ29ubmVjdGFibGUsXG4gICAgICAgIFAgZXh0ZW5kcyBrZXlvZiBULFxuICAgID4ob2JqZWN0OiBULCBwcm9wZXJ0eTogUCk6IEJpbmRpbmc8VFtQXT5cblxuICAgIHN0YXRpYyBiaW5kPFQ+KG9iamVjdDogU3Vic2NyaWJhYmxlPFQ+KTogQmluZGluZzxUPlxuXG4gICAgc3RhdGljIGJpbmQoZW1pdHRlcjogQ29ubmVjdGFibGUgfCBTdWJzY3JpYmFibGUsIHByb3A/OiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nKGVtaXR0ZXIsIHByb3ApXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihlbWl0dGVyOiBDb25uZWN0YWJsZSB8IFN1YnNjcmliYWJsZTxWYWx1ZT4sIHByb3A/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy4jZW1pdHRlciA9IGVtaXR0ZXJcbiAgICAgICAgdGhpcy4jcHJvcCA9IHByb3AgJiYga2ViYWJpZnkocHJvcClcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBCaW5kaW5nPCR7dGhpcy4jZW1pdHRlcn0ke3RoaXMuI3Byb3AgPyBgLCBcIiR7dGhpcy4jcHJvcH1cImAgOiBcIlwifT5gXG4gICAgfVxuXG4gICAgYXM8VD4oZm46ICh2OiBWYWx1ZSkgPT4gVCk6IEJpbmRpbmc8VD4ge1xuICAgICAgICBjb25zdCBiaW5kID0gbmV3IEJpbmRpbmcodGhpcy4jZW1pdHRlciwgdGhpcy4jcHJvcClcbiAgICAgICAgYmluZC50cmFuc2Zvcm1GbiA9ICh2OiBWYWx1ZSkgPT4gZm4odGhpcy50cmFuc2Zvcm1Gbih2KSlcbiAgICAgICAgcmV0dXJuIGJpbmQgYXMgdW5rbm93biBhcyBCaW5kaW5nPFQ+XG4gICAgfVxuXG4gICAgZ2V0KCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiNlbWl0dGVyLmdldCA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRm4odGhpcy4jZW1pdHRlci5nZXQoKSlcblxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3Byb3AgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGdldHRlciA9IGBnZXRfJHtzbmFrZWlmeSh0aGlzLiNwcm9wKX1gXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuI2VtaXR0ZXJbZ2V0dGVyXSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUZuKHRoaXMuI2VtaXR0ZXJbZ2V0dGVyXSgpKVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Gbih0aGlzLiNlbWl0dGVyW3RoaXMuI3Byb3BdKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgRXJyb3IoXCJjYW4gbm90IGdldCB2YWx1ZSBvZiBiaW5kaW5nXCIpXG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrOiAodmFsdWU6IFZhbHVlKSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jZW1pdHRlci5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2VtaXR0ZXIuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLmdldCgpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy4jZW1pdHRlci5jb25uZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25hbCA9IGBub3RpZnk6OiR7dGhpcy4jcHJvcH1gXG4gICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuI2VtaXR0ZXIuY29ubmVjdChzaWduYWwsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLmdldCgpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgKHRoaXMuI2VtaXR0ZXIuZGlzY29ubmVjdCBhcyBDb25uZWN0YWJsZVtcImRpc2Nvbm5lY3RcIl0pKGlkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IEVycm9yKGAke3RoaXMuI2VtaXR0ZXJ9IGlzIG5vdCBiaW5kYWJsZWApXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgeyBiaW5kIH0gPSBCaW5kaW5nXG5leHBvcnQgZGVmYXVsdCBCaW5kaW5nXG4iLCAiaW1wb3J0IEFzdGFsIGZyb20gXCJnaTovL0FzdGFsSU9cIlxuXG5leHBvcnQgdHlwZSBUaW1lID0gQXN0YWwuVGltZVxuZXhwb3J0IGNvbnN0IFRpbWUgPSBBc3RhbC5UaW1lXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnZhbChpbnRlcnZhbDogbnVtYmVyLCBjYWxsYmFjaz86ICgpID0+IHZvaWQpIHtcbiAgICByZXR1cm4gQXN0YWwuVGltZS5pbnRlcnZhbChpbnRlcnZhbCwgKCkgPT4gdm9pZCBjYWxsYmFjaz8uKCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lb3V0KHRpbWVvdXQ6IG51bWJlciwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIEFzdGFsLlRpbWUudGltZW91dCh0aW1lb3V0LCAoKSA9PiB2b2lkIGNhbGxiYWNrPy4oKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlkbGUoY2FsbGJhY2s/OiAoKSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIEFzdGFsLlRpbWUuaWRsZSgoKSA9PiB2b2lkIGNhbGxiYWNrPy4oKSlcbn1cbiIsICJpbXBvcnQgQXN0YWwgZnJvbSBcImdpOi8vQXN0YWxJT1wiXG5cbnR5cGUgQXJncyA9IHtcbiAgICBjbWQ6IHN0cmluZyB8IHN0cmluZ1tdXG4gICAgb3V0PzogKHN0ZG91dDogc3RyaW5nKSA9PiB2b2lkXG4gICAgZXJyPzogKHN0ZGVycjogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmV4cG9ydCB0eXBlIFByb2Nlc3MgPSBBc3RhbC5Qcm9jZXNzXG5leHBvcnQgY29uc3QgUHJvY2VzcyA9IEFzdGFsLlByb2Nlc3NcblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnByb2Nlc3MoYXJnczogQXJncyk6IEFzdGFsLlByb2Nlc3NcblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnByb2Nlc3MoXG4gICAgY21kOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBvbk91dD86IChzdGRvdXQ6IHN0cmluZykgPT4gdm9pZCxcbiAgICBvbkVycj86IChzdGRlcnI6IHN0cmluZykgPT4gdm9pZCxcbik6IEFzdGFsLlByb2Nlc3NcblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnByb2Nlc3MoXG4gICAgYXJnc09yQ21kOiBBcmdzIHwgc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgb25PdXQ6IChzdGRvdXQ6IHN0cmluZykgPT4gdm9pZCA9IHByaW50LFxuICAgIG9uRXJyOiAoc3RkZXJyOiBzdHJpbmcpID0+IHZvaWQgPSBwcmludGVycixcbikge1xuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5pc0FycmF5KGFyZ3NPckNtZCkgfHwgdHlwZW9mIGFyZ3NPckNtZCA9PT0gXCJzdHJpbmdcIlxuICAgIGNvbnN0IHsgY21kLCBlcnIsIG91dCB9ID0ge1xuICAgICAgICBjbWQ6IGFyZ3MgPyBhcmdzT3JDbWQgOiBhcmdzT3JDbWQuY21kLFxuICAgICAgICBlcnI6IGFyZ3MgPyBvbkVyciA6IGFyZ3NPckNtZC5lcnIgfHwgb25FcnIsXG4gICAgICAgIG91dDogYXJncyA/IG9uT3V0IDogYXJnc09yQ21kLm91dCB8fCBvbk91dCxcbiAgICB9XG5cbiAgICBjb25zdCBwcm9jID0gQXJyYXkuaXNBcnJheShjbWQpXG4gICAgICAgID8gQXN0YWwuUHJvY2Vzcy5zdWJwcm9jZXNzdihjbWQpXG4gICAgICAgIDogQXN0YWwuUHJvY2Vzcy5zdWJwcm9jZXNzKGNtZClcblxuICAgIHByb2MuY29ubmVjdChcInN0ZG91dFwiLCAoXywgc3Rkb3V0OiBzdHJpbmcpID0+IG91dChzdGRvdXQpKVxuICAgIHByb2MuY29ubmVjdChcInN0ZGVyclwiLCAoXywgc3RkZXJyOiBzdHJpbmcpID0+IGVycihzdGRlcnIpKVxuICAgIHJldHVybiBwcm9jXG59XG5cbi8qKiBAdGhyb3dzIHtHTGliLkVycm9yfSBUaHJvd3Mgc3RkZXJyICovXG5leHBvcnQgZnVuY3Rpb24gZXhlYyhjbWQ6IHN0cmluZyB8IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY21kKVxuICAgICAgICA/IEFzdGFsLlByb2Nlc3MuZXhlY3YoY21kKVxuICAgICAgICA6IEFzdGFsLlByb2Nlc3MuZXhlYyhjbWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjQXN5bmMoY21kOiBzdHJpbmcgfCBzdHJpbmdbXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY21kKSkge1xuICAgICAgICAgICAgQXN0YWwuUHJvY2Vzcy5leGVjX2FzeW5jdihjbWQsIChfLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEFzdGFsLlByb2Nlc3MuZXhlY19hc3luY3ZfZmluaXNoKHJlcykpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBBc3RhbC5Qcm9jZXNzLmV4ZWNfYXN5bmMoY21kLCAoXywgcmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShBc3RhbC5Qcm9jZXNzLmV4ZWNfZmluaXNoKHJlcykpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufVxuIiwgImltcG9ydCBWYXJpYWJsZSBmcm9tIFwiLi92YXJpYWJsZS5qc1wiXG5pbXBvcnQgeyBleGVjQXN5bmMgfSBmcm9tIFwiLi9wcm9jZXNzLmpzXCJcbmltcG9ydCBCaW5kaW5nLCB7IENvbm5lY3RhYmxlLCBrZWJhYmlmeSwgc25ha2VpZnksIFN1YnNjcmliYWJsZSB9IGZyb20gXCIuL2JpbmRpbmcuanNcIlxuXG5leHBvcnQgY29uc3Qgbm9JbXBsaWNpdERlc3Ryb3kgPSBTeW1ib2woXCJubyBubyBpbXBsaWNpdCBkZXN0cm95XCIpXG5leHBvcnQgY29uc3Qgc2V0Q2hpbGRyZW4gPSBTeW1ib2woXCJjaGlsZHJlbiBzZXR0ZXIgbWV0aG9kXCIpXG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUJpbmRpbmdzKGFycmF5OiBhbnlbXSkge1xuICAgIGZ1bmN0aW9uIGdldFZhbHVlcyguLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBsZXQgaSA9IDBcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCh2YWx1ZSA9PiB2YWx1ZSBpbnN0YW5jZW9mIEJpbmRpbmdcbiAgICAgICAgICAgID8gYXJnc1tpKytdXG4gICAgICAgICAgICA6IHZhbHVlLFxuICAgICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgYmluZGluZ3MgPSBhcnJheS5maWx0ZXIoaSA9PiBpIGluc3RhbmNlb2YgQmluZGluZylcblxuICAgIGlmIChiaW5kaW5ncy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBhcnJheVxuXG4gICAgaWYgKGJpbmRpbmdzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgcmV0dXJuIGJpbmRpbmdzWzBdLmFzKGdldFZhbHVlcylcblxuICAgIHJldHVybiBWYXJpYWJsZS5kZXJpdmUoYmluZGluZ3MsIGdldFZhbHVlcykoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0UHJvcChvYmo6IGFueSwgcHJvcDogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGVyID0gYHNldF8ke3NuYWtlaWZ5KHByb3ApfWBcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbc2V0dGVyXSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgcmV0dXJuIG9ialtzZXR0ZXJdKHZhbHVlKVxuXG4gICAgICAgIHJldHVybiAob2JqW3Byb3BdID0gdmFsdWUpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgY291bGQgbm90IHNldCBwcm9wZXJ0eSBcIiR7cHJvcH1cIiBvbiAke29ian06YCwgZXJyb3IpXG4gICAgfVxufVxuXG5leHBvcnQgdHlwZSBCaW5kYWJsZVByb3BzPFQ+ID0ge1xuICAgIFtLIGluIGtleW9mIFRdOiBCaW5kaW5nPFRbS10+IHwgVFtLXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhvb2s8V2lkZ2V0IGV4dGVuZHMgQ29ubmVjdGFibGU+KFxuICAgIHdpZGdldDogV2lkZ2V0LFxuICAgIG9iamVjdDogQ29ubmVjdGFibGUgfCBTdWJzY3JpYmFibGUsXG4gICAgc2lnbmFsT3JDYWxsYmFjazogc3RyaW5nIHwgKChzZWxmOiBXaWRnZXQsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKSxcbiAgICBjYWxsYmFjaz86IChzZWxmOiBXaWRnZXQsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkLFxuKSB7XG4gICAgaWYgKHR5cGVvZiBvYmplY3QuY29ubmVjdCA9PT0gXCJmdW5jdGlvblwiICYmIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGlkID0gb2JqZWN0LmNvbm5lY3Qoc2lnbmFsT3JDYWxsYmFjaywgKF86IGFueSwgLi4uYXJnczogdW5rbm93bltdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sod2lkZ2V0LCAuLi5hcmdzKVxuICAgICAgICB9KVxuICAgICAgICB3aWRnZXQuY29ubmVjdChcImRlc3Ryb3lcIiwgKCkgPT4ge1xuICAgICAgICAgICAgKG9iamVjdC5kaXNjb25uZWN0IGFzIENvbm5lY3RhYmxlW1wiZGlzY29ubmVjdFwiXSkoaWQpXG4gICAgICAgIH0pXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LnN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBzaWduYWxPckNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgdW5zdWIgPSBvYmplY3Quc3Vic2NyaWJlKCguLi5hcmdzOiB1bmtub3duW10pID0+IHtcbiAgICAgICAgICAgIHNpZ25hbE9yQ2FsbGJhY2sod2lkZ2V0LCAuLi5hcmdzKVxuICAgICAgICB9KVxuICAgICAgICB3aWRnZXQuY29ubmVjdChcImRlc3Ryb3lcIiwgdW5zdWIpXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uc3RydWN0PFdpZGdldCBleHRlbmRzIENvbm5lY3RhYmxlICYgeyBbc2V0Q2hpbGRyZW5dOiAoY2hpbGRyZW46IGFueVtdKSA9PiB2b2lkIH0+KHdpZGdldDogV2lkZ2V0LCBjb25maWc6IGFueSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICBsZXQgeyBzZXR1cCwgY2hpbGQsIGNoaWxkcmVuID0gW10sIC4uLnByb3BzIH0gPSBjb25maWdcblxuICAgIGlmIChjaGlsZHJlbiBpbnN0YW5jZW9mIEJpbmRpbmcpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dXG4gICAgfVxuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIGNoaWxkcmVuLnVuc2hpZnQoY2hpbGQpXG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIHVuZGVmaW5lZCB2YWx1ZXNcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wcykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1trZXldXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb2xsZWN0IGJpbmRpbmdzXG4gICAgY29uc3QgYmluZGluZ3M6IEFycmF5PFtzdHJpbmcsIEJpbmRpbmc8YW55Pl0+ID0gT2JqZWN0XG4gICAgICAgIC5rZXlzKHByb3BzKVxuICAgICAgICAucmVkdWNlKChhY2M6IGFueSwgcHJvcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3BzW3Byb3BdIGluc3RhbmNlb2YgQmluZGluZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmcgPSBwcm9wc1twcm9wXVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1twcm9wXVxuICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCBbcHJvcCwgYmluZGluZ11dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIFtdKVxuXG4gICAgLy8gY29sbGVjdCBzaWduYWwgaGFuZGxlcnNcbiAgICBjb25zdCBvbkhhbmRsZXJzOiBBcnJheTxbc3RyaW5nLCBzdHJpbmcgfCAoKCkgPT4gdW5rbm93bildPiA9IE9iamVjdFxuICAgICAgICAua2V5cyhwcm9wcylcbiAgICAgICAgLnJlZHVjZSgoYWNjOiBhbnksIGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKFwib25cIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWcgPSBrZWJhYmlmeShrZXkpLnNwbGl0KFwiLVwiKS5zbGljZSgxKS5qb2luKFwiLVwiKVxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBwcm9wc1trZXldXG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BzW2tleV1cbiAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgW3NpZywgaGFuZGxlcl1dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIFtdKVxuXG4gICAgLy8gc2V0IGNoaWxkcmVuXG4gICAgY29uc3QgbWVyZ2VkQ2hpbGRyZW4gPSBtZXJnZUJpbmRpbmdzKGNoaWxkcmVuLmZsYXQoSW5maW5pdHkpKVxuICAgIGlmIChtZXJnZWRDaGlsZHJlbiBpbnN0YW5jZW9mIEJpbmRpbmcpIHtcbiAgICAgICAgd2lkZ2V0W3NldENoaWxkcmVuXShtZXJnZWRDaGlsZHJlbi5nZXQoKSlcbiAgICAgICAgd2lkZ2V0LmNvbm5lY3QoXCJkZXN0cm95XCIsIG1lcmdlZENoaWxkcmVuLnN1YnNjcmliZSgodikgPT4ge1xuICAgICAgICAgICAgd2lkZ2V0W3NldENoaWxkcmVuXSh2KVxuICAgICAgICB9KSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobWVyZ2VkQ2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgd2lkZ2V0W3NldENoaWxkcmVuXShtZXJnZWRDaGlsZHJlbilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNldHVwIHNpZ25hbCBoYW5kbGVyc1xuICAgIGZvciAoY29uc3QgW3NpZ25hbCwgY2FsbGJhY2tdIG9mIG9uSGFuZGxlcnMpIHtcbiAgICAgICAgY29uc3Qgc2lnID0gc2lnbmFsLnN0YXJ0c1dpdGgoXCJub3RpZnlcIilcbiAgICAgICAgICAgID8gc2lnbmFsLnJlcGxhY2UoXCItXCIsIFwiOjpcIilcbiAgICAgICAgICAgIDogc2lnbmFsXG5cbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB3aWRnZXQuY29ubmVjdChzaWcsIGNhbGxiYWNrKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2lkZ2V0LmNvbm5lY3Qoc2lnLCAoKSA9PiBleGVjQXN5bmMoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgLnRoZW4ocHJpbnQpLmNhdGNoKGNvbnNvbGUuZXJyb3IpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2V0dXAgYmluZGluZ3MgaGFuZGxlcnNcbiAgICBmb3IgKGNvbnN0IFtwcm9wLCBiaW5kaW5nXSBvZiBiaW5kaW5ncykge1xuICAgICAgICBpZiAocHJvcCA9PT0gXCJjaGlsZFwiIHx8IHByb3AgPT09IFwiY2hpbGRyZW5cIikge1xuICAgICAgICAgICAgd2lkZ2V0LmNvbm5lY3QoXCJkZXN0cm95XCIsIGJpbmRpbmcuc3Vic2NyaWJlKCh2OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB3aWRnZXRbc2V0Q2hpbGRyZW5dKHYpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfVxuICAgICAgICB3aWRnZXQuY29ubmVjdChcImRlc3Ryb3lcIiwgYmluZGluZy5zdWJzY3JpYmUoKHY6IGFueSkgPT4ge1xuICAgICAgICAgICAgc2V0UHJvcCh3aWRnZXQsIHByb3AsIHYpXG4gICAgICAgIH0pKVxuICAgICAgICBzZXRQcm9wKHdpZGdldCwgcHJvcCwgYmluZGluZy5nZXQoKSlcbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgdW5kZWZpbmVkIHZhbHVlc1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BzKSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVsZXRlIHByb3BzW2tleV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24od2lkZ2V0LCBwcm9wcylcbiAgICBzZXR1cD8uKHdpZGdldClcbiAgICByZXR1cm4gd2lkZ2V0XG59XG5cbmZ1bmN0aW9uIGlzQXJyb3dGdW5jdGlvbihmdW5jOiBhbnkpOiBmdW5jIGlzIChhcmdzOiBhbnkpID0+IGFueSB7XG4gICAgcmV0dXJuICFPYmplY3QuaGFzT3duKGZ1bmMsIFwicHJvdG90eXBlXCIpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBqc3goXG4gICAgY3RvcnM6IFJlY29yZDxzdHJpbmcsIHsgbmV3KHByb3BzOiBhbnkpOiBhbnkgfSB8ICgocHJvcHM6IGFueSkgPT4gYW55KT4sXG4gICAgY3Rvcjogc3RyaW5nIHwgKChwcm9wczogYW55KSA9PiBhbnkpIHwgeyBuZXcocHJvcHM6IGFueSk6IGFueSB9LFxuICAgIHsgY2hpbGRyZW4sIC4uLnByb3BzIH06IGFueSxcbikge1xuICAgIGNoaWxkcmVuID8/PSBbXVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNoaWxkcmVuKSlcbiAgICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dXG5cbiAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmZpbHRlcihCb29sZWFuKVxuXG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgcHJvcHMuY2hpbGQgPSBjaGlsZHJlblswXVxuICAgIGVsc2UgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpXG4gICAgICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW5cblxuICAgIGlmICh0eXBlb2YgY3RvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoaXNBcnJvd0Z1bmN0aW9uKGN0b3JzW2N0b3JdKSlcbiAgICAgICAgICAgIHJldHVybiBjdG9yc1tjdG9yXShwcm9wcylcblxuICAgICAgICByZXR1cm4gbmV3IGN0b3JzW2N0b3JdKHByb3BzKVxuICAgIH1cblxuICAgIGlmIChpc0Fycm93RnVuY3Rpb24oY3RvcikpXG4gICAgICAgIHJldHVybiBjdG9yKHByb3BzKVxuXG4gICAgcmV0dXJuIG5ldyBjdG9yKHByb3BzKVxufVxuIiwgImltcG9ydCB7IG5vSW1wbGljaXREZXN0cm95LCBzZXRDaGlsZHJlbiwgdHlwZSBCaW5kYWJsZVByb3BzLCBjb25zdHJ1Y3QgfSBmcm9tIFwiLi4vX2FzdGFsLmpzXCJcbmltcG9ydCBHdGsgZnJvbSBcImdpOi8vR3RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBHZGsgZnJvbSBcImdpOi8vR2RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBCaW5kaW5nIGZyb20gXCIuLi9iaW5kaW5nLmpzXCJcblxuZXhwb3J0IGNvbnN0IHR5cGUgPSBTeW1ib2woXCJjaGlsZCB0eXBlXCIpXG5jb25zdCBkdW1teUJ1bGRlciA9IG5ldyBHdGsuQnVpbGRlclxuXG5mdW5jdGlvbiBfZ2V0Q2hpbGRyZW4od2lkZ2V0OiBHdGsuV2lkZ2V0KTogQXJyYXk8R3RrLldpZGdldD4ge1xuICAgIGlmIChcImdldF9jaGlsZFwiIGluIHdpZGdldCAmJiB0eXBlb2Ygd2lkZ2V0LmdldF9jaGlsZCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpZGdldC5nZXRfY2hpbGQoKSA/IFt3aWRnZXQuZ2V0X2NoaWxkKCldIDogW11cbiAgICB9XG5cbiAgICBjb25zdCBjaGlsZHJlbjogQXJyYXk8R3RrLldpZGdldD4gPSBbXVxuICAgIGxldCBjaCA9IHdpZGdldC5nZXRfZmlyc3RfY2hpbGQoKVxuICAgIHdoaWxlIChjaCAhPT0gbnVsbCkge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKGNoKVxuICAgICAgICBjaCA9IGNoLmdldF9uZXh0X3NpYmxpbmcoKVxuICAgIH1cbiAgICByZXR1cm4gY2hpbGRyZW5cbn1cblxuZnVuY3Rpb24gX3NldENoaWxkcmVuKHdpZGdldDogR3RrLldpZGdldCwgY2hpbGRyZW46IGFueVtdKSB7XG4gICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5mbGF0KEluZmluaXR5KS5tYXAoY2ggPT4gY2ggaW5zdGFuY2VvZiBHdGsuV2lkZ2V0XG4gICAgICAgID8gY2hcbiAgICAgICAgOiBuZXcgR3RrLkxhYmVsKHsgdmlzaWJsZTogdHJ1ZSwgbGFiZWw6IFN0cmluZyhjaCkgfSkpXG5cblxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgd2lkZ2V0LnZmdW5jX2FkZF9jaGlsZChcbiAgICAgICAgICAgIGR1bW15QnVsZGVyLFxuICAgICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgICB0eXBlIGluIGNoaWxkID8gY2hpbGRbdHlwZV0gOiBudWxsLFxuICAgICAgICApXG4gICAgfVxufVxuXG50eXBlIENvbmZpZzxUIGV4dGVuZHMgR3RrLldpZGdldD4gPSB7XG4gICAgc2V0Q2hpbGRyZW4od2lkZ2V0OiBULCBjaGlsZHJlbjogYW55W10pOiB2b2lkXG4gICAgZ2V0Q2hpbGRyZW4od2lkZ2V0OiBUKTogQXJyYXk8R3RrLldpZGdldD5cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXN0YWxpZnk8XG4gICAgV2lkZ2V0IGV4dGVuZHMgR3RrLldpZGdldCxcbiAgICBQcm9wcyBleHRlbmRzIEd0ay5XaWRnZXQuQ29uc3RydWN0b3JQcm9wcyA9IEd0ay5XaWRnZXQuQ29uc3RydWN0b3JQcm9wcyxcbiAgICBTaWduYWxzIGV4dGVuZHMgUmVjb3JkPGBvbiR7c3RyaW5nfWAsIEFycmF5PHVua25vd24+PiA9IFJlY29yZDxgb24ke3N0cmluZ31gLCBhbnlbXT4sXG4+KGNsczogeyBuZXcoLi4uYXJnczogYW55W10pOiBXaWRnZXQgfSwgY29uZmlnOiBQYXJ0aWFsPENvbmZpZzxXaWRnZXQ+PiA9IHt9KSB7XG4gICAgT2JqZWN0LmFzc2lnbihjbHMucHJvdG90eXBlLCB7XG4gICAgICAgIFtzZXRDaGlsZHJlbl0oY2hpbGRyZW46IGFueVtdKSB7XG4gICAgICAgICAgICBjb25zdCB3ID0gdGhpcyBhcyB1bmtub3duIGFzIFdpZGdldFxuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiAoY29uZmlnLmdldENoaWxkcmVuPy4odykgfHwgX2dldENoaWxkcmVuKHcpKSkge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIEd0ay5XaWRnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQudW5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkcmVuLmluY2x1ZGVzKGNoaWxkKSAmJiBub0ltcGxpY2l0RGVzdHJveSBpbiB0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQucnVuX2Rpc3Bvc2UoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5zZXRDaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5zZXRDaGlsZHJlbih3LCBjaGlsZHJlbilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3NldENoaWxkcmVuKHcsIGNoaWxkcmVuKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBbY2xzLm5hbWVdOiAoXG4gICAgICAgICAgICBwcm9wczogQ29uc3RydWN0UHJvcHM8V2lkZ2V0LCBQcm9wcywgU2lnbmFscz4gPSB7fSxcbiAgICAgICAgICAgIC4uLmNoaWxkcmVuOiBhbnlbXVxuICAgICAgICApOiBXaWRnZXQgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2lkZ2V0ID0gbmV3IGNscyhcImNzc05hbWVcIiBpbiBwcm9wcyA/IHsgY3NzTmFtZTogcHJvcHMuY3NzTmFtZSB9IDoge30pXG5cbiAgICAgICAgICAgIGlmIChcImNzc05hbWVcIiBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wcy5jc3NOYW1lXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9wcy5ub0ltcGxpY2l0RGVzdHJveSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24od2lkZ2V0LCB7IFtub0ltcGxpY2l0RGVzdHJveV06IHRydWUgfSlcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHMubm9JbXBsaWNpdERlc3Ryb3lcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByb3BzLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHdpZGdldCwgeyBbdHlwZV06IHByb3BzLnR5cGUgfSlcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHMudHlwZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJvcHMsIHsgY2hpbGRyZW4gfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdCh3aWRnZXQgYXMgYW55LCBzZXR1cENvbnRyb2xsZXJzKHdpZGdldCwgcHJvcHMgYXMgYW55KSlcbiAgICAgICAgfSxcbiAgICB9W2Nscy5uYW1lXVxufVxuXG50eXBlIFNpZ0hhbmRsZXI8XG4gICAgVyBleHRlbmRzIEluc3RhbmNlVHlwZTx0eXBlb2YgR3RrLldpZGdldD4sXG4gICAgQXJncyBleHRlbmRzIEFycmF5PHVua25vd24+LFxuPiA9ICgoc2VsZjogVywgLi4uYXJnczogQXJncykgPT4gdW5rbm93bikgfCBzdHJpbmcgfCBzdHJpbmdbXVxuXG5leHBvcnQgeyBCaW5kYWJsZVByb3BzIH1cbmV4cG9ydCB0eXBlIEJpbmRhYmxlQ2hpbGQgPSBHdGsuV2lkZ2V0IHwgQmluZGluZzxHdGsuV2lkZ2V0PlxuXG5leHBvcnQgdHlwZSBDb25zdHJ1Y3RQcm9wczxcbiAgICBTZWxmIGV4dGVuZHMgSW5zdGFuY2VUeXBlPHR5cGVvZiBHdGsuV2lkZ2V0PixcbiAgICBQcm9wcyBleHRlbmRzIEd0ay5XaWRnZXQuQ29uc3RydWN0b3JQcm9wcyxcbiAgICBTaWduYWxzIGV4dGVuZHMgUmVjb3JkPGBvbiR7c3RyaW5nfWAsIEFycmF5PHVua25vd24+PiA9IFJlY29yZDxgb24ke3N0cmluZ31gLCBhbnlbXT4sXG4+ID0gUGFydGlhbDx7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBjYW4ndCBhc3NpZ24gdG8gdW5rbm93biwgYnV0IGl0IHdvcmtzIGFzIGV4cGVjdGVkIHRob3VnaFxuICAgIFtTIGluIGtleW9mIFNpZ25hbHNdOiBTaWdIYW5kbGVyPFNlbGYsIFNpZ25hbHNbU10+XG59PiAmIFBhcnRpYWw8e1xuICAgIFtLZXkgaW4gYG9uJHtzdHJpbmd9YF06IFNpZ0hhbmRsZXI8U2VsZiwgYW55W10+XG59PiAmIFBhcnRpYWw8QmluZGFibGVQcm9wczxPbWl0PFByb3BzLCBcImNzc05hbWVcIiB8IFwiY3NzX25hbWVcIj4+PiAmIHtcbiAgICBub0ltcGxpY2l0RGVzdHJveT86IHRydWVcbiAgICB0eXBlPzogc3RyaW5nXG4gICAgY3NzTmFtZT86IHN0cmluZ1xufSAmIEV2ZW50Q29udHJvbGxlcjxTZWxmPiAmIHtcbiAgICBvbkRlc3Ryb3k/OiAoc2VsZjogU2VsZikgPT4gdW5rbm93blxuICAgIHNldHVwPzogKHNlbGY6IFNlbGYpID0+IHZvaWRcbn1cblxudHlwZSBFdmVudENvbnRyb2xsZXI8U2VsZiBleHRlbmRzIEd0ay5XaWRnZXQ+ID0ge1xuICAgIG9uRm9jdXNFbnRlcj86IChzZWxmOiBTZWxmKSA9PiB2b2lkXG4gICAgb25Gb2N1c0xlYXZlPzogKHNlbGY6IFNlbGYpID0+IHZvaWRcblxuICAgIG9uS2V5UHJlc3NlZD86IChzZWxmOiBTZWxmLCBrZXl2YWw6IG51bWJlciwga2V5Y29kZTogbnVtYmVyLCBzdGF0ZTogR2RrLk1vZGlmaWVyVHlwZSkgPT4gdm9pZFxuICAgIG9uS2V5UmVsZWFzZWQ/OiAoc2VsZjogU2VsZiwga2V5dmFsOiBudW1iZXIsIGtleWNvZGU6IG51bWJlciwgc3RhdGU6IEdkay5Nb2RpZmllclR5cGUpID0+IHZvaWRcbiAgICBvbktleU1vZGlmaWVyPzogKHNlbGY6IFNlbGYsIHN0YXRlOiBHZGsuTW9kaWZpZXJUeXBlKSA9PiB2b2lkXG5cbiAgICBvbkxlZ2FjeT86IChzZWxmOiBTZWxmLCBldmVudDogR2RrLkV2ZW50KSA9PiB2b2lkXG4gICAgb25CdXR0b25QcmVzc2VkPzogKHNlbGY6IFNlbGYsIHN0YXRlOiBHZGsuQnV0dG9uRXZlbnQpID0+IHZvaWRcbiAgICBvbkJ1dHRvblJlbGVhc2VkPzogKHNlbGY6IFNlbGYsIHN0YXRlOiBHZGsuQnV0dG9uRXZlbnQpID0+IHZvaWRcblxuICAgIG9uSG92ZXJFbnRlcj86IChzZWxmOiBTZWxmLCB4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gdm9pZFxuICAgIG9uSG92ZXJMZWF2ZT86IChzZWxmOiBTZWxmKSA9PiB2b2lkXG4gICAgb25Nb3Rpb24/OiAoc2VsZjogU2VsZiwgeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHZvaWRcblxuICAgIG9uU2Nyb2xsPzogKHNlbGY6IFNlbGYsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpID0+IHZvaWRcbiAgICBvblNjcm9sbERlY2VsZXJhdGU/OiAoc2VsZjogU2VsZiwgdmVsX3g6IG51bWJlciwgdmVsX3k6IG51bWJlcikgPT4gdm9pZFxufVxuXG5mdW5jdGlvbiBzZXR1cENvbnRyb2xsZXJzPFQ+KHdpZGdldDogR3RrLldpZGdldCwge1xuICAgIG9uRm9jdXNFbnRlcixcbiAgICBvbkZvY3VzTGVhdmUsXG4gICAgb25LZXlQcmVzc2VkLFxuICAgIG9uS2V5UmVsZWFzZWQsXG4gICAgb25LZXlNb2RpZmllcixcbiAgICBvbkxlZ2FjeSxcbiAgICBvbkJ1dHRvblByZXNzZWQsXG4gICAgb25CdXR0b25SZWxlYXNlZCxcbiAgICBvbkhvdmVyRW50ZXIsXG4gICAgb25Ib3ZlckxlYXZlLFxuICAgIG9uTW90aW9uLFxuICAgIG9uU2Nyb2xsLFxuICAgIG9uU2Nyb2xsRGVjZWxlcmF0ZSxcbiAgICAuLi5wcm9wc1xufTogRXZlbnRDb250cm9sbGVyPEd0ay5XaWRnZXQ+ICYgVCkge1xuICAgIGlmIChvbkZvY3VzRW50ZXIgfHwgb25Gb2N1c0xlYXZlKSB7XG4gICAgICAgIGNvbnN0IGZvY3VzID0gbmV3IEd0ay5FdmVudENvbnRyb2xsZXJGb2N1c1xuICAgICAgICB3aWRnZXQuYWRkX2NvbnRyb2xsZXIoZm9jdXMpXG5cbiAgICAgICAgaWYgKG9uRm9jdXNFbnRlcilcbiAgICAgICAgICAgIGZvY3VzLmNvbm5lY3QoXCJlbnRlclwiLCAoKSA9PiBvbkZvY3VzRW50ZXIod2lkZ2V0KSlcblxuICAgICAgICBpZiAob25Gb2N1c0xlYXZlKVxuICAgICAgICAgICAgZm9jdXMuY29ubmVjdChcImxlYXZlXCIsICgpID0+IG9uRm9jdXNMZWF2ZSh3aWRnZXQpKVxuICAgIH1cblxuICAgIGlmIChvbktleVByZXNzZWQgfHwgb25LZXlSZWxlYXNlZCB8fCBvbktleU1vZGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5ldyBHdGsuRXZlbnRDb250cm9sbGVyS2V5XG4gICAgICAgIHdpZGdldC5hZGRfY29udHJvbGxlcihrZXkpXG5cbiAgICAgICAgaWYgKG9uS2V5UHJlc3NlZClcbiAgICAgICAgICAgIGtleS5jb25uZWN0KFwia2V5LXByZXNzZWRcIiwgKF8sIHZhbCwgY29kZSwgc3RhdGUpID0+IG9uS2V5UHJlc3NlZCh3aWRnZXQsIHZhbCwgY29kZSwgc3RhdGUpKVxuXG4gICAgICAgIGlmIChvbktleVJlbGVhc2VkKVxuICAgICAgICAgICAga2V5LmNvbm5lY3QoXCJrZXktcmVsZWFzZWRcIiwgKF8sIHZhbCwgY29kZSwgc3RhdGUpID0+IG9uS2V5UmVsZWFzZWQod2lkZ2V0LCB2YWwsIGNvZGUsIHN0YXRlKSlcblxuICAgICAgICBpZiAob25LZXlNb2RpZmllcilcbiAgICAgICAgICAgIGtleS5jb25uZWN0KFwibW9kaWZpZXJzXCIsIChfLCBzdGF0ZSkgPT4gb25LZXlNb2RpZmllcih3aWRnZXQsIHN0YXRlKSlcbiAgICB9XG5cbiAgICBpZiAob25MZWdhY3kgfHwgb25CdXR0b25QcmVzc2VkIHx8IG9uQnV0dG9uUmVsZWFzZWQpIHtcbiAgICAgICAgY29uc3QgbGVnYWN5ID0gbmV3IEd0ay5FdmVudENvbnRyb2xsZXJMZWdhY3lcbiAgICAgICAgd2lkZ2V0LmFkZF9jb250cm9sbGVyKGxlZ2FjeSlcblxuICAgICAgICBsZWdhY3kuY29ubmVjdChcImV2ZW50XCIsIChfLCBldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmdldF9ldmVudF90eXBlKCkgPT09IEdkay5FdmVudFR5cGUuQlVUVE9OX1BSRVNTKSB7XG4gICAgICAgICAgICAgICAgb25CdXR0b25QcmVzc2VkPy4od2lkZ2V0LCBldmVudCBhcyBHZGsuQnV0dG9uRXZlbnQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChldmVudC5nZXRfZXZlbnRfdHlwZSgpID09PSBHZGsuRXZlbnRUeXBlLkJVVFRPTl9SRUxFQVNFKSB7XG4gICAgICAgICAgICAgICAgb25CdXR0b25SZWxlYXNlZD8uKHdpZGdldCwgZXZlbnQgYXMgR2RrLkJ1dHRvbkV2ZW50KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvbkxlZ2FjeT8uKHdpZGdldCwgZXZlbnQpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKG9uTW90aW9uIHx8IG9uSG92ZXJFbnRlciB8fCBvbkhvdmVyTGVhdmUpIHtcbiAgICAgICAgY29uc3QgaG92ZXIgPSBuZXcgR3RrLkV2ZW50Q29udHJvbGxlck1vdGlvblxuICAgICAgICB3aWRnZXQuYWRkX2NvbnRyb2xsZXIoaG92ZXIpXG5cbiAgICAgICAgaWYgKG9uSG92ZXJFbnRlcilcbiAgICAgICAgICAgIGhvdmVyLmNvbm5lY3QoXCJlbnRlclwiLCAoXywgeCwgeSkgPT4gb25Ib3ZlckVudGVyKHdpZGdldCwgeCwgeSkpXG5cbiAgICAgICAgaWYgKG9uSG92ZXJMZWF2ZSlcbiAgICAgICAgICAgIGhvdmVyLmNvbm5lY3QoXCJsZWF2ZVwiLCAoKSA9PiBvbkhvdmVyTGVhdmUod2lkZ2V0KSlcblxuICAgICAgICBpZiAob25Nb3Rpb24pXG4gICAgICAgICAgICBob3Zlci5jb25uZWN0KFwibW90aW9uXCIsIChfLCB4LCB5KSA9PiBvbk1vdGlvbih3aWRnZXQsIHgsIHkpKVxuICAgIH1cblxuICAgIGlmIChvblNjcm9sbCB8fCBvblNjcm9sbERlY2VsZXJhdGUpIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsID0gbmV3IEd0ay5FdmVudENvbnRyb2xsZXJTY3JvbGxcbiAgICAgICAgc2Nyb2xsLmZsYWdzID0gR3RrLkV2ZW50Q29udHJvbGxlclNjcm9sbEZsYWdzLkJPVEhfQVhFUyB8IEd0ay5FdmVudENvbnRyb2xsZXJTY3JvbGxGbGFncy5LSU5FVElDXG4gICAgICAgIHdpZGdldC5hZGRfY29udHJvbGxlcihzY3JvbGwpXG5cbiAgICAgICAgaWYgKG9uU2Nyb2xsKVxuICAgICAgICAgICAgc2Nyb2xsLmNvbm5lY3QoXCJzY3JvbGxcIiwgKF8sIHgsIHkpID0+IG9uU2Nyb2xsKHdpZGdldCwgeCwgeSkpXG5cbiAgICAgICAgaWYgKG9uU2Nyb2xsRGVjZWxlcmF0ZSlcbiAgICAgICAgICAgIHNjcm9sbC5jb25uZWN0KFwiZGVjZWxlcmF0ZVwiLCAoXywgeCwgeSkgPT4gb25TY3JvbGxEZWNlbGVyYXRlKHdpZGdldCwgeCwgeSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BzXG59XG4iLCAiaW1wb3J0IEdMaWIgZnJvbSBcImdpOi8vR0xpYj92ZXJzaW9uPTIuMFwiXG5pbXBvcnQgR3RrIGZyb20gXCJnaTovL0d0az92ZXJzaW9uPTQuMFwiXG5pbXBvcnQgQXN0YWwgZnJvbSBcImdpOi8vQXN0YWw/dmVyc2lvbj00LjBcIlxuaW1wb3J0IHsgbWtBcHAgfSBmcm9tIFwiLi4vX2FwcFwiXG5cbkd0ay5pbml0KClcblxuLy8gc3RvcCB0aGlzIGZyb20gbGVha2luZyBpbnRvIHN1YnByb2Nlc3Nlc1xuLy8gYW5kIGdpbyBsYXVuY2ggaW52b2NhdGlvbnNcbkdMaWIudW5zZXRlbnYoXCJMRF9QUkVMT0FEXCIpXG5cbi8vIHVzZXJzIG1pZ2h0IHdhbnQgdG8gdXNlIEFkd2FpdGEgaW4gd2hpY2ggY2FzZSBpdCBoYXMgdG8gYmUgaW5pdGlhbGl6ZWRcbi8vIGl0IG1pZ2h0IGJlIGNvbW1vbiBwaXRmYWxsIHRvIGZvcmdldCBpdCBiZWNhdXNlIGBBcHBgIGlzIG5vdCBgQWR3LkFwcGxpY2F0aW9uYFxuYXdhaXQgaW1wb3J0KFwiZ2k6Ly9BZHc/dmVyc2lvbj0xXCIpXG4gICAgLnRoZW4oKHsgZGVmYXVsdDogQWR3IH0pID0+IEFkdy5pbml0KCkpXG4gICAgLmNhdGNoKCgpID0+IHZvaWQgMClcblxuZXhwb3J0IGRlZmF1bHQgbWtBcHAoQXN0YWwuQXBwbGljYXRpb24pXG4iLCAiLyoqXG4gKiBXb3JrYXJvdW5kIGZvciBcIkNhbid0IGNvbnZlcnQgbm9uLW51bGwgcG9pbnRlciB0byBKUyB2YWx1ZSBcIlxuICovXG5cbmV4cG9ydCB7IH1cblxuY29uc3Qgc25ha2VpZnkgPSAoc3RyOiBzdHJpbmcpID0+IHN0clxuICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxXyQyXCIpXG4gICAgLnJlcGxhY2VBbGwoXCItXCIsIFwiX1wiKVxuICAgIC50b0xvd2VyQ2FzZSgpXG5cbmFzeW5jIGZ1bmN0aW9uIHN1cHByZXNzPFQ+KG1vZDogUHJvbWlzZTx7IGRlZmF1bHQ6IFQgfT4sIHBhdGNoOiAobTogVCkgPT4gdm9pZCkge1xuICAgIHJldHVybiBtb2QudGhlbihtID0+IHBhdGNoKG0uZGVmYXVsdCkpLmNhdGNoKCgpID0+IHZvaWQgMClcbn1cblxuZnVuY3Rpb24gcGF0Y2g8UCBleHRlbmRzIG9iamVjdD4ocHJvdG86IFAsIHByb3A6IEV4dHJhY3Q8a2V5b2YgUCwgc3RyaW5nPikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgcHJvcCwge1xuICAgICAgICBnZXQoKSB7IHJldHVybiB0aGlzW2BnZXRfJHtzbmFrZWlmeShwcm9wKX1gXSgpIH0sXG4gICAgfSlcbn1cblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbEFwcHNcIiksICh7IEFwcHMsIEFwcGxpY2F0aW9uIH0pID0+IHtcbiAgICBwYXRjaChBcHBzLnByb3RvdHlwZSwgXCJsaXN0XCIpXG4gICAgcGF0Y2goQXBwbGljYXRpb24ucHJvdG90eXBlLCBcImtleXdvcmRzXCIpXG4gICAgcGF0Y2goQXBwbGljYXRpb24ucHJvdG90eXBlLCBcImNhdGVnb3JpZXNcIilcbn0pXG5cbmF3YWl0IHN1cHByZXNzKGltcG9ydChcImdpOi8vQXN0YWxCYXR0ZXJ5XCIpLCAoeyBVUG93ZXIgfSkgPT4ge1xuICAgIHBhdGNoKFVQb3dlci5wcm90b3R5cGUsIFwiZGV2aWNlc1wiKVxufSlcblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbEJsdWV0b290aFwiKSwgKHsgQWRhcHRlciwgQmx1ZXRvb3RoLCBEZXZpY2UgfSkgPT4ge1xuICAgIHBhdGNoKEFkYXB0ZXIucHJvdG90eXBlLCBcInV1aWRzXCIpXG4gICAgcGF0Y2goQmx1ZXRvb3RoLnByb3RvdHlwZSwgXCJhZGFwdGVyc1wiKVxuICAgIHBhdGNoKEJsdWV0b290aC5wcm90b3R5cGUsIFwiZGV2aWNlc1wiKVxuICAgIHBhdGNoKERldmljZS5wcm90b3R5cGUsIFwidXVpZHNcIilcbn0pXG5cbmF3YWl0IHN1cHByZXNzKGltcG9ydChcImdpOi8vQXN0YWxIeXBybGFuZFwiKSwgKHsgSHlwcmxhbmQsIE1vbml0b3IsIFdvcmtzcGFjZSB9KSA9PiB7XG4gICAgcGF0Y2goSHlwcmxhbmQucHJvdG90eXBlLCBcImJpbmRzXCIpXG4gICAgcGF0Y2goSHlwcmxhbmQucHJvdG90eXBlLCBcIm1vbml0b3JzXCIpXG4gICAgcGF0Y2goSHlwcmxhbmQucHJvdG90eXBlLCBcIndvcmtzcGFjZXNcIilcbiAgICBwYXRjaChIeXBybGFuZC5wcm90b3R5cGUsIFwiY2xpZW50c1wiKVxuICAgIHBhdGNoKE1vbml0b3IucHJvdG90eXBlLCBcImF2YWlsYWJsZU1vZGVzXCIpXG4gICAgcGF0Y2goTW9uaXRvci5wcm90b3R5cGUsIFwiYXZhaWxhYmxlX21vZGVzXCIpXG4gICAgcGF0Y2goV29ya3NwYWNlLnByb3RvdHlwZSwgXCJjbGllbnRzXCIpXG59KVxuXG5hd2FpdCBzdXBwcmVzcyhpbXBvcnQoXCJnaTovL0FzdGFsTXByaXNcIiksICh7IE1wcmlzLCBQbGF5ZXIgfSkgPT4ge1xuICAgIHBhdGNoKE1wcmlzLnByb3RvdHlwZSwgXCJwbGF5ZXJzXCIpXG4gICAgcGF0Y2goUGxheWVyLnByb3RvdHlwZSwgXCJzdXBwb3J0ZWRfdXJpX3NjaGVtZXNcIilcbiAgICBwYXRjaChQbGF5ZXIucHJvdG90eXBlLCBcInN1cHBvcnRlZFVyaVNjaGVtZXNcIilcbiAgICBwYXRjaChQbGF5ZXIucHJvdG90eXBlLCBcInN1cHBvcnRlZF9taW1lX3R5cGVzXCIpXG4gICAgcGF0Y2goUGxheWVyLnByb3RvdHlwZSwgXCJzdXBwb3J0ZWRNaW1lVHlwZXNcIilcbiAgICBwYXRjaChQbGF5ZXIucHJvdG90eXBlLCBcImNvbW1lbnRzXCIpXG59KVxuXG5hd2FpdCBzdXBwcmVzcyhpbXBvcnQoXCJnaTovL0FzdGFsTmV0d29ya1wiKSwgKHsgV2lmaSB9KSA9PiB7XG4gICAgcGF0Y2goV2lmaS5wcm90b3R5cGUsIFwiYWNjZXNzX3BvaW50c1wiKVxuICAgIHBhdGNoKFdpZmkucHJvdG90eXBlLCBcImFjY2Vzc1BvaW50c1wiKVxufSlcblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbE5vdGlmZFwiKSwgKHsgTm90aWZkLCBOb3RpZmljYXRpb24gfSkgPT4ge1xuICAgIHBhdGNoKE5vdGlmZC5wcm90b3R5cGUsIFwibm90aWZpY2F0aW9uc1wiKVxuICAgIHBhdGNoKE5vdGlmaWNhdGlvbi5wcm90b3R5cGUsIFwiYWN0aW9uc1wiKVxufSlcblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbFBvd2VyUHJvZmlsZXNcIiksICh7IFBvd2VyUHJvZmlsZXMgfSkgPT4ge1xuICAgIHBhdGNoKFBvd2VyUHJvZmlsZXMucHJvdG90eXBlLCBcImFjdGlvbnNcIilcbn0pXG5cbmF3YWl0IHN1cHByZXNzKGltcG9ydChcImdpOi8vQXN0YWxXcFwiKSwgKHsgV3AsIEF1ZGlvLCBWaWRlbyB9KSA9PiB7XG4gICAgcGF0Y2goV3AucHJvdG90eXBlLCBcImVuZHBvaW50c1wiKVxuICAgIHBhdGNoKFdwLnByb3RvdHlwZSwgXCJkZXZpY2VzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcInN0cmVhbXNcIilcbiAgICBwYXRjaChBdWRpby5wcm90b3R5cGUsIFwicmVjb3JkZXJzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcIm1pY3JvcGhvbmVzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcInNwZWFrZXJzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcImRldmljZXNcIilcbiAgICBwYXRjaChWaWRlby5wcm90b3R5cGUsIFwic3RyZWFtc1wiKVxuICAgIHBhdGNoKFZpZGVvLnByb3RvdHlwZSwgXCJyZWNvcmRlcnNcIilcbiAgICBwYXRjaChWaWRlby5wcm90b3R5cGUsIFwic2lua3NcIilcbiAgICBwYXRjaChWaWRlby5wcm90b3R5cGUsIFwic291cmNlc1wiKVxuICAgIHBhdGNoKFZpZGVvLnByb3RvdHlwZSwgXCJkZXZpY2VzXCIpXG59KVxuIiwgImltcG9ydCBcIi4vb3ZlcnJpZGVzLmpzXCJcbmltcG9ydCB7IHNldENvbnNvbGVMb2dEb21haW4gfSBmcm9tIFwiY29uc29sZVwiXG5pbXBvcnQgeyBleGl0LCBwcm9ncmFtQXJncyB9IGZyb20gXCJzeXN0ZW1cIlxuaW1wb3J0IElPIGZyb20gXCJnaTovL0FzdGFsSU9cIlxuaW1wb3J0IEdPYmplY3QgZnJvbSBcImdpOi8vR09iamVjdFwiXG5pbXBvcnQgR2lvIGZyb20gXCJnaTovL0dpbz92ZXJzaW9uPTIuMFwiXG5pbXBvcnQgdHlwZSBBc3RhbDMgZnJvbSBcImdpOi8vQXN0YWw/dmVyc2lvbj0zLjBcIlxuaW1wb3J0IHR5cGUgQXN0YWw0IGZyb20gXCJnaTovL0FzdGFsP3ZlcnNpb249NC4wXCJcblxudHlwZSBDb25maWcgPSBQYXJ0aWFsPHtcbiAgICBpbnN0YW5jZU5hbWU6IHN0cmluZ1xuICAgIGNzczogc3RyaW5nXG4gICAgaWNvbnM6IHN0cmluZ1xuICAgIGd0a1RoZW1lOiBzdHJpbmdcbiAgICBpY29uVGhlbWU6IHN0cmluZ1xuICAgIGN1cnNvclRoZW1lOiBzdHJpbmdcbiAgICBob2xkOiBib29sZWFuXG4gICAgcmVxdWVzdEhhbmRsZXIocmVxdWVzdDogc3RyaW5nLCByZXM6IChyZXNwb25zZTogYW55KSA9PiB2b2lkKTogdm9pZFxuICAgIG1haW4oLi4uYXJnczogc3RyaW5nW10pOiB2b2lkXG4gICAgY2xpZW50KG1lc3NhZ2U6IChtc2c6IHN0cmluZykgPT4gc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSk6IHZvaWRcbn0+XG5cbmludGVyZmFjZSBBc3RhbDNKUyBleHRlbmRzIEFzdGFsMy5BcHBsaWNhdGlvbiB7XG4gICAgZXZhbChib2R5OiBzdHJpbmcpOiBQcm9taXNlPGFueT5cbiAgICByZXF1ZXN0SGFuZGxlcjogQ29uZmlnW1wicmVxdWVzdEhhbmRsZXJcIl1cbiAgICBhcHBseV9jc3Moc3R5bGU6IHN0cmluZywgcmVzZXQ/OiBib29sZWFuKTogdm9pZFxuICAgIHF1aXQoY29kZT86IG51bWJlcik6IHZvaWRcbiAgICBzdGFydChjb25maWc/OiBDb25maWcpOiB2b2lkXG59XG5cbmludGVyZmFjZSBBc3RhbDRKUyBleHRlbmRzIEFzdGFsNC5BcHBsaWNhdGlvbiB7XG4gICAgZXZhbChib2R5OiBzdHJpbmcpOiBQcm9taXNlPGFueT5cbiAgICByZXF1ZXN0SGFuZGxlcj86IENvbmZpZ1tcInJlcXVlc3RIYW5kbGVyXCJdXG4gICAgYXBwbHlfY3NzKHN0eWxlOiBzdHJpbmcsIHJlc2V0PzogYm9vbGVhbik6IHZvaWRcbiAgICBxdWl0KGNvZGU/OiBudW1iZXIpOiB2b2lkXG4gICAgc3RhcnQoY29uZmlnPzogQ29uZmlnKTogdm9pZFxufVxuXG50eXBlIEFwcDMgPSB0eXBlb2YgQXN0YWwzLkFwcGxpY2F0aW9uXG50eXBlIEFwcDQgPSB0eXBlb2YgQXN0YWw0LkFwcGxpY2F0aW9uXG5cbmV4cG9ydCBmdW5jdGlvbiBta0FwcDxBcHAgZXh0ZW5kcyBBcHAzPihBcHA6IEFwcCk6IEFzdGFsM0pTXG5leHBvcnQgZnVuY3Rpb24gbWtBcHA8QXBwIGV4dGVuZHMgQXBwND4oQXBwOiBBcHApOiBBc3RhbDRKU1xuXG5leHBvcnQgZnVuY3Rpb24gbWtBcHAoQXBwOiBBcHAzIHwgQXBwNCkge1xuICAgIHJldHVybiBuZXcgKGNsYXNzIEFzdGFsSlMgZXh0ZW5kcyBBcHAge1xuICAgICAgICBzdGF0aWMgeyBHT2JqZWN0LnJlZ2lzdGVyQ2xhc3MoeyBHVHlwZU5hbWU6IFwiQXN0YWxKU1wiIH0sIHRoaXMgYXMgYW55KSB9XG5cbiAgICAgICAgZXZhbChib2R5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZuID0gRnVuY3Rpb24oYHJldHVybiAoYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAke2JvZHkuaW5jbHVkZXMoXCI7XCIpID8gYm9keSA6IGByZXR1cm4gJHtib2R5fTtgfVxuICAgICAgICAgICAgICAgICAgICB9KWApXG4gICAgICAgICAgICAgICAgICAgIGZuKCkoKS50aGVuKHJlcykuY2F0Y2gocmVqKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlaihlcnJvcilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdEhhbmRsZXI/OiBDb25maWdbXCJyZXF1ZXN0SGFuZGxlclwiXVxuXG4gICAgICAgIHZmdW5jX3JlcXVlc3QobXNnOiBzdHJpbmcsIGNvbm46IEdpby5Tb2NrZXRDb25uZWN0aW9uKTogdm9pZCB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucmVxdWVzdEhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdEhhbmRsZXIobXNnLCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgSU8ud3JpdGVfc29jayhjb25uLCBTdHJpbmcocmVzcG9uc2UpLCAoXywgcmVzKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgSU8ud3JpdGVfc29ja19maW5pc2gocmVzKSxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1cGVyLnZmdW5jX3JlcXVlc3QobXNnLCBjb25uKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXBwbHlfY3NzKHN0eWxlOiBzdHJpbmcsIHJlc2V0ID0gZmFsc2UpIHtcbiAgICAgICAgICAgIHN1cGVyLmFwcGx5X2NzcyhzdHlsZSwgcmVzZXQpXG4gICAgICAgIH1cblxuICAgICAgICBxdWl0KGNvZGU/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgICAgIHN1cGVyLnF1aXQoKVxuICAgICAgICAgICAgZXhpdChjb2RlID8/IDApXG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCh7IHJlcXVlc3RIYW5kbGVyLCBjc3MsIGhvbGQsIG1haW4sIGNsaWVudCwgaWNvbnMsIC4uLmNmZyB9OiBDb25maWcgPSB7fSkge1xuICAgICAgICAgICAgY29uc3QgYXBwID0gdGhpcyBhcyB1bmtub3duIGFzIEluc3RhbmNlVHlwZTxBcHAzIHwgQXBwND5cblxuICAgICAgICAgICAgY2xpZW50ID8/PSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcHJpbnQoYEFzdGFsIGluc3RhbmNlIFwiJHthcHAuaW5zdGFuY2VOYW1lfVwiIGFscmVhZHkgcnVubmluZ2ApXG4gICAgICAgICAgICAgICAgZXhpdCgxKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNmZylcbiAgICAgICAgICAgIHNldENvbnNvbGVMb2dEb21haW4oYXBwLmluc3RhbmNlTmFtZSlcblxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0SGFuZGxlciA9IHJlcXVlc3RIYW5kbGVyXG4gICAgICAgICAgICBhcHAuY29ubmVjdChcImFjdGl2YXRlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBtYWluPy4oLi4ucHJvZ3JhbUFyZ3MpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGFwcC5hY3F1aXJlX3NvY2tldCgpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnQobXNnID0+IElPLnNlbmRfcmVxdWVzdChhcHAuaW5zdGFuY2VOYW1lLCBtc2cpISwgLi4ucHJvZ3JhbUFyZ3MpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseV9jc3MoY3NzLCBmYWxzZSlcblxuICAgICAgICAgICAgaWYgKGljb25zKVxuICAgICAgICAgICAgICAgIGFwcC5hZGRfaWNvbnMoaWNvbnMpXG5cbiAgICAgICAgICAgIGhvbGQgPz89IHRydWVcbiAgICAgICAgICAgIGlmIChob2xkKVxuICAgICAgICAgICAgICAgIGFwcC5ob2xkKClcblxuICAgICAgICAgICAgYXBwLnJ1bkFzeW5jKFtdKVxuICAgICAgICB9XG4gICAgfSlcbn1cbiIsICJpbXBvcnQgQXN0YWwgZnJvbSBcImdpOi8vQXN0YWw/dmVyc2lvbj00LjBcIlxuaW1wb3J0IEd0ayBmcm9tIFwiZ2k6Ly9HdGs/dmVyc2lvbj00LjBcIlxuaW1wb3J0IGFzdGFsaWZ5LCB7IHR5cGUsIHR5cGUgQ29uc3RydWN0UHJvcHMgfSBmcm9tIFwiLi9hc3RhbGlmeS5qc1wiXG5cbmZ1bmN0aW9uIGZpbHRlcihjaGlsZHJlbjogYW55W10pIHtcbiAgICByZXR1cm4gY2hpbGRyZW4uZmxhdChJbmZpbml0eSkubWFwKGNoID0+IGNoIGluc3RhbmNlb2YgR3RrLldpZGdldFxuICAgICAgICA/IGNoXG4gICAgICAgIDogbmV3IEd0ay5MYWJlbCh7IHZpc2libGU6IHRydWUsIGxhYmVsOiBTdHJpbmcoY2gpIH0pKVxufVxuXG4vLyBCb3hcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3RhbC5Cb3gucHJvdG90eXBlLCBcImNoaWxkcmVuXCIsIHtcbiAgICBnZXQoKSB7IHJldHVybiB0aGlzLmdldF9jaGlsZHJlbigpIH0sXG4gICAgc2V0KHYpIHsgdGhpcy5zZXRfY2hpbGRyZW4odikgfSxcbn0pXG5cbmV4cG9ydCB0eXBlIEJveFByb3BzID0gQ29uc3RydWN0UHJvcHM8QXN0YWwuQm94LCBBc3RhbC5Cb3guQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBCb3ggPSBhc3RhbGlmeTxBc3RhbC5Cb3gsIEFzdGFsLkJveC5Db25zdHJ1Y3RvclByb3BzPihBc3RhbC5Cb3gsIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7IHJldHVybiBzZWxmLmdldF9jaGlsZHJlbigpIH0sXG4gICAgc2V0Q2hpbGRyZW4oc2VsZiwgY2hpbGRyZW4pIHsgcmV0dXJuIHNlbGYuc2V0X2NoaWxkcmVuKGZpbHRlcihjaGlsZHJlbikpIH0sXG59KVxuXG4vLyBCdXR0b25cbnR5cGUgQnV0dG9uU2lnbmFscyA9IHtcbiAgICBvbkNsaWNrZWQ6IFtdXG59XG5cbmV4cG9ydCB0eXBlIEJ1dHRvblByb3BzID0gQ29uc3RydWN0UHJvcHM8R3RrLkJ1dHRvbiwgR3RrLkJ1dHRvbi5Db25zdHJ1Y3RvclByb3BzLCBCdXR0b25TaWduYWxzPlxuZXhwb3J0IGNvbnN0IEJ1dHRvbiA9IGFzdGFsaWZ5PEd0ay5CdXR0b24sIEd0ay5CdXR0b24uQ29uc3RydWN0b3JQcm9wcywgQnV0dG9uU2lnbmFscz4oR3RrLkJ1dHRvbilcblxuLy8gQ2VudGVyQm94XG5leHBvcnQgdHlwZSBDZW50ZXJCb3hQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5DZW50ZXJCb3gsIEd0ay5DZW50ZXJCb3guQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBDZW50ZXJCb3ggPSBhc3RhbGlmeTxHdGsuQ2VudGVyQm94LCBHdGsuQ2VudGVyQm94LkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5DZW50ZXJCb3gsIHtcbiAgICBnZXRDaGlsZHJlbihib3gpIHtcbiAgICAgICAgcmV0dXJuIFtib3guc3RhcnRXaWRnZXQsIGJveC5jZW50ZXJXaWRnZXQsIGJveC5lbmRXaWRnZXRdXG4gICAgfSxcbiAgICBzZXRDaGlsZHJlbihib3gsIGNoaWxkcmVuKSB7XG4gICAgICAgIGNvbnN0IGNoID0gZmlsdGVyKGNoaWxkcmVuKVxuICAgICAgICBib3guc3RhcnRXaWRnZXQgPSBjaFswXSB8fCBuZXcgR3RrLkJveFxuICAgICAgICBib3guY2VudGVyV2lkZ2V0ID0gY2hbMV0gfHwgbmV3IEd0ay5Cb3hcbiAgICAgICAgYm94LmVuZFdpZGdldCA9IGNoWzJdIHx8IG5ldyBHdGsuQm94XG4gICAgfSxcbn0pXG5cbi8vIFRPRE86IENpcmN1bGFyUHJvZ3Jlc3Ncbi8vIFRPRE86IERyYXdpbmdBcmVhXG5cbi8vIEVudHJ5XG50eXBlIEVudHJ5U2lnbmFscyA9IHtcbiAgICBvbkFjdGl2YXRlOiBbXVxuICAgIG9uTm90aWZ5VGV4dDogW11cbn1cblxuZXhwb3J0IHR5cGUgRW50cnlQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5FbnRyeSwgR3RrLkVudHJ5LkNvbnN0cnVjdG9yUHJvcHMsIEVudHJ5U2lnbmFscz5cbmV4cG9ydCBjb25zdCBFbnRyeSA9IGFzdGFsaWZ5PEd0ay5FbnRyeSwgR3RrLkVudHJ5LkNvbnN0cnVjdG9yUHJvcHMsIEVudHJ5U2lnbmFscz4oR3RrLkVudHJ5LCB7XG4gICAgZ2V0Q2hpbGRyZW4oKSB7IHJldHVybiBbXSB9LFxufSlcblxuLy8gSW1hZ2VcbmV4cG9ydCB0eXBlIEltYWdlUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxHdGsuSW1hZ2UsIEd0ay5JbWFnZS5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IEltYWdlID0gYXN0YWxpZnk8R3RrLkltYWdlLCBHdGsuSW1hZ2UuQ29uc3RydWN0b3JQcm9wcz4oR3RrLkltYWdlLCB7XG4gICAgZ2V0Q2hpbGRyZW4oKSB7IHJldHVybiBbXSB9LFxufSlcblxuLy8gTGFiZWxcbmV4cG9ydCB0eXBlIExhYmVsUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxHdGsuTGFiZWwsIEd0ay5MYWJlbC5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IExhYmVsID0gYXN0YWxpZnk8R3RrLkxhYmVsLCBHdGsuTGFiZWwuQ29uc3RydWN0b3JQcm9wcz4oR3RrLkxhYmVsLCB7XG4gICAgZ2V0Q2hpbGRyZW4oKSB7IHJldHVybiBbXSB9LFxuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7IHNlbGYubGFiZWwgPSBTdHJpbmcoY2hpbGRyZW4pIH0sXG59KVxuXG4vLyBMZXZlbEJhclxuZXhwb3J0IHR5cGUgTGV2ZWxCYXJQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5MZXZlbEJhciwgR3RrLkxldmVsQmFyLkNvbnN0cnVjdG9yUHJvcHM+XG5leHBvcnQgY29uc3QgTGV2ZWxCYXIgPSBhc3RhbGlmeTxHdGsuTGV2ZWxCYXIsIEd0ay5MZXZlbEJhci5Db25zdHJ1Y3RvclByb3BzPihHdGsuTGV2ZWxCYXIsIHtcbiAgICBnZXRDaGlsZHJlbigpIHsgcmV0dXJuIFtdIH0sXG59KVxuXG4vLyBUT0RPOiBMaXN0Qm94XG5cbi8vIE92ZXJsYXlcbmV4cG9ydCB0eXBlIE92ZXJsYXlQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5PdmVybGF5LCBHdGsuT3ZlcmxheS5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IE92ZXJsYXkgPSBhc3RhbGlmeTxHdGsuT3ZlcmxheSwgR3RrLk92ZXJsYXkuQ29uc3RydWN0b3JQcm9wcz4oR3RrLk92ZXJsYXksIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuOiBBcnJheTxHdGsuV2lkZ2V0PiA9IFtdXG4gICAgICAgIGxldCBjaCA9IHNlbGYuZ2V0X2ZpcnN0X2NoaWxkKClcbiAgICAgICAgd2hpbGUgKGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGNoKVxuICAgICAgICAgICAgY2ggPSBjaC5nZXRfbmV4dF9zaWJsaW5nKClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5maWx0ZXIoY2ggPT4gY2ggIT09IHNlbGYuY2hpbGQpXG4gICAgfSxcbiAgICBzZXRDaGlsZHJlbihzZWxmLCBjaGlsZHJlbikge1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGZpbHRlcihjaGlsZHJlbikpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVzID0gdHlwZSBpbiBjaGlsZFxuICAgICAgICAgICAgICAgID8gKGNoaWxkW3R5cGVdIGFzIHN0cmluZykuc3BsaXQoL1xccysvKVxuICAgICAgICAgICAgICAgIDogW11cblxuICAgICAgICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKFwib3ZlcmxheVwiKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYWRkX292ZXJsYXkoY2hpbGQpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0X2NoaWxkKGNoaWxkKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLnNldF9tZWFzdXJlX292ZXJsYXkoY2hpbGQsIHR5cGVzLmluY2x1ZGVzKFwibWVhc3VyZVwiKSlcbiAgICAgICAgICAgIHNlbGYuc2V0X2NsaXBfb3ZlcmxheShjaGlsZCwgdHlwZXMuaW5jbHVkZXMoXCJjbGlwXCIpKVxuICAgICAgICB9XG4gICAgfSxcbn0pXG5cbi8vIFJldmVhbGVyXG5leHBvcnQgdHlwZSBSZXZlYWxlclByb3BzID0gQ29uc3RydWN0UHJvcHM8R3RrLlJldmVhbGVyLCBHdGsuUmV2ZWFsZXIuQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBSZXZlYWxlciA9IGFzdGFsaWZ5PEd0ay5SZXZlYWxlciwgR3RrLlJldmVhbGVyLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5SZXZlYWxlcilcblxuLy8gU2xpZGVyXG50eXBlIFNsaWRlclNpZ25hbHMgPSB7XG4gICAgb25DaGFuZ2VWYWx1ZTogW11cbn1cblxuZXhwb3J0IHR5cGUgU2xpZGVyUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxBc3RhbC5TbGlkZXIsIEFzdGFsLlNsaWRlci5Db25zdHJ1Y3RvclByb3BzLCBTbGlkZXJTaWduYWxzPlxuZXhwb3J0IGNvbnN0IFNsaWRlciA9IGFzdGFsaWZ5PEFzdGFsLlNsaWRlciwgQXN0YWwuU2xpZGVyLkNvbnN0cnVjdG9yUHJvcHMsIFNsaWRlclNpZ25hbHM+KEFzdGFsLlNsaWRlciwge1xuICAgIGdldENoaWxkcmVuKCkgeyByZXR1cm4gW10gfSxcbn0pXG5cbi8vIFN0YWNrXG5leHBvcnQgdHlwZSBTdGFja1Byb3BzID0gQ29uc3RydWN0UHJvcHM8R3RrLlN0YWNrLCBHdGsuU3RhY2suQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBTdGFjayA9IGFzdGFsaWZ5PEd0ay5TdGFjaywgR3RrLlN0YWNrLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5TdGFjaywge1xuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZmlsdGVyKGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5hbWUgIT0gXCJcIiAmJiBjaGlsZC5uYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFkZF9uYW1lZChjaGlsZCwgY2hpbGQubmFtZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGRfY2hpbGQoY2hpbGQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxufSlcblxuLy8gU3dpdGNoXG5leHBvcnQgdHlwZSBTd2l0Y2hQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5Td2l0Y2gsIEd0ay5Td2l0Y2guQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBTd2l0Y2ggPSBhc3RhbGlmeTxHdGsuU3dpdGNoLCBHdGsuU3dpdGNoLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5Td2l0Y2gsIHtcbiAgICBnZXRDaGlsZHJlbigpIHsgcmV0dXJuIFtdIH0sXG59KVxuXG4vLyBXaW5kb3dcbmV4cG9ydCB0eXBlIFdpbmRvd1Byb3BzID0gQ29uc3RydWN0UHJvcHM8QXN0YWwuV2luZG93LCBBc3RhbC5XaW5kb3cuQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBXaW5kb3cgPSBhc3RhbGlmeTxBc3RhbC5XaW5kb3csIEFzdGFsLldpbmRvdy5Db25zdHJ1Y3RvclByb3BzPihBc3RhbC5XaW5kb3cpXG5cbi8vIE1lbnVCdXR0b25cbmV4cG9ydCB0eXBlIE1lbnVCdXR0b25Qcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5NZW51QnV0dG9uLCBHdGsuTWVudUJ1dHRvbi5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IE1lbnVCdXR0b24gPSBhc3RhbGlmeTxHdGsuTWVudUJ1dHRvbiwgR3RrLk1lbnVCdXR0b24uQ29uc3RydWN0b3JQcm9wcz4oR3RrLk1lbnVCdXR0b24sIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7IHJldHVybiBbc2VsZi5wb3BvdmVyLCBzZWxmLmNoaWxkXSB9LFxuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZmlsdGVyKGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgR3RrLlBvcG92ZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNldF9wb3BvdmVyKGNoaWxkKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNldF9jaGlsZChjaGlsZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG59KVxuXG4vLyBQb3BvcGVyXG5leHBvcnQgdHlwZSBQb3BvdmVyUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxHdGsuUG9wb3ZlciwgR3RrLlBvcG92ZXIuQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBQb3BvdmVyID0gYXN0YWxpZnk8R3RrLlBvcG92ZXIsIEd0ay5Qb3BvdmVyLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5Qb3BvdmVyKVxuIiwgImJ1dHRvbiwgYnV0dG9uICosIHBvcG92ZXIsIHBvcG92ZXIgKiwgKiB7XG4gIGZvbnQtZmFtaWx5OiBcIk1vbm9zcGFjZVwiO1xuICBmb250LXNpemU6IDE2cHg7XG4gIC1ndGstaWNvbi1zaXplOiAxNnB4O1xuICBjb2xvcjogI2NkZDZmNDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlci13aWR0aDogMDtcbiAgYm9yZGVyLXN0eWxlOiBub25lO1xuICBib3gtc2hhZG93OiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG59XG5cbi5CYWNrZ3JvdW5kIHtcbiAgcGFkZGluZzogMjBweDtcbiAgbWFyZ2luOiA1cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICMxZTFlMmU7XG4gIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW4tb3V0O1xuICBvcGFjaXR5OiAwLjU7XG59XG4uQmFja2dyb3VuZCAuTWVkaWEge1xuICBib3JkZXI6IDJweCBzb2xpZCAjNzRjN2VjO1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTJlO1xufVxuLkJhY2tncm91bmQgLk1lZGlhICoge1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlLWluLW91dDtcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYSAuTXByaXNJbmZvIHtcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXItcmFkaXVzOiAwIDAgN3B4IDdweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYSAuTXByaXNJbmZvIC5NcHJpc0xhYmVsIHtcbiAgY29sb3I6ICM3NGM3ZWM7XG59XG4uQmFja2dyb3VuZCAuTWVkaWEgLkNhdmFDb250YWluZXIge1xuICBib3JkZXItcmFkaXVzOiA2cHggNnB4IDBweCAwcHg7XG4gIGNvbG9yOiAjNzRjN2VjO1xuICBiYWNrZ3JvdW5kOiBub25lO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZyAuQ2F2YUNvbnRhaW5lciB7XG4gIGNvbG9yOiAjNzRjN2VjO1xuICBiYWNrZ3JvdW5kOiBub25lO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZyAuTXByaXNJbmZvIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzc0YzdlYztcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYVBsYXlpbmcgLk1wcmlzSW5mbyAuTXByaXNMYWJlbCB7XG4gIGNvbG9yOiAjMWUxZTJlO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZzpob3ZlciAuQ2F2YUNvbnRhaW5lciB7XG4gIGNvbG9yOiAjMWUxZTJlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzRjN2VjO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZzpob3ZlciAuTXByaXNJbmZvIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYVBsYXlpbmc6aG92ZXIgLk1wcmlzSW5mbyAuTXByaXNMYWJlbCB7XG4gIGNvbG9yOiAjNzRjN2VjO1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lICoge1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlLWluLW91dDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbn1cbi5CYWNrZ3JvdW5kIC5EYXRlVGltZSAuVGltZSB7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW4tb3V0O1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lIC5UaW1lIC5UaW1lTGFiZWwge1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgZm9udC1zaXplOiA5MHB4O1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lIC5UaW1lIHBvcG92ZXIgPiBjb250ZW50cyB7XG4gIHBhZGRpbmc6IDVweDtcbiAgYmFja2dyb3VuZDogIzMxMzI0NDtcbiAgYm9yZGVyOiAycHggc29saWQgIzc0YzdlYztcbn1cbi5CYWNrZ3JvdW5kIC5EYXRlVGltZSAuVGltZSBwb3BvdmVyID4gY29udGVudHMgLkNhbGVuZGFyQ29udGFpbmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbiAgY29sb3I6ICNjZGQ2ZjQ7XG59XG4uQmFja2dyb3VuZCAuRGF0ZVRpbWUgLlRpbWUgcG9wb3ZlciA+IGNvbnRlbnRzIC5DYWxlbmRhckNvbnRhaW5lciBsYWJlbC50b2RheSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4OWI0ZmE7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6ICMxZTFlMmU7XG59XG4uQmFja2dyb3VuZCAuRGF0ZVRpbWUgLlRpbWUgcG9wb3ZlciA+IGNvbnRlbnRzIC5DYWxlbmRhckNvbnRhaW5lciBsYWJlbDpzZWxlY3RlZCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNiNGJlZmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6ICMxZTFlMmU7XG59XG4uQmFja2dyb3VuZCAuRGF0ZVRpbWUgLlRpbWU6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzRjN2VjO1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lIC5UaW1lOmhvdmVyIC5UaW1lTGFiZWwge1xuICBjb2xvcjogIzE4MTgyNTtcbn1cbi5CYWNrZ3JvdW5kIC5EYXRlVGltZSAuRGF0ZSB7XG4gIGZvbnQtc2l6ZTogNDBweDtcbn1cbi5CYWNrZ3JvdW5kOmhvdmVyIHtcbiAgb3BhY2l0eTogMC45O1xufVxuXG4uU3lzdGVtTW9uaXRvciwgLkF1ZGlvQ29udHJvbCwgLlN5c3RlbVRyYXksIC5XaXJlZCwgLldpZmksIC5NaW5pVGltZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMxZTFlMmU7XG4gIGJvcmRlcjogMnB4IHNvbGlkICM4OWI0ZmE7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIHBhZGRpbmc6IDBweCAycHg7XG4gIG1hcmdpbjogMHB4IDJweDtcbn1cblxuLkNwdVVzYWdlLCAuTWVtb3J5VXNhZ2UsIC5CYXR0ZXJ5LCAuSWNvbkJ0biwgLkxhYmVsQXVkaW9Db250cm9sLCAuQXVkaW9Db250cm9sQnRuLCAuVHJheUl0ZW0sIC5XaXJlZCwgLldpZmksIC5NaW5pVGltZSB7XG4gIHBhZGRpbmc6IDFweCA0cHg7XG59XG5cbi5CYXR0ZXJ5SWNvbiwgLkNwdVVzYWdlSWNvbiwgLk1lbW9yeVVzYWdlSWNvbiB7XG4gIG1hcmdpbjogMHB4IDVweCAwcHggMHB4O1xufVxuXG4uQ3B1VXNhZ2UgLkNwdVVzYWdlSWNvbiwgLkNwdVVzYWdlIC5DcHVVc2FnZUxhYmVsIHtcbiAgY29sb3I6ICNhNmUzYTE7XG59XG5cbi5NZW1vcnlVc2FnZSAuTWVtb3J5VXNhZ2VJY29uLCAuTWVtb3J5VXNhZ2UgLk1lbW9yeVVzYWdlTGFiZWwge1xuICBjb2xvcjogI2ZhYjM4Nztcbn1cblxuLkJhdHRlcnkgLkJhdHRlcnlJY29uLCAuQmF0dGVyeSAuQmF0dGVyeUxhYmVsIHtcbiAgY29sb3I6ICNiNGJlZmU7XG59XG5cbi5CYXR0ZXJ5Q3JpdGljYWwgLkJhdHRlcnlJY29uLCAuQmF0dGVyeUNyaXRpY2FsIC5CYXR0ZXJ5TGFiZWwge1xuICBjb2xvcjogI2YzOGJhODtcbn1cblxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSB7XG4gIG1hcmdpbjogMTBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzMxMzI0NDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgcGFkZGluZzogNXB4O1xufVxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSA+IGNvbnRlbnRzIHtcbiAgcGFkZGluZzogNXB4O1xufVxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSBtb2RlbGJ1dHRvbiB7XG4gIHBhZGRpbmc6IDJweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBtYXJnaW46IDAgMnB4O1xufVxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSBtb2RlbGJ1dHRvbjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHJnYmEoNjksIDcxLCA5MCwgMC4yKTtcbn1cbi5UcmF5SXRlbSBwb3BvdmVyLm1lbnUgbW9kZWxidXR0b246YWN0aXZlIHtcbiAgYmFja2dyb3VuZDogcmdiYSg2OSwgNzEsIDkwLCAwLjQpO1xufVxuXG50b29sdGlwIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbiAgY29sb3I6ICNjZGQ2ZjQ7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogOHB4IDEycHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICMzMTMyNDQ7XG4gIGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG59IiwgImltcG9ydCBBc3RhbEJhdHRlcnkgZnJvbSBcImdpOi8vQXN0YWxCYXR0ZXJ5XCJcbmltcG9ydCB7IFZhcmlhYmxlLCBiaW5kIH0gZnJvbSBcImFzdGFsXCJcbmltcG9ydCBHVG9wIGZyb20gJ2dpOi8vR1RvcD92ZXJzaW9uPTIuMCc7XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWUoc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7TWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCl9aCR7TWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApfW1gO1xufVxuXG5cbmNvbnN0IG1pbGxpc2Vjb25kcyA9IDIwMDA7XG5cbmNvbnN0IGNwdSA9IG5ldyBHVG9wLmdsaWJ0b3BfY3B1KCk7XG5jb25zdCBtZW0gPSBuZXcgR1RvcC5nbGlidG9wX21lbSgpO1xuY29uc3QgYmF0dGVyeSA9IEFzdGFsQmF0dGVyeS5nZXRfZGVmYXVsdCgpO1xuXG5sZXQgcHJldiA9IHtcbiAgICB1c2VyOiBjcHUudXNlcixcbiAgICBzeXM6IGNwdS5zeXMsXG4gICAgdG90YWw6IGNwdS50b3RhbFxufTtcblxubGV0IGRpZmYgPSB7XG4gICAgdXNlcjogMCxcbiAgICBzeXM6IDAsXG4gICAgdG90YWw6IDBcbn07XG5cbmNvbnN0IG1ldHJpY3MgPSBWYXJpYWJsZShcbiAgICB7XG4gICAgICAgIGNwdTogMCxcbiAgICAgICAgbWVtOiAwXG4gICAgfVxuKS5wb2xsKFxuICAgIG1pbGxpc2Vjb25kcyxcbiAgICAoKSA9PiB7XG4gICAgICAgIHByZXYudXNlciA9IGNwdS51c2VyO1xuICAgICAgICBwcmV2LnN5cyA9IGNwdS5zeXM7XG4gICAgICAgIHByZXYudG90YWwgPSBjcHUudG90YWw7XG4gICAgICAgIEdUb3AuZ2xpYnRvcF9nZXRfY3B1KGNwdSk7XG4gICAgICAgIEdUb3AuZ2xpYnRvcF9nZXRfbWVtKG1lbSk7XG4gICAgICAgIGRpZmYudXNlciA9IGNwdS51c2VyIC0gcHJldi51c2VyO1xuICAgICAgICBkaWZmLnN5cyA9IGNwdS5zeXMgLSBwcmV2LnN5cztcbiAgICAgICAgZGlmZi50b3RhbCA9IGNwdS50b3RhbCAtIHByZXYudG90YWw7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcHU6IGRpZmYudG90YWwgPiAwID8gTWF0aC5yb3VuZCgoKGRpZmYudXNlciArIGRpZmYuc3lzKSAvIGRpZmYudG90YWwpICogMTAwKTogMCxcbiAgICAgICAgICAgIG1lbTogTWF0aC5yb3VuZCgobWVtLnVzZXIgLyBtZW0udG90YWwpICogMTAwKVxuICAgICAgICB9O1xuICAgIH1cbik7XG5cbmNvbnN0IENwdVVzYWdlID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIkNwdVVzYWdlXCIgXX0+XG4gICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIkNwdVVzYWdlSWNvblwiIF19IGxhYmVsPXsgJ1x1RjJEQicgfSAvPlxuICAgICAgICAgICAgPGxhYmVsIGNzc0NsYXNzZXM9e1sgXCJDcHVVc2FnZUxhYmVsXCIgXX0gbGFiZWw9eyBiaW5kKG1ldHJpY3MpLmFzKG0gPT4gYCR7bS5jcHV9JWApIH0gLz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn1cbiAgICBcbmNvbnN0IE1lbW9yeVVzYWdlID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIk1lbW9yeVVzYWdlXCIgXX0+XG4gICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIk1lbW9yeVVzYWdlSWNvblwiIF19IGxhYmVsPXsgJ1x1RjUzOCcgfSAvPlxuICAgICAgICAgICAgPGxhYmVsIGNzc0NsYXNzZXM9e1sgXCJNZW1vcnlVc2FnZUxhYmVsXCIgXX0gbGFiZWw9eyBiaW5kKG1ldHJpY3MpLmFzKG0gPT4gYCR7bS5tZW19JWApIH0gLz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn1cbiAgICBcbmNvbnN0IEJhdHRlcnkgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGJveCBcbiAgICAgICAgICAgIGNzc0NsYXNzZXM9e1sgXCJCYXR0ZXJ5XCIgXX1cbiAgICAgICAgICAgIHRvb2x0aXBUZXh0PXsgYmluZChiYXR0ZXJ5LCBcImNoYXJnaW5nXCIpLmFzKGIgPT4gYCR7YmF0dGVyeS5nZXRfY2hhcmdpbmcoKSA/IGBDYXJyZWdhbmRvOiAke2Zvcm1hdFRpbWUoYmF0dGVyeS50aW1lX3RvX2Z1bGwpfSByZXN0YW50ZShzKWAgOiBgRGVzY2FycmVnYW5kbzogJHtmb3JtYXRUaW1lKGJhdHRlcnkudGltZV90b19lbXB0eSl9IHJlc3RhbnRlKHMpYH1gKSB9XG4gICAgICAgICAgICBzZXR1cD17XG4gICAgICAgICAgICAgICAgKHNlbGYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYmF0dGVyeS5jb25uZWN0KFwibm90aWZ5OjpjaGFyZ2luZ1wiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihiYXR0ZXJ5LnBlcmNlbnRhZ2UgPD0gMC4yICYmICFiYXR0ZXJ5LmNoYXJnaW5nKSB7IHNlbGYuYWRkX2Nzc19jbGFzcyhcIkJhdHRlcnlDcml0aWNhbFwiKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyBzZWxmLnJlbW92ZV9jc3NfY2xhc3MoXCJCYXR0ZXJ5Q3JpdGljYWxcIik7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICAgICAgPGltYWdlIGNzc0NsYXNzZXM9e1sgXCJCYXR0ZXJ5SWNvblwiIF19IGljb25OYW1lPXsgYmluZChiYXR0ZXJ5LCBcImljb25OYW1lXCIpIH0gLz5cbiAgICAgICAgICAgIDxsYWJlbCBsYWJlbD17IGJpbmQoYmF0dGVyeSwgXCJwZXJjZW50YWdlXCIpLmFzKHAgPT4gYCR7TWF0aC5yb3VuZChwICogMTAwKX0lYCkgfSAvPlxuICAgICAgICA8L2JveD5cbiAgICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTeXN0ZW1Nb25pdG9yKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIlN5c3RlbU1vbml0b3JcIiBdfSBvbkRlc3Ryb3k9eygpID0+IG1ldHJpY3MuZHJvcCgpIH0+XG4gICAgICAgICAgICA8Q3B1VXNhZ2UvPlxuICAgICAgICAgICAgPE1lbW9yeVVzYWdlLz5cbiAgICAgICAgICAgIDxCYXR0ZXJ5Lz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn0iLCAiaW1wb3J0IFwiLi9vdmVycmlkZXMuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBBc3RhbElPIH0gZnJvbSBcImdpOi8vQXN0YWxJTz92ZXJzaW9uPTAuMVwiXG5leHBvcnQgKiBmcm9tIFwiLi9wcm9jZXNzLmpzXCJcbmV4cG9ydCAqIGZyb20gXCIuL3RpbWUuanNcIlxuZXhwb3J0ICogZnJvbSBcIi4vZmlsZS5qc1wiXG5leHBvcnQgKiBmcm9tIFwiLi9nb2JqZWN0LmpzXCJcbmV4cG9ydCB7IEJpbmRpbmcsIGJpbmQgfSBmcm9tIFwiLi9iaW5kaW5nLmpzXCJcbmV4cG9ydCB7IFZhcmlhYmxlLCBkZXJpdmUgfSBmcm9tIFwiLi92YXJpYWJsZS5qc1wiXG4iLCAiaW1wb3J0IEFzdGFsIGZyb20gXCJnaTovL0FzdGFsSU9cIlxuaW1wb3J0IEdpbyBmcm9tIFwiZ2k6Ly9HaW8/dmVyc2lvbj0yLjBcIlxuXG5leHBvcnQgeyBHaW8gfVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZEZpbGUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gQXN0YWwucmVhZF9maWxlKHBhdGgpIHx8IFwiXCJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRGaWxlQXN5bmMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBBc3RhbC5yZWFkX2ZpbGVfYXN5bmMocGF0aCwgKF8sIHJlcykgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKEFzdGFsLnJlYWRfZmlsZV9maW5pc2gocmVzKSB8fCBcIlwiKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlRmlsZShwYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIEFzdGFsLndyaXRlX2ZpbGUocGF0aCwgY29udGVudClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlRmlsZUFzeW5jKHBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgQXN0YWwud3JpdGVfZmlsZV9hc3luYyhwYXRoLCBjb250ZW50LCAoXywgcmVzKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoQXN0YWwud3JpdGVfZmlsZV9maW5pc2gocmVzKSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb25pdG9yRmlsZShcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgY2FsbGJhY2s6IChmaWxlOiBzdHJpbmcsIGV2ZW50OiBHaW8uRmlsZU1vbml0b3JFdmVudCkgPT4gdm9pZCxcbik6IEdpby5GaWxlTW9uaXRvciB7XG4gICAgcmV0dXJuIEFzdGFsLm1vbml0b3JfZmlsZShwYXRoLCAoZmlsZTogc3RyaW5nLCBldmVudDogR2lvLkZpbGVNb25pdG9yRXZlbnQpID0+IHtcbiAgICAgICAgY2FsbGJhY2soZmlsZSwgZXZlbnQpXG4gICAgfSkhXG59XG4iLCAiaW1wb3J0IEdPYmplY3QgZnJvbSBcImdpOi8vR09iamVjdFwiXG5cbmV4cG9ydCB7IGRlZmF1bHQgYXMgR0xpYiB9IGZyb20gXCJnaTovL0dMaWI/dmVyc2lvbj0yLjBcIlxuZXhwb3J0IHsgR09iamVjdCwgR09iamVjdCBhcyBkZWZhdWx0IH1cblxuY29uc3QgbWV0YSA9IFN5bWJvbChcIm1ldGFcIilcbmNvbnN0IHByaXYgPSBTeW1ib2woXCJwcml2XCIpXG5cbmNvbnN0IHsgUGFyYW1TcGVjLCBQYXJhbUZsYWdzIH0gPSBHT2JqZWN0XG5cbmNvbnN0IGtlYmFiaWZ5ID0gKHN0cjogc3RyaW5nKSA9PiBzdHJcbiAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMS0kMlwiKVxuICAgIC5yZXBsYWNlQWxsKFwiX1wiLCBcIi1cIilcbiAgICAudG9Mb3dlckNhc2UoKVxuXG50eXBlIFNpZ25hbERlY2xhcmF0aW9uID0ge1xuICAgIGZsYWdzPzogR09iamVjdC5TaWduYWxGbGFnc1xuICAgIGFjY3VtdWxhdG9yPzogR09iamVjdC5BY2N1bXVsYXRvclR5cGVcbiAgICByZXR1cm5fdHlwZT86IEdPYmplY3QuR1R5cGVcbiAgICBwYXJhbV90eXBlcz86IEFycmF5PEdPYmplY3QuR1R5cGU+XG59XG5cbnR5cGUgUHJvcGVydHlEZWNsYXJhdGlvbiA9XG4gICAgfCBJbnN0YW5jZVR5cGU8dHlwZW9mIEdPYmplY3QuUGFyYW1TcGVjPlxuICAgIHwgeyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfVxuICAgIHwgdHlwZW9mIFN0cmluZ1xuICAgIHwgdHlwZW9mIE51bWJlclxuICAgIHwgdHlwZW9mIEJvb2xlYW5cbiAgICB8IHR5cGVvZiBPYmplY3RcblxudHlwZSBHT2JqZWN0Q29uc3RydWN0b3IgPSB7XG4gICAgW21ldGFdPzoge1xuICAgICAgICBQcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBHT2JqZWN0LlBhcmFtU3BlYyB9XG4gICAgICAgIFNpZ25hbHM/OiB7IFtrZXk6IHN0cmluZ106IEdPYmplY3QuU2lnbmFsRGVmaW5pdGlvbiB9XG4gICAgfVxuICAgIG5ldyguLi5hcmdzOiBhbnlbXSk6IGFueVxufVxuXG50eXBlIE1ldGFJbmZvID0gR09iamVjdC5NZXRhSW5mbzxuZXZlciwgQXJyYXk8eyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfT4sIG5ldmVyPlxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIob3B0aW9uczogTWV0YUluZm8gPSB7fSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoY2xzOiBHT2JqZWN0Q29uc3RydWN0b3IpIHtcbiAgICAgICAgY29uc3QgdCA9IG9wdGlvbnMuVGVtcGxhdGVcbiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiICYmICF0LnN0YXJ0c1dpdGgoXCJyZXNvdXJjZTovL1wiKSAmJiAhdC5zdGFydHNXaXRoKFwiZmlsZTovL1wiKSkge1xuICAgICAgICAgICAgLy8gYXNzdW1lIHhtbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgb3B0aW9ucy5UZW1wbGF0ZSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh0KVxuICAgICAgICB9XG5cbiAgICAgICAgR09iamVjdC5yZWdpc3RlckNsYXNzKHtcbiAgICAgICAgICAgIFNpZ25hbHM6IHsgLi4uY2xzW21ldGFdPy5TaWduYWxzIH0sXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiB7IC4uLmNsc1ttZXRhXT8uUHJvcGVydGllcyB9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSwgY2xzKVxuXG4gICAgICAgIGRlbGV0ZSBjbHNbbWV0YV1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9wZXJ0eShkZWNsYXJhdGlvbjogUHJvcGVydHlEZWNsYXJhdGlvbiA9IE9iamVjdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3A6IGFueSwgZGVzYz86IFByb3BlcnR5RGVzY3JpcHRvcikge1xuICAgICAgICB0YXJnZXQuY29uc3RydWN0b3JbbWV0YV0gPz89IHt9XG4gICAgICAgIHRhcmdldC5jb25zdHJ1Y3RvclttZXRhXS5Qcm9wZXJ0aWVzID8/PSB7fVxuXG4gICAgICAgIGNvbnN0IG5hbWUgPSBrZWJhYmlmeShwcm9wKVxuXG4gICAgICAgIGlmICghZGVzYykge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbcHJpdl0/Lltwcm9wXSA/PyBkZWZhdWx0VmFsdWUoZGVjbGFyYXRpb24pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQodjogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ICE9PSB0aGlzW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3ByaXZdID8/PSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1twcml2XVtwcm9wXSA9IHZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KG5hbWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYHNldF8ke25hbWUucmVwbGFjZShcIi1cIiwgXCJfXCIpfWAsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSh2OiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1twcm9wXSA9IHZcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYGdldF8ke25hbWUucmVwbGFjZShcIi1cIiwgXCJfXCIpfWAsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbcHJvcF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGFyZ2V0LmNvbnN0cnVjdG9yW21ldGFdLlByb3BlcnRpZXNba2ViYWJpZnkocHJvcCldID0gcHNwZWMobmFtZSwgUGFyYW1GbGFncy5SRUFEV1JJVEUsIGRlY2xhcmF0aW9uKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZsYWdzID0gMFxuICAgICAgICAgICAgaWYgKGRlc2MuZ2V0KSBmbGFncyB8PSBQYXJhbUZsYWdzLlJFQURBQkxFXG4gICAgICAgICAgICBpZiAoZGVzYy5zZXQpIGZsYWdzIHw9IFBhcmFtRmxhZ3MuV1JJVEFCTEVcblxuICAgICAgICAgICAgdGFyZ2V0LmNvbnN0cnVjdG9yW21ldGFdLlByb3BlcnRpZXNba2ViYWJpZnkocHJvcCldID0gcHNwZWMobmFtZSwgZmxhZ3MsIGRlY2xhcmF0aW9uKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lnbmFsKC4uLnBhcmFtczogQXJyYXk8eyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfSB8IHR5cGVvZiBPYmplY3Q+KTpcbih0YXJnZXQ6IGFueSwgc2lnbmFsOiBhbnksIGRlc2M/OiBQcm9wZXJ0eURlc2NyaXB0b3IpID0+IHZvaWRcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25hbChkZWNsYXJhdGlvbj86IFNpZ25hbERlY2xhcmF0aW9uKTpcbih0YXJnZXQ6IGFueSwgc2lnbmFsOiBhbnksIGRlc2M/OiBQcm9wZXJ0eURlc2NyaXB0b3IpID0+IHZvaWRcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25hbChcbiAgICBkZWNsYXJhdGlvbj86IFNpZ25hbERlY2xhcmF0aW9uIHwgeyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfSB8IHR5cGVvZiBPYmplY3QsXG4gICAgLi4ucGFyYW1zOiBBcnJheTx7ICRndHlwZTogR09iamVjdC5HVHlwZSB9IHwgdHlwZW9mIE9iamVjdD5cbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHNpZ25hbDogYW55LCBkZXNjPzogUHJvcGVydHlEZXNjcmlwdG9yKSB7XG4gICAgICAgIHRhcmdldC5jb25zdHJ1Y3RvclttZXRhXSA/Pz0ge31cbiAgICAgICAgdGFyZ2V0LmNvbnN0cnVjdG9yW21ldGFdLlNpZ25hbHMgPz89IHt9XG5cbiAgICAgICAgY29uc3QgbmFtZSA9IGtlYmFiaWZ5KHNpZ25hbClcblxuICAgICAgICBpZiAoZGVjbGFyYXRpb24gfHwgcGFyYW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogdHlwZSBhc3NlcnRcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFtkZWNsYXJhdGlvbiwgLi4ucGFyYW1zXS5tYXAodiA9PiB2LiRndHlwZSlcbiAgICAgICAgICAgIHRhcmdldC5jb25zdHJ1Y3RvclttZXRhXS5TaWduYWxzW25hbWVdID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtX3R5cGVzOiBhcnIsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuY29uc3RydWN0b3JbbWV0YV0uU2lnbmFsc1tuYW1lXSA9IGRlY2xhcmF0aW9uIHx8IHtcbiAgICAgICAgICAgICAgICBwYXJhbV90eXBlczogW10sXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRlc2MpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHNpZ25hbCwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KG5hbWUsIC4uLmFyZ3MpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvZzogKCguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCkgPSBkZXNjLnZhbHVlXG4gICAgICAgICAgICBkZXNjLnZhbHVlID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3QgdHlwZWRcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQobmFtZSwgLi4uYXJncylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGBvbl8ke25hbWUucmVwbGFjZShcIi1cIiwgXCJfXCIpfWAsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvZy5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwc3BlYyhuYW1lOiBzdHJpbmcsIGZsYWdzOiBudW1iZXIsIGRlY2xhcmF0aW9uOiBQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgaWYgKGRlY2xhcmF0aW9uIGluc3RhbmNlb2YgUGFyYW1TcGVjKVxuICAgICAgICByZXR1cm4gZGVjbGFyYXRpb25cblxuICAgIHN3aXRjaCAoZGVjbGFyYXRpb24pIHtcbiAgICAgICAgY2FzZSBTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gUGFyYW1TcGVjLnN0cmluZyhuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgXCJcIilcbiAgICAgICAgY2FzZSBOdW1iZXI6XG4gICAgICAgICAgICByZXR1cm4gUGFyYW1TcGVjLmRvdWJsZShuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgLU51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIDApXG4gICAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBQYXJhbVNwZWMuYm9vbGVhbihuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgZmFsc2UpXG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgcmV0dXJuIFBhcmFtU3BlYy5qc29iamVjdChuYW1lLCBcIlwiLCBcIlwiLCBmbGFncylcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgbWlzc3R5cGVkXG4gICAgICAgICAgICByZXR1cm4gUGFyYW1TcGVjLm9iamVjdChuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgZGVjbGFyYXRpb24uJGd0eXBlKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFZhbHVlKGRlY2xhcmF0aW9uOiBQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgaWYgKGRlY2xhcmF0aW9uIGluc3RhbmNlb2YgUGFyYW1TcGVjKVxuICAgICAgICByZXR1cm4gZGVjbGFyYXRpb24uZ2V0X2RlZmF1bHRfdmFsdWUoKVxuXG4gICAgc3dpdGNoIChkZWNsYXJhdGlvbikge1xuICAgICAgICBjYXNlIFN0cmluZzpcbiAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG59XG4iLCAiaW1wb3J0IEd0ayBmcm9tIFwiZ2k6Ly9HdGs/dmVyc2lvbj00LjBcIlxuaW1wb3J0IHsgdHlwZSBCaW5kYWJsZUNoaWxkIH0gZnJvbSBcIi4vYXN0YWxpZnkuanNcIlxuaW1wb3J0IHsgbWVyZ2VCaW5kaW5ncywganN4IGFzIF9qc3ggfSBmcm9tIFwiLi4vX2FzdGFsLmpzXCJcbmltcG9ydCAqIGFzIFdpZGdldCBmcm9tIFwiLi93aWRnZXQuanNcIlxuXG5leHBvcnQgZnVuY3Rpb24gRnJhZ21lbnQoeyBjaGlsZHJlbiA9IFtdLCBjaGlsZCB9OiB7XG4gICAgY2hpbGQ/OiBCaW5kYWJsZUNoaWxkXG4gICAgY2hpbGRyZW4/OiBBcnJheTxCaW5kYWJsZUNoaWxkPlxufSkge1xuICAgIGlmIChjaGlsZCkgY2hpbGRyZW4ucHVzaChjaGlsZClcbiAgICByZXR1cm4gbWVyZ2VCaW5kaW5ncyhjaGlsZHJlbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGpzeChcbiAgICBjdG9yOiBrZXlvZiB0eXBlb2YgY3RvcnMgfCB0eXBlb2YgR3RrLldpZGdldCxcbiAgICBwcm9wczogYW55LFxuKSB7XG4gICAgcmV0dXJuIF9qc3goY3RvcnMsIGN0b3IgYXMgYW55LCBwcm9wcylcbn1cblxuY29uc3QgY3RvcnMgPSB7XG4gICAgYm94OiBXaWRnZXQuQm94LFxuICAgIGJ1dHRvbjogV2lkZ2V0LkJ1dHRvbixcbiAgICBjZW50ZXJib3g6IFdpZGdldC5DZW50ZXJCb3gsXG4gICAgLy8gY2lyY3VsYXJwcm9ncmVzczogV2lkZ2V0LkNpcmN1bGFyUHJvZ3Jlc3MsXG4gICAgLy8gZHJhd2luZ2FyZWE6IFdpZGdldC5EcmF3aW5nQXJlYSxcbiAgICBlbnRyeTogV2lkZ2V0LkVudHJ5LFxuICAgIGltYWdlOiBXaWRnZXQuSW1hZ2UsXG4gICAgbGFiZWw6IFdpZGdldC5MYWJlbCxcbiAgICBsZXZlbGJhcjogV2lkZ2V0LkxldmVsQmFyLFxuICAgIG92ZXJsYXk6IFdpZGdldC5PdmVybGF5LFxuICAgIHJldmVhbGVyOiBXaWRnZXQuUmV2ZWFsZXIsXG4gICAgc2xpZGVyOiBXaWRnZXQuU2xpZGVyLFxuICAgIHN0YWNrOiBXaWRnZXQuU3RhY2ssXG4gICAgc3dpdGNoOiBXaWRnZXQuU3dpdGNoLFxuICAgIHdpbmRvdzogV2lkZ2V0LldpbmRvdyxcbiAgICBtZW51YnV0dG9uOiBXaWRnZXQuTWVudUJ1dHRvbixcbiAgICBwb3BvdmVyOiBXaWRnZXQuUG9wb3Zlcixcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gICAgbmFtZXNwYWNlIEpTWCB7XG4gICAgICAgIHR5cGUgRWxlbWVudCA9IEd0ay5XaWRnZXRcbiAgICAgICAgdHlwZSBFbGVtZW50Q2xhc3MgPSBHdGsuV2lkZ2V0XG4gICAgICAgIGludGVyZmFjZSBJbnRyaW5zaWNFbGVtZW50cyB7XG4gICAgICAgICAgICBib3g6IFdpZGdldC5Cb3hQcm9wc1xuICAgICAgICAgICAgYnV0dG9uOiBXaWRnZXQuQnV0dG9uUHJvcHNcbiAgICAgICAgICAgIGNlbnRlcmJveDogV2lkZ2V0LkNlbnRlckJveFByb3BzXG4gICAgICAgICAgICAvLyBjaXJjdWxhcnByb2dyZXNzOiBXaWRnZXQuQ2lyY3VsYXJQcm9ncmVzc1Byb3BzXG4gICAgICAgICAgICAvLyBkcmF3aW5nYXJlYTogV2lkZ2V0LkRyYXdpbmdBcmVhUHJvcHNcbiAgICAgICAgICAgIGVudHJ5OiBXaWRnZXQuRW50cnlQcm9wc1xuICAgICAgICAgICAgaW1hZ2U6IFdpZGdldC5JbWFnZVByb3BzXG4gICAgICAgICAgICBsYWJlbDogV2lkZ2V0LkxhYmVsUHJvcHNcbiAgICAgICAgICAgIGxldmVsYmFyOiBXaWRnZXQuTGV2ZWxCYXJQcm9wc1xuICAgICAgICAgICAgb3ZlcmxheTogV2lkZ2V0Lk92ZXJsYXlQcm9wc1xuICAgICAgICAgICAgcmV2ZWFsZXI6IFdpZGdldC5SZXZlYWxlclByb3BzXG4gICAgICAgICAgICBzbGlkZXI6IFdpZGdldC5TbGlkZXJQcm9wc1xuICAgICAgICAgICAgc3RhY2s6IFdpZGdldC5TdGFja1Byb3BzXG4gICAgICAgICAgICBzd2l0Y2g6IFdpZGdldC5Td2l0Y2hQcm9wc1xuICAgICAgICAgICAgd2luZG93OiBXaWRnZXQuV2luZG93UHJvcHNcbiAgICAgICAgICAgIG1lbnVidXR0b246IFdpZGdldC5NZW51QnV0dG9uUHJvcHNcbiAgICAgICAgICAgIHBvcG92ZXI6IFdpZGdldC5Qb3BvdmVyUHJvcHNcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGpzeHMgPSBqc3hcbiIsICJpbXBvcnQgV3AgZnJvbSBcImdpOi8vQXN0YWxXcFwiXG5pbXBvcnQgeyBiaW5kLCBHTGliIH0gZnJvbSBcImFzdGFsXCJcbmltcG9ydCB7IEd0aywgR2RrIH0gZnJvbSBcImFzdGFsL2d0azRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXVkaW9Db250cm9sKCkge1xuICAgIGNvbnN0IGF1ZGlvID0gV3AuZ2V0X2RlZmF1bHQoKSEuZGVmYXVsdFNwZWFrZXIhO1xuICAgIGNvbnN0IHN0ZXAgPSAwLjAyO1xuICAgIGNvbnN0IHNjcm9sbCA9IG5ldyBHdGsuRXZlbnRDb250cm9sbGVyU2Nyb2xsKHsgZmxhZ3M6IEd0ay5FdmVudENvbnRyb2xsZXJTY3JvbGxGbGFncy5WRVJUSUNBTCB9KTtcbiAgICBjb25zdCBjbGljayA9IHsgbGVmdDogbmV3IEd0ay5HZXN0dXJlQ2xpY2soKSwgcmlnaHQ6IG5ldyBHdGsuR2VzdHVyZUNsaWNrKCkgfTtcbiAgICBjbGljay5sZWZ0LnNldF9idXR0b24oR2RrLkJVVFRPTl9QUklNQVJZKTtcbiAgICBjbGljay5yaWdodC5zZXRfYnV0dG9uKEdkay5CVVRUT05fU0VDT05EQVJZKTtcbiAgICBjb25zdCBoYW5kbGVycyA9IFtcbiAgICAgICAgc2Nyb2xsLmNvbm5lY3QoXCJzY3JvbGxcIiwgKGNvbnRyb2xlciwgZHgsIGR5KSA9PiB7IGF1ZGlvLnZvbHVtZSA9IChkeSA8IDAgPyBNYXRoLm1pbihhdWRpby5nZXRfdm9sdW1lKCkrc3RlcCwgMSkgOiBhdWRpby5nZXRfdm9sdW1lKCktc3RlcCkgfSksXG4gICAgICAgIGNsaWNrLmxlZnQuY29ubmVjdChcInByZXNzZWRcIiwgKCkgPT4geyBhdWRpby5zZXRfbXV0ZSghYXVkaW8uZ2V0X211dGUoKSkgfSApLFxuICAgICAgICBjbGljay5yaWdodC5jb25uZWN0KFwicHJlc3NlZFwiLCAoKSA9PiB7IEdMaWIuc3Bhd25fY29tbWFuZF9saW5lX2FzeW5jKFwicGF2dWNvbnRyb2xcIikgfSApXG4gICAgXTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8Ym94XG4gICAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiQXVkaW9Db250cm9sXCIgXX1cbiAgICAgICAgICAgIHNldHVwPXtcbiAgICAgICAgICAgICAgICAoc2VsZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrLmxlZnQpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrLnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRfY29udHJvbGxlcihzY3JvbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uRGVzdHJveT17XG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGwuZGlzY29ubmVjdChoYW5kbGVyc1swXSk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrLmxlZnQuZGlzY29ubmVjdChoYW5kbGVyc1sxXSk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrLnJpZ2h0LmRpc2Nvbm5lY3QoaGFuZGxlcnNbMl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvb2x0aXBUZXh0PXsgYmluZChhdWRpbywgXCJkZXNjcmlwdGlvblwiKS5hcyhuID0+IGBEaXNwb3NpdGl2byBhdHVhbDogJHtufWApIH1cbiAgICAgICAgPlxuICAgICAgICAgICAgPGltYWdlXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3Nlcz17WyBcIkF1ZGlvQ29udHJvbEJ0blwiIF19XG4gICAgICAgICAgICAgICAgaWNvbk5hbWU9eyBiaW5kKGF1ZGlvLCBcInZvbHVtZUljb25cIikgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzZXM9e1sgXCJMYWJlbEF1ZGlvQ29udHJvbFwiIF19XG4gICAgICAgICAgICAgICAgbGFiZWw9eyBiaW5kKGF1ZGlvLCBcInZvbHVtZVwiKS5hcyhhID0+IGAke01hdGgucm91bmQoYSAqIDEwMCl9JWApIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvYm94PlxuICAgICk7XG59XG4iLCAiaW1wb3J0IEFzdGFsTmV0d29yayBmcm9tIFwiZ2k6Ly9Bc3RhbE5ldHdvcmtcIjtcbmltcG9ydCB7IFZhcmlhYmxlLCBiaW5kIH0gZnJvbSBcImFzdGFsXCI7XG5cbi8vIENvbnZlcnRlIG8gZW51bSBEZXZpY2VTdGF0ZSBwYXJhIHRleHRvIGVtIHBvcnR1Z3VcdTAwRUFzXG5jb25zdCBzdGF0ZVRleHRzOiBSZWNvcmQ8QXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLCBzdHJpbmc+ID0ge1xuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLlVOS05PV05dOiAgICAgICAnRGVzY29uaGVjaWRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5VTk1BTkFHRURdOiAgICAgJ05cdTAwRTNvIGdlcmVuY2lhZG8nLFxuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLlVOQVZBSUxBQkxFXTogICAnSW5kaXNwb25cdTAwRUR2ZWwnLFxuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLkRJU0NPTk5FQ1RFRF06ICAnRGVzY29uZWN0YWRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5QUkVQQVJFXTogICAgICAgJ1ByZXBhcmFuZG8nLFxuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLkNPTkZJR106ICAgICAgICAnQ29uZmlndXJhbmRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5ORUVEX0FVVEhdOiAgICAgJ05lY2Vzc2l0YSBhdXRlbnRpY2FcdTAwRTdcdTAwRTNvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5JUF9DT05GSUddOiAgICAgJ0NvbmZpZ3VyYW5kbyBJUCcsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuSVBfQ0hFQ0tdOiAgICAgICdWZXJpZmljYW5kbyBJUCcsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuU0VDT05EQVJJRVNdOiAgICdDb25maWd1cmFuZG8gc2VjdW5kXHUwMEUxcmlvcycsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuQUNUSVZBVEVEXTogICAgICdBdGl2YWRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5ERUFDVElWQVRJTkddOiAgJ0Rlc2NvbmVjdGFkbycsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuRkFJTEVEXTogICAgICAgICdGYWxoYScsXG59O1xuXG5mdW5jdGlvbiBzdGF0ZVN0cmluZyhzOiBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlVGV4dHNbc10gPz8gJ0VzdGFkbyBkZXNjb25oZWNpZG8nO1xufVxuXG5jb25zdCBuZXR3b3JrID0gQXN0YWxOZXR3b3JrLmdldF9kZWZhdWx0KCk7XG5cbmNvbnN0IHN0YXRzID0gVmFyaWFibGUoXG4gICAge1xuICAgICAgICB3aWZpOiB7XG4gICAgICAgICAgbmFtZTogbmV0d29yay53aWZpLmRldmljZS5nZXRfaWZhY2UoKSxcbiAgICAgICAgICBzc2lkOiBuZXR3b3JrLndpZmkuc3NpZCA/PyAnJyxcbiAgICAgICAgICBzdGF0ZTogbmV0d29yay53aWZpLnN0YXRlID8/IEFzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5VTktOT1dOLFxuICAgICAgICB9LFxuICAgICAgICB3aXJlZDoge1xuICAgICAgICAgIG5hbWU6IG5ldHdvcmsud2lyZWQ/LmRldmljZS5nZXRfaWZhY2UoKSA/PyBcIlNlbSBkaXNwb3NpdGl2b1wiLFxuICAgICAgICAgIHN0YXRlOiBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuVU5LTk9XTlxuICAgICAgICB9XG4gICAgfVxuKTtcblxuY29uc3QgaGFuZGxlcnMgPSBbXG4gIG5ldHdvcmsud2lmaS5jb25uZWN0KFwic3RhdGUtY2hhbmdlZFwiLFxuICAgICgpID0+IHtcbiAgICAgIHN0YXRzLnNldChcbiAgICAgICAge1xuICAgICAgICAgIC4uLnN0YXRzLmdldCgpLFxuICAgICAgICAgIHdpZmk6IHtcbiAgICAgICAgICAgIG5hbWU6IG5ldHdvcmsud2lmaS5kZXZpY2UuZ2V0X2lmYWNlKCkgPz8gXCJTZW0gZGlzcG9zaXRpdm9cIixcbiAgICAgICAgICAgIHNzaWQ6IG5ldHdvcmsud2lmaS5zc2lkID8/ICcnLFxuICAgICAgICAgICAgc3RhdGU6IG5ldHdvcmsud2lmaS5zdGF0ZSA/PyBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuVU5BVkFJTEFCTEVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICksXG5dO1xuXG5mdW5jdGlvbiBXaWZpKCkge1xuICByZXR1cm4gKFxuICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIldpZmlcIiBdfT5cbiAgICAgIDxsYWJlbFxuICAgICAgICBtYXhXaWR0aENoYXJzPXsyMH1cbiAgICAgICAgbGFiZWw9e2JpbmQoc3RhdHMpLmFzKHMgPT4gcy53aWZpLnN0YXRlID09PSBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuQUNUSVZBVEVEIHx8IHMud2lmaS5zdGF0ZSA9PT0gQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLlNFQ09OREFSSUVTID8gYCR7cy53aWZpLm5hbWV9OiAke3Mud2lmaS5zc2lkfWAgOiBgJHtzLndpZmkubmFtZX06ICR7c3RhdGVTdHJpbmcocy53aWZpLnN0YXRlKX1gKSB9XG4gICAgICAgIC8+XG4gICAgPC9ib3g+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFdpcmVkKCkge1xuICByZXR1cm4gKFxuICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIldpcmVkXCIgXX0+XG4gICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgbWF4V2lkdGhDaGFycz17IDIwIH1cbiAgICAgICAgICAgIGxhYmVsPXsgYmluZChzdGF0cykuYXMocyA9PiBzLndpcmVkLnN0YXRlID09PSBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuQUNUSVZBVEVEIHx8IHMud2lyZWQuc3RhdGUgPT09IEFzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5TRUNPTkRBUklFUyA/IGAke3Mud2lyZWQubmFtZX06IENvbm5lY3RhZG9gIDogYCR7cy53aXJlZC5uYW1lfSR7cy53aXJlZC5uYW1lID09PSBcIlNlbSBkaXNwb3NpdGl2b1wiID8gJyc6IFwiOiBcIiArIHN0YXRlU3RyaW5nKHMud2lyZWQuc3RhdGUpfWApIH1cbiAgICAgICAgLz5cbiAgICA8L2JveD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTmV0d29yaygpIHtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxib3hcbiAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiTmV0d29ya1wiIF19XG4gICAgICAgICAgb25EZXN0cm95PXtcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgc3RhdHMuZHJvcCgpO1xuICAgICAgICAgICAgICBuZXR3b3JrLndpZmkuZGlzY29ubmVjdChoYW5kbGVyc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAgPFdpZmkgLz5cbiAgICAgICAgICA8V2lyZWQgLz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn1cbiIsICJpbXBvcnQgeyBHdGssIEdkayB9IGZyb20gXCJhc3RhbC9ndGs0XCI7XG5pbXBvcnQgVHJheSBmcm9tIFwiZ2k6Ly9Bc3RhbFRyYXlcIjtcbmltcG9ydCB7IGJpbmQgfSBmcm9tIFwiYXN0YWxcIjtcblxuZnVuY3Rpb24gVHJheUl0ZW0oeyBpdGVtIH06IHsgaXRlbTogSW5zdGFuY2VUeXBlPHR5cGVvZiBUcmF5LlRyYXlJdGVtPiB9KSB7XG4gICAgbGV0IGhhbmRsZXJzID0ge1xuICAgICAgICBwcmltYXJ5OiAwLFxuICAgICAgICBtaWRkbGU6IDAsXG4gICAgICAgIHNlY29uZGFyeTogMCxcbiAgICAgICAgbWVudU1vZGVsOiAwLFxuICAgICAgICBhY3Rpb25HOiAwXG4gICAgfTtcbiAgICBjb25zdCBjbGlja1ByaW1hcnkgPSBuZXcgR3RrLkdlc3R1cmVDbGljayh7IGJ1dHRvbjogR2RrLkJVVFRPTl9QUklNQVJZIH0pO1xuICAgIGNvbnN0IGNsaWNrU2Vjb25kYXJ5ID0gbmV3IEd0ay5HZXN0dXJlQ2xpY2soeyBidXR0b246IEdkay5CVVRUT05fU0VDT05EQVJZIH0pO1xuICAgIGNvbnN0IGNsaWNrTWlkZGxlID0gbmV3IEd0ay5HZXN0dXJlQ2xpY2soeyBidXR0b246IEdkay5CVVRUT05fTUlERExFIH0pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPG1lbnVidXR0b25cbiAgICAgICAgICAgIGNzc0NsYXNzZXM9e1sgXCJUcmF5SXRlbVwiIF19XG4gICAgICAgICAgICB0b29sdGlwVGV4dD17IGJpbmQoaXRlbSwgXCJ0b29sdGlwTWFya3VwXCIpIH1cbiAgICAgICAgICAgIG1lbnVNb2RlbD17IGl0ZW0ubWVudU1vZGVsIH1cbiAgICAgICAgICAgIHVzZVBvcG92ZXI9eyB0cnVlIH1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17IEd0ay5BcnJvd1R5cGUuRE9XTiB9XG4gICAgICAgICAgICBzZXR1cD17XG4gICAgICAgICAgICAgICAgKHNlbGYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnk6IGNsaWNrUHJpbWFyeS5jb25uZWN0KFwicHJlc3NlZFwiLCAoX3NlbGYsIF9uLCB4LCB5KSA9PiB7IGlmKGl0ZW0uaXNfbWVudSkgc2VsZi5nZXRfcG9wb3ZlcigpIS5wb3B1cCgpOyBlbHNlIGl0ZW0uYWN0aXZhdGUoeCwgeSk7IH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZGRsZTogY2xpY2tNaWRkbGUuY29ubmVjdChcInByZXNzZWRcIiwgKF9zZWxmLCBfbiwgeCwgeSkgPT4geyBpdGVtLnNlY29uZGFyeV9hY3RpdmF0ZSh4LCB5KTsgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kYXJ5OiAgY2xpY2tTZWNvbmRhcnkuY29ubmVjdChcInByZXNzZWRcIiwgKCkgPT4geyBpdGVtLmFib3V0X3RvX3Nob3coKTsgc2VsZi5nZXRfcG9wb3ZlcigpIS5wb3B1cCgpOyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51TW9kZWw6IGl0ZW0uY29ubmVjdChcIm5vdGlmeTo6bWVudS1tb2RlbFwiLCAoKSA9PiB7IHNlbGYuc2V0X21lbnVfbW9kZWwoaXRlbS5tZW51TW9kZWwpOyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25HOiBpdGVtLmNvbm5lY3QoXCJub3RpZnk6OmFjdGlvbi1ncm91cFwiLCAoKSA9PiB7IHNlbGYuaW5zZXJ0X2FjdGlvbl9ncm91cChcImRidXNtZW51XCIsIGl0ZW0uYWN0aW9uR3JvdXApOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrUHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrTWlkZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkX2NvbnRyb2xsZXIoY2xpY2tTZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25EZXN0cm95PXtcbiAgICAgICAgICAgICAgICAoc2VsZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGlja1ByaW1hcnkuZGlzY29ubmVjdChoYW5kbGVycy5wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tNaWRkbGUuZGlzY29ubmVjdChoYW5kbGVycy5taWRkbGUpO1xuICAgICAgICAgICAgICAgICAgICBjbGlja1NlY29uZGFyeS5kaXNjb25uZWN0KGhhbmRsZXJzLnNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZGlzY29ubmVjdChoYW5kbGVycy5tZW51TW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmRpc2Nvbm5lY3QoaGFuZGxlcnMuYWN0aW9uRyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlX2NvbnRyb2xsZXIoY2xpY2tQcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmVfY29udHJvbGxlcihjbGlja01pZGRsZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlX2NvbnRyb2xsZXIoY2xpY2tTZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICA+XG4gICAgICAgIDxpbWFnZSBnaWNvbj17YmluZChpdGVtLCBcImdpY29uXCIpfSBwaXhlbFNpemU9ezE2fSAvPlxuICAgICAgICA8L21lbnVidXR0b24+XG4gICAgKSBhcyBHdGsuTWVudUJ1dHRvbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3lzdGVtVHJheSgpIHtcbiAgICBjb25zdCB0cmF5ID0gVHJheS5nZXRfZGVmYXVsdCgpO1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICAgIDxib3ggXG4gICAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiU3lzdGVtVHJheVwiIF19XG4gICAgICAgICAgICBvcmllbnRhdGlvbj17R3RrLk9yaWVudGF0aW9uLkhPUklaT05UQUx9XG4gICAgICAgICAgICBzcGFjaW5nPXs0fVxuICAgICAgICAgICAgbWFyZ2luRW5kPXs4fVxuICAgICAgICA+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmluZCh0cmF5LCBcIml0ZW1zXCIpLmFzKGl0ZW1zID0+IFxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0+ICggPFRyYXlJdGVtIGl0ZW09e2l0ZW19Lz4pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgIDwvYm94PlxuICAgICk7XG59IiwgImltcG9ydCB7IEd0ayB9IGZyb20gXCJhc3RhbC9ndGs0XCJcbmltcG9ydCB7IFZhcmlhYmxlLCBiaW5kLCB0aW1lb3V0IH0gZnJvbSBcImFzdGFsXCJcbmltcG9ydCB7IGFzdGFsaWZ5IH0gZnJvbSBcImFzdGFsL2d0azRcIjtcblxuY29uc3QgdGltZSA9IFZhcmlhYmxlKHsgY2xvY2s6IFwiXCIsIGRhdGU6IFwiXCIgfSkucG9sbCg2MF8wMDAsXG4gICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRlQ29uc3RydWN0b3IgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvY2s6IGRhdGVDb25zdHJ1Y3Rvci50b0xvY2FsZVRpbWVTdHJpbmcoXCJwdC1iclwiLCB7IGhvdXI6IFwiMi1kaWdpdFwiLCBtaW51dGU6IFwiMi1kaWdpdFwiIH0pLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZUNvbnN0cnVjdG9yLnRvTG9jYWxlRGF0ZVN0cmluZyhcInB0LWJyXCIsIHsgd2Vla2RheTogJ2xvbmcnLCBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJywgeWVhcjogJ251bWVyaWMnIH0pLnJlcGxhY2UoL14uLywgY2hhciA9PiBjaGFyLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgIH07XG4gICAgfVxuKTtcblxuY29uc3QgQ2FsZW5kYXIgPSBhc3RhbGlmeTxHdGsuQ2FsZW5kYXIsIEd0ay5DYWxlbmRhci5Db25zdHJ1Y3RvclByb3BzPihHdGsuQ2FsZW5kYXIsIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7IHJldHVybiBbXSB9LFxuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7fSxcbn0pO1xuXG5mdW5jdGlvbiBNZW51Q2FsZW5kYXIoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gVmFyaWFibGUoXCJOZW5odW1hIGRhdGEgc2VsZWNpb25hZGFcIik7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Ym94IGNzc0NsYXNzZXM9e1sgXCJDYWxlbmRhclwiIF19IG9yaWVudGF0aW9uPXsgR3RrLk9yaWVudGF0aW9uLlZFUlRJQ0FMIH0gb25EZXN0cm95PXsgKCkgPT4geyBzZWxlY3RlZERhdGUuZHJvcCgpIH0gfSA+XG4gICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIkNhbGVuZGFyTGFiZWxcIiBdfSBsYWJlbD17IGJpbmQoc2VsZWN0ZWREYXRlKSB9IC8+XG4gICAgICAgICAgICA8Q2FsZW5kYXJcbiAgICAgICAgICAgICAgICBjc3NDbGFzc2VzPXsgW1wiQ2FsZW5kYXJDb250YWluZXJcIl0gfVxuICAgICAgICAgICAgICAgIHNldHVwPXsoc2VsZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXlTZWxlY3RlZElkID0gc2VsZi5jb25uZWN0KFwiZGF5LXNlbGVjdGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzZWxmLmdldF9kYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGUuc2V0KGBTZWxlY2lvbmFkbzogJHtkYXRlLmZvcm1hdChcIiVkLSVtLSVZXCIpfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4geyBzZWxmLmRpc2Nvbm5lY3QoZGF5U2VsZWN0ZWRJZCk7IH07XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvYm94PlxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEYXRlVGltZSgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8Ym94XG4gICAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiRGF0ZVRpbWVcIiBdfVxuICAgICAgICAgICAgb3JpZW50YXRpb249eyBHdGsuT3JpZW50YXRpb24uVkVSVElDQUwgfVxuICAgICAgICAgICAgb25EZXN0cm95PXsoKSA9PiB7IHRpbWUuZHJvcCgpOyB9fVxuICAgICAgICA+XG4gICAgICAgICAgICA8bWVudWJ1dHRvbiBjc3NDbGFzc2VzPXtbIFwiVGltZVwiIF19IGhhbGlnbj17IEd0ay5BbGlnbi5FTkQgfT5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIlRpbWVMYWJlbFwiIF19IGxhYmVsPXsgYmluZCh0aW1lKS5hcyh0ID0+IGAke3QuY2xvY2t9YCkgfS8+XG4gICAgICAgICAgICAgICAgPHBvcG92ZXIgcG9zaXRpb249eyBHdGsuUG9zaXRpb25UeXBlLlRPUCB9PlxuICAgICAgICAgICAgICAgICAgICA8TWVudUNhbGVuZGFyIC8+XG4gICAgICAgICAgICAgICAgPC9wb3BvdmVyPlxuICAgICAgICAgICAgPC9tZW51YnV0dG9uPlxuICAgICAgICAgICAgPGxhYmVsIGNzc0NsYXNzZXM9e1sgXCJEYXRlXCIgXX0gbGFiZWw9eyBiaW5kKHRpbWUpLmFzKHQgPT4gYCR7dC5kYXRlfWApIH0gLz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE1pbmlUaW1lKCkge1xuICBjb25zdCBzaG91bGRSZXZlYWwgPSBWYXJpYWJsZShmYWxzZSk7XG4gIGNvbnN0IHRyYW5zaXRpb25TcGVlZCA9IDc1MDtcblxuICBmdW5jdGlvbiB0b2dnbGVSZXZlYWwoKSB7IHNob3VsZFJldmVhbC5zZXQoIXNob3VsZFJldmVhbC5nZXQoKSkgfVxuXG4gIHJldHVybiAoXG4gICAgICA8Ym94XG4gICAgICAgIGNzc0NsYXNzZXM9e1sgXCJNaW5pVGltZVwiIF19XG4gICAgICAgIG9uRGVzdHJveT17ICgpID0+IHsgdGltZS5kcm9wKCk7IHNob3VsZFJldmVhbC5kcm9wKCkgfSB9XG4gICAgICAgIG9uSG92ZXJFbnRlcj17ICgpID0+IHRvZ2dsZVJldmVhbCgpIH1cbiAgICAgICAgb25Ib3ZlckxlYXZlPXsgKCkgPT4gdG9nZ2xlUmV2ZWFsKCkgfVxuICAgICAgPlxuICAgICAgICA8cmV2ZWFsZXJcbiAgICAgICAgICByZXZlYWxDaGlsZCA9IHsgYmluZChzaG91bGRSZXZlYWwpLmFzKHMgPT4gIXMpIH1cbiAgICAgICAgICB0cmFuc2l0aW9uVHlwZT17IEd0ay5SZXZlYWxlclRyYW5zaXRpb25UeXBlLlNMSURFX0xFRlQgfVxuICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbj17IHRyYW5zaXRpb25TcGVlZC80IH1cbiAgICAgICAgPlxuICAgICAgICAgIDxsYWJlbCBsYWJlbD17IGJpbmQodGltZSkuYXModCA9PiBgJHt0LmNsb2NrfWApIH0gLz5cbiAgICAgICAgPC9yZXZlYWxlcj5cbiAgICAgICAgPHJldmVhbGVyXG4gICAgICAgICAgcmV2ZWFsQ2hpbGQgPSB7IGJpbmQoc2hvdWxkUmV2ZWFsKS5hcyhzID0+IHMpIH1cbiAgICAgICAgICB0cmFuc2l0aW9uVHlwZT17IEd0ay5SZXZlYWxlclRyYW5zaXRpb25UeXBlLlNMSURFX1JJR0hUIH1cbiAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb249eyB0cmFuc2l0aW9uU3BlZWQgfVxuICAgICAgICA+XG4gICAgICAgIDxsYWJlbCBsYWJlbD17IGJpbmQodGltZSkuYXModCA9PiBgSG9qZSBcdTAwRTk6ICR7dC5kYXRlfWApIH0gLz5cbiAgICAgICAgPC9yZXZlYWxlcj5cbiAgICAgIDwvYm94PlxuICApO1xufVxuIiwgImltcG9ydCB7IEFwcCwgQXN0YWwsIEd0aywgR2RrIH0gZnJvbSBcImFzdGFsL2d0azRcIlxuaW1wb3J0IFN5c3RlbU1vbml0b3IgZnJvbSBcIi4uL21vZHVsZXMvU3lzdGVtTW9uaXRvclwiO1xuaW1wb3J0IEF1ZGlvQ29udHJvbCBmcm9tIFwiLi4vbW9kdWxlcy9BdWRpb0NvbnRyb2xcIjtcbmltcG9ydCBOZXR3b3JrIGZyb20gXCIuLi9tb2R1bGVzL05ldHdvcmtcIjtcbmltcG9ydCBTeXN0ZW1UcmF5IGZyb20gXCIuLi9tb2R1bGVzL1N5c3RlbVRyYXlcIjtcbmltcG9ydCB7IE1pbmlUaW1lIH0gZnJvbSBcIi4uL21vZHVsZXMvRGF0ZVRpbWVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQmFyKGdka21vbml0b3I6IEdkay5Nb25pdG9yKSB7XG4gICAgY29uc3QgeyBUT1AsIExFRlQsIFJJR0hUIH0gPSBBc3RhbC5XaW5kb3dBbmNob3JcblxuICAgIHJldHVybiAoXG4gICAgICAgIDx3aW5kb3dcbiAgICAgICAgICAgIHZpc2libGVcbiAgICAgICAgICAgIGdka21vbml0b3I9eyBnZGttb25pdG9yIH1cbiAgICAgICAgICAgIGV4Y2x1c2l2aXR5PXsgQXN0YWwuRXhjbHVzaXZpdHkuRVhDTFVTSVZFIH1cbiAgICAgICAgICAgIGFuY2hvcj17IFRPUCB8IFJJR0hUIHwgTEVGVCB9XG4gICAgICAgICAgICBhcHBsaWNhdGlvbj17IEFwcCB9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxjZW50ZXJib3ggY3NzQ2xhc3Nlcz17WyBcIkJhclwiIF19IGhhbGlnbj17IEd0ay5BbGlnbi5GSUxMIH0+XG4gICAgICAgICAgICAgICAgPGJveCBoYWxpZ249eyBHdGsuQWxpZ24uU1RBUlQgfT5cbiAgICAgICAgICAgICAgICAgICAgPFN5c3RlbVRyYXkgLz5cbiAgICAgICAgICAgICAgICA8L2JveD5cblxuICAgICAgICAgICAgICAgIDxib3ggaGFsaWduPXsgR3RrLkFsaWduLkNFTlRFUiB9PlxuICAgICAgICAgICAgICAgICAgICA8TWluaVRpbWUgLz5cbiAgICAgICAgICAgICAgICA8L2JveD5cblxuICAgICAgICAgICAgICAgIDxib3ggaGFsaWduPXsgR3RrLkFsaWduLkVORCB9PlxuICAgICAgICAgICAgICAgICAgICA8TmV0d29yayAvPlxuICAgICAgICAgICAgICAgICAgICA8QXVkaW9Db250cm9sIC8+XG4gICAgICAgICAgICAgICAgICAgIDxTeXN0ZW1Nb25pdG9yIC8+XG4gICAgICAgICAgICAgICAgPC9ib3g+XG4gICAgICAgICAgICA8L2NlbnRlcmJveD5cbiAgICAgICAgPC93aW5kb3c+XG4gICAgKTtcbn0iLCAiaW1wb3J0IHsgR3RrLCBHZGsgfSBmcm9tIFwiYXN0YWwvZ3RrNFwiO1xuaW1wb3J0IE1wcmlzIGZyb20gXCJnaTovL0FzdGFsTXByaXNcIjtcbmltcG9ydCB7IEdMaWIsIFZhcmlhYmxlLCBiaW5kIH0gZnJvbSBcImFzdGFsXCI7XG5pbXBvcnQgQ2F2YUNvbnRhaW5lciBmcm9tIFwiLi9DYXZhXCI7XG5cbmNvbnN0IG1lZGlhU3RhdGUgPSBWYXJpYWJsZShcbiAge1xuICAgIGN1cnJlbnRTdGF0ZTogXCJOYWRhIHRvY2FuZG8uLi5cIixcbiAgICBjdXJyZW50Q3NzOiBcIlwiLFxuICAgIGxhc3RQbGF5ZXI6IG51bGwgYXMgTXByaXMuUGxheWVyIHwgbnVsbCxcbiAgICBoYW5kbGVyczogW10gYXMgbnVtYmVyW11cbiAgfVxuKTtcblxubGV0IHVwZGF0ZVRpbWVvdXQ6IEdMaWIuU291cmNlIHwgbnVsbCA9IG51bGw7XG5jb25zdCBERUJPVU5DRV9ERUxBWSA9IDEwMDtcblxuY29uc3QgbXByaXMgPSBNcHJpcy5nZXRfZGVmYXVsdCgpO1xuXG5mdW5jdGlvbiBkaXNjb25uZWN0RnJvbVBsYXllcigpIHtcbiAgY29uc3Qgc3RhdGUgPSBtZWRpYVN0YXRlLmdldCgpO1xuICBcbiAgLy8gQ2FuY2VsYSBxdWFscXVlciBhdHVhbGl6YVx1MDBFN1x1MDBFM28gcGVuZGVudGVcbiAgaWYgKHVwZGF0ZVRpbWVvdXQpIHtcbiAgICBjbGVhclRpbWVvdXQodXBkYXRlVGltZW91dCk7XG4gICAgdXBkYXRlVGltZW91dCA9IG51bGw7XG4gIH1cbiAgXG4gIGlmIChzdGF0ZS5sYXN0UGxheWVyICYmIHN0YXRlLmhhbmRsZXJzLmxlbmd0aCA+IDApIHtcbiAgICAvLyBEZXNjb25lY3RhIHRvZG9zIG9zIGhhbmRsZXJzXG4gICAgc3RhdGUuaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtcbiAgICAgIHN0YXRlLmxhc3RQbGF5ZXIhLmRpc2Nvbm5lY3QoaGFuZGxlcik7XG4gICAgfSk7XG4gIH1cbiAgbWVkaWFTdGF0ZS5zZXQoe1xuICAgIC4uLnN0YXRlLFxuICAgIGxhc3RQbGF5ZXI6IG51bGwsXG4gICAgaGFuZGxlcnM6IFtdLFxuICAgIGN1cnJlbnRDc3M6IFwiXCIsXG4gICAgY3VycmVudFN0YXRlOiBcIk5hZGEgdG9jYW5kby4uLlwiXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjb25uZWN0VG9QbGF5ZXIocGxheWVyOiBNcHJpcy5QbGF5ZXIpIHtcbiAgZGlzY29ubmVjdEZyb21QbGF5ZXIoKTtcblxuICBpZiAoIXBsYXllcikgcmV0dXJuO1xuXG5cbiAgLy8gQ29uZWN0YSBtXHUwMEZBbHRpcGxvcyBzaW5haXMgcGFyYSBtYWlvciBjb25maWFiaWxpZGFkZVxuICBjb25zdCBoYW5kbGVycyA9IFtcbiAgICBwbGF5ZXIuY29ubmVjdChcIm5vdGlmeTo6cGxheWJhY2stc3RhdHVzXCIsICgpID0+IHtcbiAgICAgIHVwZGF0ZU1lZGlhU3RhdGUocGxheWVyKTtcbiAgICB9KSxcbiAgICBwbGF5ZXIuY29ubmVjdChcIm5vdGlmeTo6dGl0bGVcIiwgKCkgPT4ge1xuICAgICAgdXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXIpO1xuICAgIH0pLFxuICAgIHBsYXllci5jb25uZWN0KFwibm90aWZ5OjphcnRpc3RcIiwgKCkgPT4ge1xuICAgICAgdXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXIpO1xuICAgIH0pLFxuICAgIC8vIEFsZ3VucyBwbGF5ZXJzIGVudmlhbSBub3RpZnk6Om1ldGFkYXRhIGVtIHZleiBkb3MgY2FtcG9zIGVzcGVjXHUwMEVEZmljb3NcbiAgICBwbGF5ZXIuY29ubmVjdChcIm5vdGlmeTo6bWV0YWRhdGFcIiwgKCkgPT4ge1xuICAgICAgdXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXIpO1xuICAgIH0pXG4gIF07XG5cbiAgbWVkaWFTdGF0ZS5zZXQoe1xuICAgIC4uLm1lZGlhU3RhdGUuZ2V0KCksXG4gICAgbGFzdFBsYXllcjogcGxheWVyLFxuICAgIGhhbmRsZXJzOiBoYW5kbGVyc1xuICB9KTtcblxuICAvLyBBdHVhbGl6YSBpbWVkaWF0YW1lbnRlXG4gIHVwZGF0ZU1lZGlhU3RhdGUocGxheWVyKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXI6IE1wcmlzLlBsYXllciB8IG51bGwpIHtcbiAgaWYgKHVwZGF0ZVRpbWVvdXQpIHtcbiAgICBjbGVhclRpbWVvdXQodXBkYXRlVGltZW91dCk7XG4gIH1cbiAgXG4gIHVwZGF0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBleGVjdXRlVXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXIpO1xuICAgIHVwZGF0ZVRpbWVvdXQgPSBudWxsO1xuICB9LCBERUJPVU5DRV9ERUxBWSk7XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVVcGRhdGVNZWRpYVN0YXRlKHBsYXllcjogTXByaXMuUGxheWVyIHwgbnVsbCkge1xuICBcbiAgaWYgKCFwbGF5ZXIpIHtcbiAgICBtZWRpYVN0YXRlLnNldCh7XG4gICAgICAuLi5tZWRpYVN0YXRlLmdldCgpLFxuICAgICAgY3VycmVudENzczogXCJcIixcbiAgICAgIGN1cnJlbnRTdGF0ZTogXCJOYWRhIHRvY2FuZG8uLi5cIlxuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgaWYgKCFwbGF5ZXIuYnVzTmFtZSkge1xuICAgICAgY29uc3QgbmV4dFBsYXllciA9IGZpbmRCZXN0UGxheWVyKCk7XG4gICAgICBpZiAobmV4dFBsYXllciAmJiBuZXh0UGxheWVyICE9PSBwbGF5ZXIpIHtcbiAgICAgICAgY29ubmVjdFRvUGxheWVyKG5leHRQbGF5ZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGl0bGUgPSBwbGF5ZXIudGl0bGUgfHwgXCJUXHUwMEVEdHVsbyBkZXNjb25oZWNpZG9cIjtcbiAgICBjb25zdCBhcnRpc3QgPSBwbGF5ZXIuYXJ0aXN0IHx8IFwiQXJ0aXN0YSBkZXNjb25oZWNpZG9cIjtcbiAgICBjb25zdCBzdGF0dXMgPSBwbGF5ZXIucGxheWJhY2tTdGF0dXM7XG5cbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSBNcHJpcy5QbGF5YmFja1N0YXR1cy5QTEFZSU5HOlxuICAgICAgICBtZWRpYVN0YXRlLnNldCh7XG4gICAgICAgICAgLi4ubWVkaWFTdGF0ZS5nZXQoKSxcbiAgICAgICAgICBjdXJyZW50Q3NzOiBcIk1lZGlhUGxheWluZ1wiLFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZTogYFRvY2FuZG8gYWdvcmE6ICR7dGl0bGV9IFx1MjAxMyAke2FydGlzdH1gXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTXByaXMuUGxheWJhY2tTdGF0dXMuUEFVU0VEOlxuICAgICAgICBtZWRpYVN0YXRlLnNldCh7XG4gICAgICAgICAgLi4ubWVkaWFTdGF0ZS5nZXQoKSxcbiAgICAgICAgICBjdXJyZW50Q3NzOiBcIk1lZGlhUGxheWluZ1wiLFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZTogYFBhdXNhZG86ICR7dGl0bGV9IFx1MjAxMyAke2FydGlzdH1gXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTXByaXMuUGxheWJhY2tTdGF0dXMuU1RPUFBFRDpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIG1lZGlhU3RhdGUuc2V0KHtcbiAgICAgICAgICAuLi5tZWRpYVN0YXRlLmdldCgpLFxuICAgICAgICAgIGN1cnJlbnRDc3M6IFwiXCIsXG4gICAgICAgICAgY3VycmVudFN0YXRlOiBcIk5hZGEgdG9jYW5kby4uLlwiXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKFwiRXJybyBhbyBhY2Vzc2FyIHByb3ByaWVkYWRlcyBkbyBwbGF5ZXIgTVBSSVM6XCIsIGVycm9yKTtcbiAgICAvLyBUZW50YSBlbmNvbnRyYXIgdW0gcGxheWVyIHZcdTAwRTFsaWRvXG4gICAgY29uc3QgbmV4dFBsYXllciA9IGZpbmRCZXN0UGxheWVyKCk7XG4gICAgaWYgKG5leHRQbGF5ZXIgJiYgbmV4dFBsYXllciAhPT0gcGxheWVyKSB7XG4gICAgICBjb25uZWN0VG9QbGF5ZXIobmV4dFBsYXllcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lZGlhU3RhdGUuc2V0KHtcbiAgICAgICAgLi4ubWVkaWFTdGF0ZS5nZXQoKSxcbiAgICAgICAgY3VycmVudENzczogXCJcIixcbiAgICAgICAgY3VycmVudFN0YXRlOiBcIk5hZGEgdG9jYW5kby4uLlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZEJlc3RQbGF5ZXIoKTogTXByaXMuUGxheWVyIHwgbnVsbCB7XG4gIGNvbnN0IHBsYXllcnMgPSBtcHJpcy5wbGF5ZXJzO1xuICBcbiAgaWYgKHBsYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCB2YWxpZFBsYXllcnMgPSBwbGF5ZXJzLmZpbHRlcihwID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHAuYnVzTmFtZSAmJiBwLmJ1c05hbWUubGVuZ3RoID4gMDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICh2YWxpZFBsYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBwbGF5aW5nUGxheWVyID0gdmFsaWRQbGF5ZXJzLmZpbmQocCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwLnBsYXliYWNrU3RhdHVzID09PSBNcHJpcy5QbGF5YmFja1N0YXR1cy5QTEFZSU5HO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG4gIFxuICBpZiAocGxheWluZ1BsYXllcikge1xuICAgIHJldHVybiBwbGF5aW5nUGxheWVyO1xuICB9XG5cbiAgY29uc3QgcGF1c2VkUGxheWVyID0gdmFsaWRQbGF5ZXJzLmZpbmQocCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwLnBsYXliYWNrU3RhdHVzID09PSBNcHJpcy5QbGF5YmFja1N0YXR1cy5QQVVTRUQ7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9KTtcbiAgXG4gIGlmIChwYXVzZWRQbGF5ZXIpIHtcbiAgICByZXR1cm4gcGF1c2VkUGxheWVyO1xuICB9XG5cbiAgcmV0dXJuIHZhbGlkUGxheWVyc1swXTtcbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZU1wcmlzKCkge1xuICBjb25zb2xlLmxvZyhcIkluaWNpYWxpemFuZG8gTVBSSVMuLi5cIik7XG4gIGNvbnN0IGluaXRpYWxQbGF5ZXIgPSBmaW5kQmVzdFBsYXllcigpO1xuICBpZiAoaW5pdGlhbFBsYXllcikge1xuICAgIGNvbm5lY3RUb1BsYXllcihpbml0aWFsUGxheWVyKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcIk5lbmh1bSBwbGF5ZXIgZGlzcG9uXHUwMEVEdmVsIG5hIGluaWNpYWxpemFcdTAwRTdcdTAwRTNvXCIpO1xuICB9XG59XG5cblxuXG4vLyBIYW5kbGVycyBkbyBNUFJJU1xuY29uc3QgbXByaXNIYW5kbGVycyA9IFtcbiAgbXByaXMuY29ubmVjdChcInBsYXllci1hZGRlZFwiLCAoXywgcGxheWVyOiBNcHJpcy5QbGF5ZXIpID0+IHtcbiAgICBjb25zdCBjdXJyZW50UGxheWVyID0gbWVkaWFTdGF0ZS5nZXQoKS5sYXN0UGxheWVyO1xuICAgIFxuICAgIGlmICghY3VycmVudFBsYXllcikge1xuICAgICAgY29ubmVjdFRvUGxheWVyKHBsYXllcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChwbGF5ZXIucGxheWJhY2tTdGF0dXMgPT09IE1wcmlzLlBsYXliYWNrU3RhdHVzLlBMQVlJTkcpIHtcbiAgICAgICAgICBjb25uZWN0VG9QbGF5ZXIocGxheWVyKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRXJybyBhbyB2ZXJpZmljYXIgc3RhdHVzIGRvIG5vdm8gcGxheWVyOlwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9KSxcblxuICBtcHJpcy5jb25uZWN0KFwicGxheWVyLWNsb3NlZFwiLCAoXywgcGxheWVyOiBNcHJpcy5QbGF5ZXIpID0+IHtcbiAgICBjb25zdCBjdXJyZW50UGxheWVyID0gbWVkaWFTdGF0ZS5nZXQoKS5sYXN0UGxheWVyO1xuXG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIgPT09IHBsYXllcikge1xuICAgICAgY29uc3QgbmV4dFBsYXllciA9IGZpbmRCZXN0UGxheWVyKCk7XG4gICAgICBpZiAobmV4dFBsYXllcikge1xuICAgICAgICBjb25uZWN0VG9QbGF5ZXIobmV4dFBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNjb25uZWN0RnJvbVBsYXllcigpO1xuICAgICAgfVxuICAgIH1cbiAgfSlcbl07XG5cbmZ1bmN0aW9uIE1wcmlzSW5mbygpIHtcbiAgcmV0dXJuIChcbiAgICA8Ym94IGNzc0NsYXNzZXM9e1tcIk1wcmlzSW5mb1wiXX0gdmV4cGFuZD5cbiAgICAgIDxsYWJlbCBcbiAgICAgICAgY3NzQ2xhc3Nlcz17W1wiTXByaXNMYWJlbFwiXX0gXG4gICAgICAgIGxhYmVsPXtiaW5kKG1lZGlhU3RhdGUpLmFzKGMgPT4gYy5jdXJyZW50U3RhdGUpfSBcbiAgICAgICAgZWxsaXBzaXplPXszfSBcbiAgICAgICAgbWF4V2lkdGhDaGFycz17NzV9IFxuICAgICAgLz5cbiAgICA8L2JveD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWVkaWEoKSB7XG4gIC8vIEluaWNpYWxpemEgbyBNUFJJUyBxdWFuZG8gbyBjb21wb25lbnRlIFx1MDBFOSBjcmlhZG9cbiAgaW5pdGlhbGl6ZU1wcmlzKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8Ym94XG4gICAgICBjc3NDbGFzc2VzPXtiaW5kKG1lZGlhU3RhdGUpLmFzKG0gPT4gW1wiTWVkaWFcIiwgbS5jdXJyZW50Q3NzXSl9XG4gICAgICBvcmllbnRhdGlvbj17R3RrLk9yaWVudGF0aW9uLlZFUlRJQ0FMfVxuICAgICAgc2V0dXA9eyhzZWxmKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsaWNrID0gbmV3IEd0ay5HZXN0dXJlQ2xpY2soKTtcbiAgICAgICAgY2xpY2suc2V0X2J1dHRvbihHZGsuQlVUVE9OX1BSSU1BUlkpO1xuICAgICAgICBjbGljay5jb25uZWN0KFwicHJlc3NlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcGxheWVyID0gbWVkaWFTdGF0ZS5nZXQoKS5sYXN0UGxheWVyO1xuICAgICAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHBsYXllci5wbGF5X3BhdXNlKCk7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZXhlY3V0ZVVwZGF0ZU1lZGlhU3RhdGUocGxheWVyKSwgMTAwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm8gYW8gcGF1c2FyL3RvY2FyOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5hZGRfY29udHJvbGxlcihjbGljayk7XG4gICAgICB9fVxuICAgICAgb25EZXN0cm95PXsoKSA9PiB7XG4gICAgICAgIGRpc2Nvbm5lY3RGcm9tUGxheWVyKCk7XG4gICAgICAgIG1lZGlhU3RhdGUuZHJvcCgpO1xuICAgICAgICBtcHJpc0hhbmRsZXJzLmZvckVhY2goaCA9PiBtcHJpcy5kaXNjb25uZWN0KGgpKTtcbiAgICAgIH19XG4gICAgPlxuICAgICAgPENhdmFDb250YWluZXIgLz5cbiAgICAgIDxNcHJpc0luZm8gLz5cbiAgICA8L2JveD5cbiAgKTtcbn0iLCAiaW1wb3J0IHsgR3RrIH0gZnJvbSBcImFzdGFsL2d0azRcIjtcbmltcG9ydCBHc2sgZnJvbSAnZ2k6Ly9Hc2snO1xuaW1wb3J0IEFzdGFsQ2F2YSBmcm9tIFwiZ2k6Ly9Bc3RhbENhdmE/dmVyc2lvbj0wLjFcIjtcbmltcG9ydCBHT2JqZWN0IGZyb20gJ2dpOi8vR09iamVjdCc7XG5pbXBvcnQgR3JhcGhlbmUgZnJvbSBcImdpOi8vR3JhcGhlbmU/dmVyc2lvbj0xLjBcIjtcblxuY29uc3QgQ2F2YUNvbmZpZyA9IHtcbiAgYXV0b3NlbnM6IHRydWUsXG4gIGJhcnM6IDQwLFxuICBiYXJXaWR0aDogMjAsXG4gIGJhckhlaWdodDogMTQwLFxuICBmcmFtZXJhdGU6IDYwLFxuICBpbnB1dDogQXN0YWxDYXZhLklucHV0LlBJUEVXSVJFLFxuICBub2lzZVJlZHVjdGlvbjogMC43NyxcbiAgc2Vuc2l0aXZpdHk6IDAuNzUsXG4gIHN0ZXJlbzogZmFsc2UsXG4gIGxlcnBGYWN0b3I6IDFcbn07XG5cbmNvbnN0IGNhdmFJbnN0YW5jZSA9IEFzdGFsQ2F2YS5nZXRfZGVmYXVsdCgpO1xubGV0IGhhbmRsZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG5jb25zdCBDYXZhID0gR09iamVjdC5yZWdpc3RlckNsYXNzKHsgR1R5cGVOYW1lOiAnQ2F2YScgfSwgY2xhc3MgQ2F2YSBleHRlbmRzIEd0ay5EcmF3aW5nQXJlYSB7XG4gICAgcHJpdmF0ZSBfcmVjdCA9IG5ldyBHcmFwaGVuZS5SZWN0KCk7XG4gICAgcHJpdmF0ZSBfc2l6ZSA9IG5ldyBHcmFwaGVuZS5TaXplKCk7XG4gICAgcHJpdmF0ZSBidWlsZGVyID0gbmV3IEdzay5QYXRoQnVpbGRlcigpO1xuICAgIHByaXZhdGUgY2xpcCE6IEdzay5Sb3VuZGVkUmVjdCB8IG51bGw7XG4gICAgcHJpdmF0ZSB2YWx1ZXMhOiBGbG9hdDMyQXJyYXk7XG4gICAgcHJpdmF0ZSBub3JtITogRmxvYXQzMkFycmF5O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5zZXR1cFJlY3QoKTtcbiAgICAgIHRoaXMuc2V0dXBDYXZhKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cFJlY3QoKSB7XG4gICAgICB0aGlzLnNldF9zaXplX3JlcXVlc3QoQ2F2YUNvbmZpZy5iYXJXaWR0aCAqIENhdmFDb25maWcuYmFycywgQ2F2YUNvbmZpZy5iYXJIZWlnaHQpO1xuICAgICAgdGhpcy5jbGlwID0gbmV3IEdzay5Sb3VuZGVkUmVjdCgpO1xuICAgICAgdGhpcy5fc2l6ZS5pbml0KDcsIDcpO1xuICAgICAgdGhpcy5fcmVjdC5pbml0KDAsIDAsIHRoaXMuZ2V0X2FsbG9jYXRlZF93aWR0aCgpLCB0aGlzLmdldF9hbGxvY2F0ZWRfaGVpZ2h0KCkpO1xuICAgICAgdGhpcy5jbGlwLmluaXQodGhpcy5fcmVjdCwgdGhpcy5fc2l6ZSwgdGhpcy5fc2l6ZSwgR3JhcGhlbmUuU2l6ZS56ZXJvKCksIEdyYXBoZW5lLlNpemUuemVybygpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwQ2F2YSgpIHtcbiAgICAgIGlmKGNhdmFJbnN0YW5jZSkge1xuICAgICAgICBjYXZhSW5zdGFuY2Uuc2V0X2F1dG9zZW5zKENhdmFDb25maWcuYXV0b3NlbnMpO1xuICAgICAgICBjYXZhSW5zdGFuY2Uuc2V0X2JhcnMoQ2F2YUNvbmZpZy5iYXJzKTtcbiAgICAgICAgY2F2YUluc3RhbmNlLnNldF9mcmFtZXJhdGUoQ2F2YUNvbmZpZy5mcmFtZXJhdGUpO1xuICAgICAgICBjYXZhSW5zdGFuY2Uuc2V0X2lucHV0KENhdmFDb25maWcuaW5wdXQpO1xuICAgICAgICBjYXZhSW5zdGFuY2Uuc2V0X25vaXNlX3JlZHVjdGlvbihDYXZhQ29uZmlnLm5vaXNlUmVkdWN0aW9uKTtcbiAgICAgICAgY2F2YUluc3RhbmNlLnNldF9zdGVyZW8oQ2F2YUNvbmZpZy5zdGVyZW8pO1xuICAgICAgICB0aGlzLmFkZF9jc3NfY2xhc3MoXCJDYXZhQ29udGFpbmVyXCIpO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoQ2F2YUNvbmZpZy5iYXJzKTtcbiAgICAgICAgdGhpcy5ub3JtID0gbmV3IEZsb2F0MzJBcnJheShDYXZhQ29uZmlnLmJhcnMpO1xuXG4gICAgICAgIGhhbmRsZXIgPSBjYXZhSW5zdGFuY2UuY29ubmVjdChcIm5vdGlmeTo6dmFsdWVzXCIsICgpID0+IHsgdGhpcy5xdWV1ZV9kcmF3KCkgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgb3ZlcnJpZGUgdmZ1bmNfc2l6ZV9hbGxvY2F0ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgdGhpcy5jbGlwID0gbnVsbDtcbiAgICAgIHN1cGVyLnZmdW5jX3NpemVfYWxsb2NhdGUod2lkdGgsIGhlaWdodCwgLTEpO1xuICAgIH1cblxuICAgIG92ZXJyaWRlIHZmdW5jX3NuYXBzaG90KHNuYXBzaG90OiBHdGsuU25hcHNob3QpOiB2b2lkIHtcbiAgICAgIGlmICghY2F2YUluc3RhbmNlKSByZXR1cm47XG5cbiAgICAgIGlmICghdGhpcy5jbGlwKSB7XG4gICAgICAgIHRoaXMuY2xpcCA9IG5ldyBHc2suUm91bmRlZFJlY3QoKTtcbiAgICAgICAgdGhpcy5fcmVjdC5pbml0KDAsIDAsIHRoaXMuZ2V0X2FsbG9jYXRlZF93aWR0aCgpLCB0aGlzLmdldF9hbGxvY2F0ZWRfaGVpZ2h0KCkpO1xuICAgICAgICB0aGlzLmNsaXAuaW5pdCh0aGlzLl9yZWN0LCB0aGlzLl9zaXplLCB0aGlzLl9zaXplLCBHcmFwaGVuZS5TaXplLnplcm8oKSwgR3JhcGhlbmUuU2l6ZS56ZXJvKCkpO1xuICAgICAgfVxuXG4gICAgICBzbmFwc2hvdC5wdXNoX3JvdW5kZWRfY2xpcCh0aGlzLmNsaXApO1xuICAgICAgdGhpcy5kcmF3X2NhdG11bGxfcm9tKHNuYXBzaG90KTtcbiAgICAgIHNuYXBzaG90LnBvcCgpO1xuICAgIH1cblxuICAgIC8vIENvZGUgZnJvbSBLb3RvbnRyaW9uLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2tvdG9udHJpb24va29tcGFzcy9ibG9iL21haW4vbGlia29tcGFzcy9zcmMvY2F2YS52YWxhXG4gICAgcHJpdmF0ZSBkcmF3X2NhdG11bGxfcm9tKHNuYXBzaG90OiBHdGsuU25hcHNob3QpOiB2b2lkIHtcbiAgICAgIGlmKCFjYXZhSW5zdGFuY2UpIHJldHVybjtcbiAgICAgIGlmKCF0aGlzLmJ1aWxkZXIpIHRoaXMuYnVpbGRlciA9IG5ldyBHc2suUGF0aEJ1aWxkZXIoKTtcblxuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldF9hbGxvY2F0ZWRfd2lkdGgoKTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0X2FsbG9jYXRlZF9oZWlnaHQoKTtcbiAgICAgIGNvbnN0IHJhdyA9IGNhdmFJbnN0YW5jZS5nZXRfdmFsdWVzKCk7XG4gICAgICBjb25zdCBiYXJzID0gQ2F2YUNvbmZpZy5iYXJzO1xuICAgICAgY29uc3QgYmFyV2lkdGggPSB3aWR0aCAvIChiYXJzLTEpO1xuICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmdldF9jb2xvcigpO1xuICAgICAgY29uc3Qgc2VucyA9IENhdmFDb25maWcuc2Vuc2l0aXZpdHk7XG4gICAgICBjb25zdCBsZXJwID0gQ2F2YUNvbmZpZy5sZXJwRmFjdG9yO1xuICAgICAgY29uc3QgaW52U2l4ID0gMS82O1xuXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYmFyczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZSYXcgPSByYXdbaV0gKiBzZW5zO1xuICAgICAgICBjb25zdCB2ID0gdGhpcy52YWx1ZXNbaV0gKz0gKHZSYXcgLSB0aGlzLnZhbHVlc1tpXSkgKiBsZXJwO1xuICAgICAgICB0aGlzLm5vcm1baV0gPSBoZWlnaHQgLSBoZWlnaHQgKiB2O1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJ1aWxkZXIubW92ZV90bygwLCB0aGlzLm5vcm1bMF0pO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhcnMgLSAxOyBpKyspIHtcbiAgICAgICAgY29uc3QgcDB4ID0gKGkgLSAxKSAqIGJhcldpZHRoO1xuICAgICAgICBjb25zdCBwMHkgPSB0aGlzLm5vcm1baSA+IDAgPyBpIC0gMSA6IDBdO1xuICAgICAgICBjb25zdCBwMXggPSBpICogYmFyV2lkdGg7XG4gICAgICAgIGNvbnN0IHAxeSA9IHRoaXMubm9ybVtpXTtcbiAgICAgICAgY29uc3QgcDJ4ID0gKGkgKyAxKSAqIGJhcldpZHRoO1xuICAgICAgICBjb25zdCBwMnkgPSB0aGlzLm5vcm1baSArIDFdO1xuICAgICAgICBjb25zdCBwM3ggPSAoaSArIDIpICogYmFyV2lkdGg7XG4gICAgICAgIGNvbnN0IHAzeSA9IHRoaXMubm9ybVtpICsgMiA8IGJhcnMgPyBpICsgMiA6IGJhcnMgLSAxXTtcblxuICAgICAgICBjb25zdCBjMXggPSBwMXggKyAocDJ4IC0gcDB4KSAqIGludlNpeDtcbiAgICAgICAgY29uc3QgYzF5ID0gcDF5ICsgKHAyeSAtIHAweSkgKiBpbnZTaXg7XG4gICAgICAgIGNvbnN0IGMyeCA9IHAyeCAtIChwM3ggLSBwMXgpICogaW52U2l4O1xuICAgICAgICBjb25zdCBjMnkgPSBwMnkgLSAocDN5IC0gcDF5KSAqIGludlNpeDtcblxuICAgICAgICB0aGlzLmJ1aWxkZXIuY3ViaWNfdG8oYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnVpbGRlci5saW5lX3RvKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgdGhpcy5idWlsZGVyLmxpbmVfdG8oMCwgaGVpZ2h0KTtcblxuICAgICAgc25hcHNob3QuYXBwZW5kX2ZpbGwodGhpcy5idWlsZGVyLnRvX3BhdGgoKSwgR3NrLkZpbGxSdWxlLldJTkRJTkcsIGNvbG9yKTtcbiAgICB9XG5cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDYXZhQ29udGFpbmVyKCkge1xuICByZXR1cm4gKFxuICAgICAgPGJveFxuICAgICAgICBzZXR1cD17XG4gICAgICAgICAgKHNlbGYpID0+IHNlbGYuc2V0X3NpemVfcmVxdWVzdChDYXZhQ29uZmlnLmJhcldpZHRoICogQ2F2YUNvbmZpZy5iYXJzLCBDYXZhQ29uZmlnLmJhckhlaWdodClcbiAgICAgICAgfVxuICAgICAgICBvbkRlc3Ryb3k9e1xuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGlmKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIGNhdmFJbnN0YW5jZT8uZGlzY29ubmVjdChoYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgID5cbiAgICAgICAgPENhdmEgLz5cbiAgICAgIDwvYm94PlxuICApO1xufVxuIiwgImltcG9ydCB7IEFwcCwgQXN0YWwsIEd0aywgR2RrIH0gZnJvbSBcImFzdGFsL2d0azRcIjtcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSBcIi4uL21vZHVsZXMvRGF0ZVRpbWVcIjtcbmltcG9ydCBNZWRpYSBmcm9tIFwiLi4vbW9kdWxlcy9NZWRpYVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCYWNrZ3JvdW5kKGdka21vbml0b3I6IEdkay5Nb25pdG9yKSB7XG4gICAgY29uc3QgeyBCT1RUT00sIFJJR0hULCBMRUZUIH0gPSBBc3RhbC5XaW5kb3dBbmNob3JcblxuICAgIHJldHVybiAoXG4gICAgICAgIDx3aW5kb3dcbiAgICAgICAgICAgIHZpc2libGVcbiAgICAgICAgICAgIGdka21vbml0b3I9eyBnZGttb25pdG9yIH1cbiAgICAgICAgICAgIGV4Y2x1c2l2aXR5PXsgQXN0YWwuRXhjbHVzaXZpdHkuSUdOT1JFIH1cbiAgICAgICAgICAgIGxheWVyPXsgQXN0YWwuTGF5ZXIuQk9UVE9NIH1cbiAgICAgICAgICAgIGFuY2hvcj17IEJPVFRPTSB8IExFRlQgfCBSSUdIVCB9XG4gICAgICAgICAgICBhcHBsaWNhdGlvbj17IEFwcCB9XG4gICAgICAgICAgICBwb3B1cD17IGZhbHNlIH1cbiAgICAgICAgPlxuICAgICAgICAgICAgPGNlbnRlcmJveCBjc3NDbGFzc2VzPXtbXCJCYWNrZ3JvdW5kXCJdfSBoYWxpZ249e0d0ay5BbGlnbi5GSUxMfT5cbiAgICAgICAgICAgICAgICA8Ym94IGNzc0NsYXNzZXM9e1sgXCJCYWNrZ3JvdW5kTGVmdE1vZHVsZXNcIiBdfSBoYWxpZ249eyBHdGsuQWxpZ24uU1RBUlQgfT5cbiAgICAgICAgICAgICAgICAgICAgPE1lZGlhIC8+XG4gICAgICAgICAgICAgICAgPC9ib3g+XG4gICAgICAgICAgICAgICAgPGJveCBjc3NDbGFzc2VzPXtbIFwiQmFja2dyb3VuZExlZnRNb2R1bGVzXCIgXX0gaGFsaWduPXsgR3RrLkFsaWduLkNFTlRFUiB9IGhleHBhbmQ+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwvYm94PlxuICAgICAgICAgICAgICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIkJhY2tncm91bmRSaWdodE1vZHVsZXNcIiBdfSBoYWxpZ249eyBHdGsuQWxpZ24uRU5EIH0+XG4gICAgICAgICAgICAgICAgICAgIDxEYXRlVGltZSAvPlxuICAgICAgICAgICAgICAgIDwvYm94PlxuICAgICAgICAgICAgPC9jZW50ZXJib3g+XG4gICAgICAgIDwvd2luZG93PlxuICAgICk7XG59IiwgImltcG9ydCB7IEFwcCwgR2RrLCBHdGsgfSBmcm9tIFwiYXN0YWwvZ3RrNFwiXG5pbXBvcnQgc3R5bGUgZnJvbSBcIi4vc3R5bGUuc2Nzc1wiXG5pbXBvcnQgQmFyIGZyb20gXCIuL3dpZGdldC9CYXJcIlxuaW1wb3J0IEJhY2tncm91bmQgZnJvbSBcIi4vd2lkZ2V0L0JhY2tncm91bmRcIlxuXG5BcHAuc3RhcnQoe1xuICAgIGluc3RhbmNlTmFtZTogXCJBZ3NFY29zeXN0ZW1cIixcbiAgICBjc3M6IFwiXCIsXG4gICAgbWFpbigpIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgR3RrLkNzc1Byb3ZpZGVyKCk7XG4gICAgICAgIHByb3ZpZGVyLmxvYWRfZnJvbV9zdHJpbmcoc3R5bGUpO1xuICAgICAgICBHdGsuU3R5bGVDb250ZXh0LmFkZF9wcm92aWRlcl9mb3JfZGlzcGxheShHZGsuRGlzcGxheS5nZXRfZGVmYXVsdCgpISwgcHJvdmlkZXIsIEd0ay5TVFlMRV9QUk9WSURFUl9QUklPUklUWV9VU0VSKTtcblxuICAgICAgICBBcHAuZ2V0X21vbml0b3JzKCkubWFwKFxuICAgICAgICAgICAgKG1vbml0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBCYXIobW9uaXRvcik7XG4gICAgICAgICAgICAgICAgQmFja2dyb3VuZChtb25pdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG59KVxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUFBLE9BQU9BLFlBQVc7QUFDbEIsT0FBT0MsVUFBUztBQUNoQixPQUFPQyxVQUFTOzs7QUNGaEIsT0FBT0MsWUFBVzs7O0FDQVgsSUFBTSxXQUFXLENBQUMsUUFBZ0IsSUFDcEMsUUFBUSxtQkFBbUIsT0FBTyxFQUNsQyxXQUFXLEtBQUssR0FBRyxFQUNuQixZQUFZO0FBRVYsSUFBTSxXQUFXLENBQUMsUUFBZ0IsSUFDcEMsUUFBUSxtQkFBbUIsT0FBTyxFQUNsQyxXQUFXLEtBQUssR0FBRyxFQUNuQixZQUFZO0FBY1YsSUFBTSxVQUFOLE1BQU0sU0FBZTtBQUFBLEVBQ2hCLGNBQWMsQ0FBQyxNQUFXO0FBQUEsRUFFbEM7QUFBQSxFQUNBO0FBQUEsRUFTQSxPQUFPLEtBQUssU0FBcUMsTUFBZTtBQUM1RCxXQUFPLElBQUksU0FBUSxTQUFTLElBQUk7QUFBQSxFQUNwQztBQUFBLEVBRVEsWUFBWSxTQUE0QyxNQUFlO0FBQzNFLFNBQUssV0FBVztBQUNoQixTQUFLLFFBQVEsUUFBUSxTQUFTLElBQUk7QUFBQSxFQUN0QztBQUFBLEVBRUEsV0FBVztBQUNQLFdBQU8sV0FBVyxLQUFLLFFBQVEsR0FBRyxLQUFLLFFBQVEsTUFBTSxLQUFLLEtBQUssTUFBTSxFQUFFO0FBQUEsRUFDM0U7QUFBQSxFQUVBLEdBQU0sSUFBaUM7QUFDbkMsVUFBTUMsUUFBTyxJQUFJLFNBQVEsS0FBSyxVQUFVLEtBQUssS0FBSztBQUNsRCxJQUFBQSxNQUFLLGNBQWMsQ0FBQyxNQUFhLEdBQUcsS0FBSyxZQUFZLENBQUMs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QixHQUFHLFFBQVNDLEtBQUksTUFBTSxRQUFTLFNBQU8sTUFFakY7QUFBQSxRQUNBLGdCQUFBRCxLQUFDLFNBQUksWUFBWSxDQUFFLHdCQUF5QixHQUFHLFFBQVNDLEtBQUksTUFBTSxLQUM5RCwwQkFBQUQsS0FBQyxZQUFTLEdBQ2Q7QUFBQSxTQUNKO0FBQUE7QUFBQSxFQUNKO0FBRVI7OztBQ3pCQSxZQUFJLE1BQU07QUFBQSxFQUNOLGNBQWM7QUFBQSxFQUNkLEtBQUs7QUFBQSxFQUNMLE9BQU87QUFDSCxVQUFNLFdBQVcsSUFBSUUsS0FBSSxZQUFZO0FBQ3JDLGFBQVMsaUJBQWlCLGFBQUs7QUFDL0IsSUFBQUEsS0FBSSxhQUFhLHlCQUF5QkMsS0FBSSxRQUFRLFlBQVksR0FBSSxVQUFVRCxLQUFJLDRCQUE0QjtBQUVoSCxnQkFBSSxhQUFhLEVBQUU7QUFBQSxNQUNmLENBQUMsWUFBWTtBQUNULFlBQUksT0FBTztBQUNYLG1CQUFXLE9BQU87QUFBQSxNQUN0QjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0osQ0FBQzsiLAogICJuYW1lcyI6IFsiQXN0YWwiLCAiR3RrIiwgIkdkayIsICJBc3RhbCIsICJiaW5kIiwgImludGVydmFsIiwgIkFzdGFsIiwgIkFzdGFsIiwgIkFzdGFsIiwgInYiLCAiaW50ZXJ2YWwiLCAiaGFuZGxlciIsICJjdG9ycyIsICJHdGsiLCAiQXN0YWwiLCAic25ha2VpZnkiLCAicGF0Y2giLCAiTXByaXMiLCAiV2lmaSIsICJXcCIsICJHdGsiLCAiQXN0YWwiLCAiQXN0YWwiLCAiR3RrIiwgIkd0ayIsICJBc3RhbCIsICJjaCIsICJkZWZhdWx0IiwgIkFzdGFsIiwgIkdPYmplY3QiLCAiZGVmYXVsdCIsICJHT2JqZWN0IiwgImpzeCIsICJqc3giLCAiR3RrIiwgIkdkayIsICJoYW5kbGVycyIsICJkZWZhdWx0IiwgImpzeCIsICJqc3giLCAiaGFuZGxlcnMiLCAiR3RrIiwgIkdkayIsICJqc3giLCAiR3RrIiwgImpzeCIsICJBc3RhbCIsICJqc3giLCAiR3RrIiwgIkdPYmplY3QiLCAiR09iamVjdCIsICJDYXZhIiwgIkd0ayIsICJqc3giLCAiaGFuZGxlciIsICJoYW5kbGVycyIsICJqc3giLCAiR3RrIiwgIkdkayIsICJBc3RhbCIsICJqc3giLCAiR3RrIiwgIkd0ayIsICJHZGsiXQp9Cg==
