// ../../../../usr/share/astal/gjs/gtk4/index.ts
import Astal6 from "gi://Astal?version=4.0";
import Gtk4 from "gi://Gtk?version=4.0";
import Gdk2 from "gi://Gdk?version=4.0";

// ../../../../usr/share/astal/gjs/variable.ts
import Astal3 from "gi://AstalIO";

// ../../../../usr/share/astal/gjs/binding.ts
var snakeify = (str) => str.replace(/([a-z])([A-Z])/g, "$1_$2").replaceAll("-", "_").toLowerCase();
var kebabify = (str) => str.replace(/([a-z])([A-Z])/g, "$1-$2").replaceAll("_", "-").toLowerCase();
var Binding = class _Binding {
  transformFn = (v) => v;
  #emitter;
  #prop;
  static bind(emitter, prop) {
    return new _Binding(emitter, prop);
  }
  constructor(emitter, prop) {
    this.#emitter = emitter;
    this.#prop = prop && kebabify(prop);
  }
  toString() {
    return `Binding<${this.#emitter}${this.#prop ? `, "${this.#prop}"` : ""}>`;
  }
  as(fn) {
    const bind2 = new _Binding(this.#emitter, this.#prop);
    bind2.transformFn = (v) => fn(this.transformFn(v));
    return bind2;
  }
  get() {
    if (typeof this.#emitter.get === "function")
      return this.transformFn(this.#emitter.get());
    if (typeof this.#prop === "string") {
      const getter = `get_${snakeify(this.#prop)}`;
      if (typeof this.#emitter[getter] === "function")
        return this.transformFn(this.#emitter[getter]());
      return this.transformFn(this.#emitter[this.#prop]);
    }
    throw Error("can not get value of binding");
  }
  subscribe(callback) {
    if (typeof this.#emitter.subscribe === "function") {
      return this.#emitter.subscribe(() => {
        callback(this.get());
      });
    } else if (typeof this.#emitter.connect === "function") {
      const signal = `notify::${this.#prop}`;
      const id = this.#emitter.connect(signal, () => {
        callback(this.get());
      });
      return () => {
        this.#emitter.disconnect(id);
      };
    }
    throw Error(`${this.#emitter} is not bindable`);
  }
};
var { bind } = Binding;
var binding_default = Binding;

// ../../../../usr/share/astal/gjs/time.ts
import Astal from "gi://AstalIO";
var Time = Astal.Time;
function interval(interval2, callback) {
  return Astal.Time.interval(interval2, () => void callback?.());
}

// ../../../../usr/share/astal/gjs/process.ts
import Astal2 from "gi://AstalIO";
var Process = Astal2.Process;
function subprocess(argsOrCmd, onOut = print, onErr = printerr) {
  const args = Array.isArray(argsOrCmd) || typeof argsOrCmd === "string";
  const { cmd, err, out } = {
    cmd: args ? argsOrCmd : argsOrCmd.cmd,
    err: args ? onErr : argsOrCmd.err || onErr,
    out: args ? onOut : argsOrCmd.out || onOut
  };
  const proc = Array.isArray(cmd) ? Astal2.Process.subprocessv(cmd) : Astal2.Process.subprocess(cmd);
  proc.connect("stdout", (_, stdout) => out(stdout));
  proc.connect("stderr", (_, stderr) => err(stderr));
  return proc;
}
function execAsync(cmd) {
  return new Promise((resolve, reject) => {
    if (Array.isArray(cmd)) {
      Astal2.Process.exec_asyncv(cmd, (_, res) => {
        try {
          resolve(Astal2.Process.exec_asyncv_finish(res));
        } catch (error) {
          reject(error);
        }
      });
    } else {
      Astal2.Process.exec_async(cmd, (_, res) => {
        try {
          resolve(Astal2.Process.exec_finish(res));
        } catch (error) {
          reject(error);
        }
      });
    }
  });
}

// ../../../../usr/share/astal/gjs/variable.ts
var VariableWrapper = class extends Function {
  variable;
  errHandler = console.error;
  _value;
  _poll;
  _watch;
  pollInterval = 1e3;
  pollExec;
  pollTransform;
  pollFn;
  watchTransform;
  watchExec;
  constructor(init) {
    super();
    this._value = init;
    this.variable = new Astal3.VariableBase();
    this.variable.connect("dropped", () => {
      this.stopWatch();
      this.stopPoll();
    });
    this.variable.connect("error", (_, err) => this.errHandler?.(err));
    return new Proxy(this, {
      apply: (target, _, args) => target._call(args[0])
    });
  }
  _call(transform) {
    const b = binding_default.bind(this);
    return transform ? b.as(transform) : b;
  }
  toString() {
    return String(`Variable<${this.get()}>`);
  }
  get() {
    return this._value;
  }
  set(value) {
    if (value !== this._value) {
      this._value = value;
      this.variable.emit("changed");
    }
  }
  startPoll() {
    if (this._poll)
      return;
    if (this.pollFn) {
      this._poll = interval(this.pollInterval, () => {
        const v = this.pollFn(this.get());
        if (v instanceof Promise) {
          v.then((v2) => this.set(v2)).catch((err) => this.variable.emit("error", err));
        } else {
          this.set(v);
        }
      });
    } else if (this.pollExec) {
      this._poll = interval(this.pollInterval, () => {
        execAsync(this.pollExec).then((v) => this.set(this.pollTransform(v, this.get()))).catch((err) => this.variable.emit("error", err));
      });
    }
  }
  startWatch() {
    if (this._watch)
      return;
    this._watch = subprocess({
      cmd: this.watchExec,
      out: (out) => this.set(this.watchTransform(out, this.get())),
      err: (err) => this.variable.emit("error", err)
    });
  }
  stopPoll() {
    this._poll?.cancel();
    delete this._poll;
  }
  stopWatch() {
    this._watch?.kill();
    delete this._watch;
  }
  isPolling() {
    return !!this._poll;
  }
  isWatching() {
    return !!this._watch;
  }
  drop() {
    this.variable.emit("dropped");
  }
  onDropped(callback) {
    this.variable.connect("dropped", callback);
    return this;
  }
  onError(callback) {
    delete this.errHandler;
    this.variable.connect("error", (_, err) => callback(err));
    return this;
  }
  subscribe(callback) {
    const id = this.variable.connect("changed", () => {
      callback(this.get());
    });
    return () => this.variable.disconnect(id);
  }
  poll(interval2, exec, transform = (out) => out) {
    this.stopPoll();
    this.pollInterval = interval2;
    this.pollTransform = transform;
    if (typeof exec === "function") {
      this.pollFn = exec;
      delete this.pollExec;
    } else {
      this.pollExec = exec;
      delete this.pollFn;
    }
    this.startPoll();
    return this;
  }
  watch(exec, transform = (out) => out) {
    this.stopWatch();
    this.watchExec = exec;
    this.watchTransform = transform;
    this.startWatch();
    return this;
  }
  observe(objs, sigOrFn, callback) {
    const f = typeof sigOrFn === "function" ? sigOrFn : callback ?? (() => this.get());
    const set = (obj, ...args) => this.set(f(obj, ...args));
    if (Array.isArray(objs)) {
      for (const obj of objs) {
        const [o, s] = obj;
        const id = o.connect(s, set);
        this.onDropped(() => o.disconnect(id));
      }
    } else {
      if (typeof sigOrFn === "string") {
        const id = objs.connect(sigOrFn, set);
        this.onDropped(() => objs.disconnect(id));
      }
    }
    return this;
  }
  static derive(deps, fn = (...args) => args) {
    const update = () => fn(...deps.map((d) => d.get()));
    const derived = new Variable(update());
    const unsubs = deps.map((dep) => dep.subscribe(() => derived.set(update())));
    derived.onDropped(() => unsubs.map((unsub) => unsub()));
    return derived;
  }
};
var Variable = new Proxy(VariableWrapper, {
  apply: (_t, _a, args) => new VariableWrapper(args[0])
});
var { derive } = Variable;
var variable_default = Variable;

// ../../../../usr/share/astal/gjs/_astal.ts
var noImplicitDestroy = Symbol("no no implicit destroy");
var setChildren = Symbol("children setter method");
function mergeBindings(array) {
  function getValues(...args) {
    let i = 0;
    return array.map(
      (value) => value instanceof binding_default ? args[i++] : value
    );
  }
  const bindings = array.filter((i) => i instanceof binding_default);
  if (bindings.length === 0)
    return array;
  if (bindings.length === 1)
    return bindings[0].as(getValues);
  return variable_default.derive(bindings, getValues)();
}
function setProp(obj, prop, value) {
  try {
    const setter = `set_${snakeify(prop)}`;
    if (typeof obj[setter] === "function")
      return obj[setter](value);
    return obj[prop] = value;
  } catch (error) {
    console.error(`could not set property "${prop}" on ${obj}:`, error);
  }
}
function construct(widget, config) {
  let { setup, child, children = [], ...props } = config;
  if (children instanceof binding_default) {
    children = [children];
  }
  if (child) {
    children.unshift(child);
  }
  for (const [key, value] of Object.entries(props)) {
    if (value === void 0) {
      delete props[key];
    }
  }
  const bindings = Object.keys(props).reduce((acc, prop) => {
    if (props[prop] instanceof binding_default) {
      const binding = props[prop];
      delete props[prop];
      return [...acc, [prop, binding]];
    }
    return acc;
  }, []);
  const onHandlers = Object.keys(props).reduce((acc, key) => {
    if (key.startsWith("on")) {
      const sig = kebabify(key).split("-").slice(1).join("-");
      const handler2 = props[key];
      delete props[key];
      return [...acc, [sig, handler2]];
    }
    return acc;
  }, []);
  const mergedChildren = mergeBindings(children.flat(Infinity));
  if (mergedChildren instanceof binding_default) {
    widget[setChildren](mergedChildren.get());
    widget.connect("destroy", mergedChildren.subscribe((v) => {
      widget[setChildren](v);
    }));
  } else {
    if (mergedChildren.length > 0) {
      widget[setChildren](mergedChildren);
    }
  }
  for (const [signal, callback] of onHandlers) {
    const sig = signal.startsWith("notify") ? signal.replace("-", "::") : signal;
    if (typeof callback === "function") {
      widget.connect(sig, callback);
    } else {
      widget.connect(sig, () => execAsync(callback).then(print).catch(console.error));
    }
  }
  for (const [prop, binding] of bindings) {
    if (prop === "child" || prop === "children") {
      widget.connect("destroy", binding.subscribe((v) => {
        widget[setChildren](v);
      }));
    }
    widget.connect("destroy", binding.subscribe((v) => {
      setProp(widget, prop, v);
    }));
    setProp(widget, prop, binding.get());
  }
  for (const [key, value] of Object.entries(props)) {
    if (value === void 0) {
      delete props[key];
    }
  }
  Object.assign(widget, props);
  setup?.(widget);
  return widget;
}
function isArrowFunction(func) {
  return !Object.hasOwn(func, "prototype");
}
function jsx(ctors2, ctor, { children, ...props }) {
  children ??= [];
  if (!Array.isArray(children))
    children = [children];
  children = children.filter(Boolean);
  if (children.length === 1)
    props.child = children[0];
  else if (children.length > 1)
    props.children = children;
  if (typeof ctor === "string") {
    if (isArrowFunction(ctors2[ctor]))
      return ctors2[ctor](props);
    return new ctors2[ctor](props);
  }
  if (isArrowFunction(ctor))
    return ctor(props);
  return new ctor(props);
}

// ../../../../usr/share/astal/gjs/gtk4/astalify.ts
import Gtk from "gi://Gtk?version=4.0";
import Gdk from "gi://Gdk?version=4.0";
var type = Symbol("child type");
var dummyBulder = new Gtk.Builder();
function _getChildren(widget) {
  if ("get_child" in widget && typeof widget.get_child == "function") {
    return widget.get_child() ? [widget.get_child()] : [];
  }
  const children = [];
  let ch = widget.get_first_child();
  while (ch !== null) {
    children.push(ch);
    ch = ch.get_next_sibling();
  }
  return children;
}
function _setChildren(widget, children) {
  children = children.flat(Infinity).map((ch) => ch instanceof Gtk.Widget ? ch : new Gtk.Label({ visible: true, label: String(ch) }));
  for (const child of children) {
    widget.vfunc_add_child(
      dummyBulder,
      child,
      type in child ? child[type] : null
    );
  }
}
function astalify(cls, config = {}) {
  Object.assign(cls.prototype, {
    [setChildren](children) {
      const w = this;
      for (const child of config.getChildren?.(w) || _getChildren(w)) {
        if (child instanceof Gtk.Widget) {
          child.unparent();
          if (!children.includes(child) && noImplicitDestroy in this)
            child.run_dispose();
        }
      }
      if (config.setChildren) {
        config.setChildren(w, children);
      } else {
        _setChildren(w, children);
      }
    }
  });
  return {
    [cls.name]: (props = {}, ...children) => {
      const widget = new cls("cssName" in props ? { cssName: props.cssName } : {});
      if ("cssName" in props) {
        delete props.cssName;
      }
      if (props.noImplicitDestroy) {
        Object.assign(widget, { [noImplicitDestroy]: true });
        delete props.noImplicitDestroy;
      }
      if (props.type) {
        Object.assign(widget, { [type]: props.type });
        delete props.type;
      }
      if (children.length > 0) {
        Object.assign(props, { children });
      }
      return construct(widget, setupControllers(widget, props));
    }
  }[cls.name];
}
function setupControllers(widget, {
  onFocusEnter,
  onFocusLeave,
  onKeyPressed,
  onKeyReleased,
  onKeyModifier,
  onLegacy,
  onButtonPressed,
  onButtonReleased,
  onHoverEnter,
  onHoverLeave,
  onMotion,
  onScroll,
  onScrollDecelerate,
  ...props
}) {
  if (onFocusEnter || onFocusLeave) {
    const focus = new Gtk.EventControllerFocus();
    widget.add_controller(focus);
    if (onFocusEnter)
      focus.connect("enter", () => onFocusEnter(widget));
    if (onFocusLeave)
      focus.connect("leave", () => onFocusLeave(widget));
  }
  if (onKeyPressed || onKeyReleased || onKeyModifier) {
    const key = new Gtk.EventControllerKey();
    widget.add_controller(key);
    if (onKeyPressed)
      key.connect("key-pressed", (_, val, code, state) => onKeyPressed(widget, val, code, state));
    if (onKeyReleased)
      key.connect("key-released", (_, val, code, state) => onKeyReleased(widget, val, code, state));
    if (onKeyModifier)
      key.connect("modifiers", (_, state) => onKeyModifier(widget, state));
  }
  if (onLegacy || onButtonPressed || onButtonReleased) {
    const legacy = new Gtk.EventControllerLegacy();
    widget.add_controller(legacy);
    legacy.connect("event", (_, event) => {
      if (event.get_event_type() === Gdk.EventType.BUTTON_PRESS) {
        onButtonPressed?.(widget, event);
      }
      if (event.get_event_type() === Gdk.EventType.BUTTON_RELEASE) {
        onButtonReleased?.(widget, event);
      }
      onLegacy?.(widget, event);
    });
  }
  if (onMotion || onHoverEnter || onHoverLeave) {
    const hover = new Gtk.EventControllerMotion();
    widget.add_controller(hover);
    if (onHoverEnter)
      hover.connect("enter", (_, x, y) => onHoverEnter(widget, x, y));
    if (onHoverLeave)
      hover.connect("leave", () => onHoverLeave(widget));
    if (onMotion)
      hover.connect("motion", (_, x, y) => onMotion(widget, x, y));
  }
  if (onScroll || onScrollDecelerate) {
    const scroll = new Gtk.EventControllerScroll();
    scroll.flags = Gtk.EventControllerScrollFlags.BOTH_AXES | Gtk.EventControllerScrollFlags.KINETIC;
    widget.add_controller(scroll);
    if (onScroll)
      scroll.connect("scroll", (_, x, y) => onScroll(widget, x, y));
    if (onScrollDecelerate)
      scroll.connect("decelerate", (_, x, y) => onScrollDecelerate(widget, x, y));
  }
  return props;
}

// ../../../../usr/share/astal/gjs/gtk4/app.ts
import GLib from "gi://GLib?version=2.0";
import Gtk2 from "gi://Gtk?version=4.0";
import Astal4 from "gi://Astal?version=4.0";

// ../../../../usr/share/astal/gjs/overrides.ts
var snakeify2 = (str) => str.replace(/([a-z])([A-Z])/g, "$1_$2").replaceAll("-", "_").toLowerCase();
async function suppress(mod, patch2) {
  return mod.then((m) => patch2(m.default)).catch(() => void 0);
}
function patch(proto, prop) {
  Object.defineProperty(proto, prop, {
    get() {
      return this[`get_${snakeify2(prop)}`]();
    }
  });
}
await suppress(import("gi://AstalApps"), ({ Apps, Application }) => {
  patch(Apps.prototype, "list");
  patch(Application.prototype, "keywords");
  patch(Application.prototype, "categories");
});
await suppress(import("gi://AstalBattery"), ({ UPower }) => {
  patch(UPower.prototype, "devices");
});
await suppress(import("gi://AstalBluetooth"), ({ Adapter, Bluetooth, Device }) => {
  patch(Adapter.prototype, "uuids");
  patch(Bluetooth.prototype, "adapters");
  patch(Bluetooth.prototype, "devices");
  patch(Device.prototype, "uuids");
});
await suppress(import("gi://AstalHyprland"), ({ Hyprland, Monitor, Workspace }) => {
  patch(Hyprland.prototype, "binds");
  patch(Hyprland.prototype, "monitors");
  patch(Hyprland.prototype, "workspaces");
  patch(Hyprland.prototype, "clients");
  patch(Monitor.prototype, "availableModes");
  patch(Monitor.prototype, "available_modes");
  patch(Workspace.prototype, "clients");
});
await suppress(import("gi://AstalMpris"), ({ Mpris: Mpris2, Player }) => {
  patch(Mpris2.prototype, "players");
  patch(Player.prototype, "supported_uri_schemes");
  patch(Player.prototype, "supportedUriSchemes");
  patch(Player.prototype, "supported_mime_types");
  patch(Player.prototype, "supportedMimeTypes");
  patch(Player.prototype, "comments");
});
await suppress(import("gi://AstalNetwork"), ({ Wifi: Wifi2 }) => {
  patch(Wifi2.prototype, "access_points");
  patch(Wifi2.prototype, "accessPoints");
});
await suppress(import("gi://AstalNotifd"), ({ Notifd, Notification }) => {
  patch(Notifd.prototype, "notifications");
  patch(Notification.prototype, "actions");
});
await suppress(import("gi://AstalPowerProfiles"), ({ PowerProfiles }) => {
  patch(PowerProfiles.prototype, "actions");
});
await suppress(import("gi://AstalWp"), ({ Wp: Wp2, Audio, Video }) => {
  patch(Wp2.prototype, "endpoints");
  patch(Wp2.prototype, "devices");
  patch(Audio.prototype, "streams");
  patch(Audio.prototype, "recorders");
  patch(Audio.prototype, "microphones");
  patch(Audio.prototype, "speakers");
  patch(Audio.prototype, "devices");
  patch(Video.prototype, "streams");
  patch(Video.prototype, "recorders");
  patch(Video.prototype, "sinks");
  patch(Video.prototype, "sources");
  patch(Video.prototype, "devices");
});

// ../../../../usr/share/astal/gjs/_app.ts
import { setConsoleLogDomain } from "console";
import { exit, programArgs } from "system";
import IO from "gi://AstalIO";
import GObject from "gi://GObject";
function mkApp(App) {
  return new class AstalJS extends App {
    static {
      GObject.registerClass({ GTypeName: "AstalJS" }, this);
    }
    eval(body) {
      return new Promise((res, rej) => {
        try {
          const fn = Function(`return (async function() {
                        ${body.includes(";") ? body : `return ${body};`}
                    })`);
          fn()().then(res).catch(rej);
        } catch (error) {
          rej(error);
        }
      });
    }
    requestHandler;
    vfunc_request(msg, conn) {
      if (typeof this.requestHandler === "function") {
        this.requestHandler(msg, (response) => {
          IO.write_sock(
            conn,
            String(response),
            (_, res) => IO.write_sock_finish(res)
          );
        });
      } else {
        super.vfunc_request(msg, conn);
      }
    }
    apply_css(style, reset = false) {
      super.apply_css(style, reset);
    }
    quit(code) {
      super.quit();
      exit(code ?? 0);
    }
    start({ requestHandler, css, hold, main, client, icons, ...cfg } = {}) {
      const app = this;
      client ??= () => {
        print(`Astal instance "${app.instanceName}" already running`);
        exit(1);
      };
      Object.assign(this, cfg);
      setConsoleLogDomain(app.instanceName);
      this.requestHandler = requestHandler;
      app.connect("activate", () => {
        main?.(...programArgs);
      });
      try {
        app.acquire_socket();
      } catch (error) {
        return client((msg) => IO.send_request(app.instanceName, msg), ...programArgs);
      }
      if (css)
        this.apply_css(css, false);
      if (icons)
        app.add_icons(icons);
      hold ??= true;
      if (hold)
        app.hold();
      app.runAsync([]);
    }
  }();
}

// ../../../../usr/share/astal/gjs/gtk4/app.ts
Gtk2.init();
GLib.unsetenv("LD_PRELOAD");
await import("gi://Adw?version=1").then(({ default: Adw }) => Adw.init()).catch(() => void 0);
var app_default = mkApp(Astal4.Application);

// ../../../../usr/share/astal/gjs/gtk4/widget.ts
import Astal5 from "gi://Astal?version=4.0";
import Gtk3 from "gi://Gtk?version=4.0";
function filter(children) {
  return children.flat(Infinity).map((ch) => ch instanceof Gtk3.Widget ? ch : new Gtk3.Label({ visible: true, label: String(ch) }));
}
Object.defineProperty(Astal5.Box.prototype, "children", {
  get() {
    return this.get_children();
  },
  set(v) {
    this.set_children(v);
  }
});
var Box = astalify(Astal5.Box, {
  getChildren(self) {
    return self.get_children();
  },
  setChildren(self, children) {
    return self.set_children(filter(children));
  }
});
var Button = astalify(Gtk3.Button);
var CenterBox = astalify(Gtk3.CenterBox, {
  getChildren(box) {
    return [box.startWidget, box.centerWidget, box.endWidget];
  },
  setChildren(box, children) {
    const ch = filter(children);
    box.startWidget = ch[0] || new Gtk3.Box();
    box.centerWidget = ch[1] || new Gtk3.Box();
    box.endWidget = ch[2] || new Gtk3.Box();
  }
});
var Entry = astalify(Gtk3.Entry, {
  getChildren() {
    return [];
  }
});
var Image = astalify(Gtk3.Image, {
  getChildren() {
    return [];
  }
});
var Label = astalify(Gtk3.Label, {
  getChildren() {
    return [];
  },
  setChildren(self, children) {
    self.label = String(children);
  }
});
var LevelBar = astalify(Gtk3.LevelBar, {
  getChildren() {
    return [];
  }
});
var Overlay = astalify(Gtk3.Overlay, {
  getChildren(self) {
    const children = [];
    let ch = self.get_first_child();
    while (ch !== null) {
      children.push(ch);
      ch = ch.get_next_sibling();
    }
    return children.filter((ch2) => ch2 !== self.child);
  },
  setChildren(self, children) {
    for (const child of filter(children)) {
      const types = type in child ? child[type].split(/\s+/) : [];
      if (types.includes("overlay")) {
        self.add_overlay(child);
      } else {
        self.set_child(child);
      }
      self.set_measure_overlay(child, types.includes("measure"));
      self.set_clip_overlay(child, types.includes("clip"));
    }
  }
});
var Revealer = astalify(Gtk3.Revealer);
var Slider = astalify(Astal5.Slider, {
  getChildren() {
    return [];
  }
});
var Stack = astalify(Gtk3.Stack, {
  setChildren(self, children) {
    for (const child of filter(children)) {
      if (child.name != "" && child.name != null) {
        self.add_named(child, child.name);
      } else {
        self.add_child(child);
      }
    }
  }
});
var Switch = astalify(Gtk3.Switch, {
  getChildren() {
    return [];
  }
});
var Window = astalify(Astal5.Window);
var MenuButton = astalify(Gtk3.MenuButton, {
  getChildren(self) {
    return [self.popover, self.child];
  },
  setChildren(self, children) {
    for (const child of filter(children)) {
      if (child instanceof Gtk3.Popover) {
        self.set_popover(child);
      } else {
        self.set_child(child);
      }
    }
  }
});
var Popover = astalify(Gtk3.Popover);

// sass:/home/itiro/.config/ags/style.scss
var style_default = 'button, button *, popover, popover *, * {\n  font-family: "Monospace";\n  font-size: 16px;\n  -gtk-icon-size: 16px;\n  color: #cdd6f4;\n  background: transparent;\n  border-width: 0;\n  border-style: none;\n  box-shadow: none;\n  outline: none;\n  margin: 0;\n  padding: 0;\n}\n\n.Background {\n  padding: 20px;\n  margin: 5px;\n  background-color: #1e1e2e;\n  border-radius: 50px;\n  transition: all 0.2s ease-in-out;\n  opacity: 0.5;\n}\n.Background .Media {\n  border: 2px solid #74c7ec;\n  border-radius: 10px;\n  background-color: #1e1e2e;\n}\n.Background .Media * {\n  transition: all 0.2s ease-in-out;\n}\n.Background .Media .MprisInfo {\n  padding: 5px;\n  border-radius: 0 0 7px 7px;\n  background-color: #1e1e2e;\n}\n.Background .Media .MprisInfo .MprisLabel {\n  color: #74c7ec;\n}\n.Background .Media .CavaContainer {\n  border-radius: 6px 6px 0px 0px;\n  color: #74c7ec;\n  background: none;\n}\n.Background .MediaPlaying .CavaContainer {\n  color: #74c7ec;\n  background: none;\n}\n.Background .MediaPlaying .MprisInfo {\n  background-color: #74c7ec;\n}\n.Background .MediaPlaying .MprisInfo .MprisLabel {\n  color: #1e1e2e;\n}\n.Background .MediaPlaying:hover .CavaContainer {\n  color: #1e1e2e;\n  background-color: #74c7ec;\n}\n.Background .MediaPlaying:hover .MprisInfo {\n  background-color: #1e1e2e;\n}\n.Background .MediaPlaying:hover .MprisInfo .MprisLabel {\n  color: #74c7ec;\n}\n.Background .DateTime * {\n  transition: all 0.2s ease-in-out;\n  border-radius: 10px;\n}\n.Background .DateTime .Time {\n  transition: all 0.2s ease-in-out;\n}\n.Background .DateTime .Time .TimeLabel {\n  font-weight: bold;\n  font-size: 90px;\n}\n.Background .DateTime .Time popover > contents {\n  padding: 5px;\n  background: #313244;\n  border: 2px solid #74c7ec;\n}\n.Background .DateTime .Time popover > contents .CalendarContainer {\n  background-color: #1e1e2e;\n  color: #cdd6f4;\n}\n.Background .DateTime .Time popover > contents .CalendarContainer label.today {\n  background-color: #89b4fa;\n  border: none;\n  color: #1e1e2e;\n}\n.Background .DateTime .Time popover > contents .CalendarContainer label:selected {\n  background-color: #b4befe;\n  border: none;\n  color: #1e1e2e;\n}\n.Background .DateTime .Time:hover {\n  background-color: #74c7ec;\n}\n.Background .DateTime .Time:hover .TimeLabel {\n  color: #181825;\n}\n.Background .DateTime .Date {\n  font-size: 40px;\n}\n.Background:hover {\n  opacity: 0.9;\n}\n\n.SystemMonitor, .AudioControl, .SystemTray, .Wired, .Wifi, .MiniTime {\n  background-color: #1e1e2e;\n  border: 2px solid #89b4fa;\n  border-radius: 10px;\n  padding: 0px 2px;\n  margin: 0px 2px;\n}\n\n.CpuUsage, .MemoryUsage, .Battery, .IconBtn, .LabelAudioControl, .AudioControlBtn, .TrayItem, .Wired, .Wifi, .MiniTime {\n  padding: 1px 4px;\n}\n\n.BatteryIcon, .CpuUsageIcon, .MemoryUsageIcon {\n  margin: 0px 5px 0px 0px;\n}\n\n.CpuUsage .CpuUsageIcon, .CpuUsage .CpuUsageLabel {\n  color: #a6e3a1;\n}\n\n.MemoryUsage .MemoryUsageIcon, .MemoryUsage .MemoryUsageLabel {\n  color: #fab387;\n}\n\n.Battery .BatteryIcon, .Battery .BatteryLabel {\n  color: #b4befe;\n}\n\n.BatteryCritical .BatteryIcon, .BatteryCritical .BatteryLabel {\n  color: #f38ba8;\n}\n\n.TrayItem popover.menu {\n  margin: 10px;\n  background-color: #313244;\n  border-radius: 10px;\n  padding: 5px;\n}\n.TrayItem popover.menu > contents {\n  padding: 5px;\n}\n.TrayItem popover.menu modelbutton {\n  padding: 2px;\n  border-radius: 4px;\n  margin: 0 2px;\n}\n.TrayItem popover.menu modelbutton:hover {\n  background: rgba(69, 71, 90, 0.2);\n}\n.TrayItem popover.menu modelbutton:active {\n  background: rgba(69, 71, 90, 0.4);\n}\n\ntooltip {\n  background-color: #1e1e2e;\n  color: #cdd6f4;\n  border-radius: 8px;\n  padding: 8px 12px;\n  border: 1px solid #313244;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}';

// modules/SystemMonitor.tsx
import AstalBattery from "gi://AstalBattery";

// ../../../../usr/share/astal/gjs/index.ts
import { default as default3 } from "gi://AstalIO?version=0.1";

// ../../../../usr/share/astal/gjs/file.ts
import Astal7 from "gi://AstalIO";
import Gio from "gi://Gio?version=2.0";

// ../../../../usr/share/astal/gjs/gobject.ts
import GObject2 from "gi://GObject";
import { default as default2 } from "gi://GLib?version=2.0";
var meta = Symbol("meta");
var priv = Symbol("priv");
var { ParamSpec, ParamFlags } = GObject2;

// modules/SystemMonitor.tsx
import GTop from "gi://GTop?version=2.0";

// ../../../../usr/share/astal/gjs/gtk4/jsx-runtime.ts
function jsx2(ctor, props) {
  return jsx(ctors, ctor, props);
}
var ctors = {
  box: Box,
  button: Button,
  centerbox: CenterBox,
  // circularprogress: Widget.CircularProgress,
  // drawingarea: Widget.DrawingArea,
  entry: Entry,
  image: Image,
  label: Label,
  levelbar: LevelBar,
  overlay: Overlay,
  revealer: Revealer,
  slider: Slider,
  stack: Stack,
  switch: Switch,
  window: Window,
  menubutton: MenuButton,
  popover: Popover
};
var jsxs = jsx2;

// modules/SystemMonitor.tsx
function formatTime(seconds) {
  return `${Math.floor(seconds / 3600)}h${Math.floor(seconds % 3600 / 60)}m`;
}
var milliseconds = 2e3;
var cpu = new GTop.glibtop_cpu();
var mem = new GTop.glibtop_mem();
var battery = AstalBattery.get_default();
var cpuData = {
  prev: { user: 0, sys: 0, total: 0 },
  diff: { user: 0, sys: 0, total: 0 }
};
GTop.glibtop_get_cpu(cpu);
cpuData.prev.user = cpu.user;
cpuData.prev.sys = cpu.sys;
cpuData.prev.total = cpu.total;
var metrics = Variable({ cpu: 0, mem: 0 }).poll(
  milliseconds,
  () => {
    try {
      const prevUser = cpuData.prev.user;
      const prevSys = cpuData.prev.sys;
      const prevTotal = cpuData.prev.total;
      GTop.glibtop_get_cpu(cpu);
      GTop.glibtop_get_mem(mem);
      cpuData.diff.user = cpu.user - prevUser;
      cpuData.diff.sys = cpu.sys - prevSys;
      cpuData.diff.total = cpu.total - prevTotal;
      cpuData.prev.user = cpu.user;
      cpuData.prev.sys = cpu.sys;
      cpuData.prev.total = cpu.total;
      const cpuPercent = cpuData.diff.total > 0 ? Math.round((cpuData.diff.user + cpuData.diff.sys) / cpuData.diff.total * 100) : 0;
      const memPercent = mem.total > 0 ? Math.round(mem.user / mem.total * 100) : 0;
      return {
        cpu: Math.max(0, Math.min(100, cpuPercent)),
        mem: Math.max(0, Math.min(100, memPercent))
      };
    } catch (error) {
      console.warn("Erro ao obter m\xE9tricas do sistema:", error);
      return { cpu: 0, mem: 0 };
    }
  }
);
var CpuUsage = () => {
  return /* @__PURE__ */ jsxs("box", { cssClasses: ["CpuUsage"], children: [
    /* @__PURE__ */ jsx2("label", { cssClasses: ["CpuUsageIcon"], label: "" }),
    /* @__PURE__ */ jsx2("label", { cssClasses: ["CpuUsageLabel"], label: bind(metrics).as((m) => `${m.cpu}%`) })
  ] });
};
var MemoryUsage = () => {
  return /* @__PURE__ */ jsxs("box", { cssClasses: ["MemoryUsage"], children: [
    /* @__PURE__ */ jsx2("label", { cssClasses: ["MemoryUsageIcon"], label: "" }),
    /* @__PURE__ */ jsx2("label", { cssClasses: ["MemoryUsageLabel"], label: bind(metrics).as((m) => `${m.mem}%`) })
  ] });
};
var batteryHandler = null;
var Battery = () => {
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["Battery"],
      tooltipText: bind(battery, "charging").as(() => {
        try {
          const isCharging = battery.get_charging();
          const timeRemaining = isCharging ? battery.time_to_full : battery.time_to_empty;
          const action = isCharging ? "Carregando" : "Descarregando";
          return `${action}: ${formatTime(timeRemaining)} restante(s)`;
        } catch {
          return "Informa\xE7\xF5es da bateria indispon\xEDveis";
        }
      }),
      setup: (self) => {
        if (batteryHandler) {
          battery.disconnect(batteryHandler);
        }
        batteryHandler = battery.connect("notify::charging", () => {
          try {
            if (battery.percentage <= 0.2 && !battery.charging) {
              self.add_css_class("BatteryCritical");
            } else {
              self.remove_css_class("BatteryCritical");
            }
          } catch (error) {
            console.warn("Erro ao verificar status da bateria:", error);
          }
        });
      },
      onDestroy: () => {
        if (batteryHandler) {
          battery.disconnect(batteryHandler);
          batteryHandler = null;
        }
      },
      children: [
        /* @__PURE__ */ jsx2("image", { cssClasses: ["BatteryIcon"], iconName: bind(battery, "iconName") }),
        /* @__PURE__ */ jsx2("label", { label: bind(battery, "percentage").as((p) => {
          try {
            return `${Math.round(Math.max(0, Math.min(100, p * 100)))}%`;
          } catch {
            return "0%";
          }
        }) })
      ]
    }
  );
};
function SystemMonitor() {
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["SystemMonitor"],
      onDestroy: () => {
        metrics.drop();
        if (batteryHandler) {
          battery.disconnect(batteryHandler);
          batteryHandler = null;
        }
      },
      children: [
        /* @__PURE__ */ jsx2(CpuUsage, {}),
        /* @__PURE__ */ jsx2(MemoryUsage, {}),
        /* @__PURE__ */ jsx2(Battery, {})
      ]
    }
  );
}

// modules/AudioControl.tsx
import Wp from "gi://AstalWp";
function AudioControl() {
  const audio = Wp.get_default().defaultSpeaker;
  const step = 0.02;
  const scroll = new Gtk4.EventControllerScroll({ flags: Gtk4.EventControllerScrollFlags.VERTICAL });
  const click = { left: new Gtk4.GestureClick(), right: new Gtk4.GestureClick() };
  click.left.set_button(Gdk2.BUTTON_PRIMARY);
  click.right.set_button(Gdk2.BUTTON_SECONDARY);
  const handlers2 = [
    scroll.connect("scroll", (controler, dx, dy) => {
      audio.volume = dy < 0 ? Math.min(audio.get_volume() + step, 1) : audio.get_volume() - step;
    }),
    click.left.connect("pressed", () => {
      audio.set_mute(!audio.get_mute());
    }),
    click.right.connect("pressed", () => {
      default2.spawn_command_line_async("pavucontrol");
    })
  ];
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["AudioControl"],
      setup: (self) => {
        self.add_controller(click.left);
        self.add_controller(click.right);
        self.add_controller(scroll);
      },
      onDestroy: () => {
        scroll.disconnect(handlers2[0]);
        click.left.disconnect(handlers2[1]);
        click.right.disconnect(handlers2[2]);
      },
      tooltipText: bind(audio, "description").as((n) => `Dispositivo atual: ${n}`),
      children: [
        /* @__PURE__ */ jsx2(
          "image",
          {
            cssClasses: ["AudioControlBtn"],
            iconName: bind(audio, "volumeIcon")
          }
        ),
        /* @__PURE__ */ jsx2(
          "label",
          {
            cssClasses: ["LabelAudioControl"],
            label: bind(audio, "volume").as((a) => `${Math.round(a * 100)}%`)
          }
        )
      ]
    }
  );
}

// modules/Network.tsx
import AstalNetwork from "gi://AstalNetwork";
var stateTexts = {
  [AstalNetwork.DeviceState.UNKNOWN]: "Desconhecido",
  [AstalNetwork.DeviceState.UNMANAGED]: "N\xE3o gerenciado",
  [AstalNetwork.DeviceState.UNAVAILABLE]: "Indispon\xEDvel",
  [AstalNetwork.DeviceState.DISCONNECTED]: "Desconectado",
  [AstalNetwork.DeviceState.PREPARE]: "Preparando",
  [AstalNetwork.DeviceState.CONFIG]: "Configurando",
  [AstalNetwork.DeviceState.NEED_AUTH]: "Necessita autentica\xE7\xE3o",
  [AstalNetwork.DeviceState.IP_CONFIG]: "Configurando IP",
  [AstalNetwork.DeviceState.IP_CHECK]: "Verificando IP",
  [AstalNetwork.DeviceState.SECONDARIES]: "Configurando secund\xE1rios",
  [AstalNetwork.DeviceState.ACTIVATED]: "Ativado",
  [AstalNetwork.DeviceState.DEACTIVATING]: "Desconectado",
  [AstalNetwork.DeviceState.FAILED]: "Falha"
};
function stateString(s) {
  return stateTexts[s] ?? "Estado desconhecido";
}
var network = AstalNetwork.get_default();
var stats = Variable(
  {
    wifi: {
      name: network.wifi.device.get_iface(),
      ssid: network.wifi.ssid ?? "",
      state: network.wifi.state ?? AstalNetwork.DeviceState.UNKNOWN
    },
    wired: {
      name: network.wired?.device.get_iface() ?? "Sem dispositivo",
      state: AstalNetwork.DeviceState.UNKNOWN
    }
  }
);
var handlers = [
  network.wifi.connect(
    "state-changed",
    () => {
      stats.set(
        {
          ...stats.get(),
          wifi: {
            name: network.wifi.device.get_iface() ?? "Sem dispositivo",
            ssid: network.wifi.ssid ?? "",
            state: network.wifi.state ?? AstalNetwork.DeviceState.UNAVAILABLE
          }
        }
      );
    }
  )
];
function Wifi() {
  return /* @__PURE__ */ jsx2("box", { cssClasses: ["Wifi"], children: /* @__PURE__ */ jsx2(
    "label",
    {
      maxWidthChars: 20,
      label: bind(stats).as((s) => s.wifi.state === AstalNetwork.DeviceState.ACTIVATED || s.wifi.state === AstalNetwork.DeviceState.SECONDARIES ? `${s.wifi.name}: ${s.wifi.ssid}` : `${s.wifi.name}: ${stateString(s.wifi.state)}`)
    }
  ) });
}
function Wired() {
  return /* @__PURE__ */ jsx2("box", { cssClasses: ["Wired"], children: /* @__PURE__ */ jsx2(
    "label",
    {
      maxWidthChars: 20,
      label: bind(stats).as((s) => s.wired.state === AstalNetwork.DeviceState.ACTIVATED || s.wired.state === AstalNetwork.DeviceState.SECONDARIES ? `${s.wired.name}: Connectado` : `${s.wired.name}${s.wired.name === "Sem dispositivo" ? "" : ": " + stateString(s.wired.state)}`)
    }
  ) });
}
function Network() {
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["Network"],
      onDestroy: () => {
        stats.drop();
        network.wifi.disconnect(handlers[0]);
      },
      children: [
        /* @__PURE__ */ jsx2(Wifi, {}),
        /* @__PURE__ */ jsx2(Wired, {})
      ]
    }
  );
}

// modules/SystemTray.tsx
import Tray from "gi://AstalTray";
function TrayItem({ item }) {
  let handlers2 = {
    primary: 0,
    middle: 0,
    secondary: 0,
    menuModel: 0,
    actionG: 0
  };
  const clickPrimary = new Gtk4.GestureClick({ button: Gdk2.BUTTON_PRIMARY });
  const clickSecondary = new Gtk4.GestureClick({ button: Gdk2.BUTTON_SECONDARY });
  const clickMiddle = new Gtk4.GestureClick({ button: Gdk2.BUTTON_MIDDLE });
  return /* @__PURE__ */ jsx2(
    "menubutton",
    {
      cssClasses: ["TrayItem"],
      tooltipText: bind(item, "tooltipMarkup"),
      menuModel: item.menuModel,
      usePopover: true,
      direction: Gtk4.ArrowType.DOWN,
      setup: (self) => {
        handlers2 = {
          primary: clickPrimary.connect("pressed", (_self, _n, x, y) => {
            if (item.is_menu) self.get_popover().popup();
            else item.activate(x, y);
          }),
          middle: clickMiddle.connect("pressed", (_self, _n, x, y) => {
            item.secondary_activate(x, y);
          }),
          secondary: clickSecondary.connect("pressed", () => {
            item.about_to_show();
            self.get_popover().popup();
          }),
          menuModel: item.connect("notify::menu-model", () => {
            self.set_menu_model(item.menuModel);
          }),
          actionG: item.connect("notify::action-group", () => {
            self.insert_action_group("dbusmenu", item.actionGroup);
          })
        };
        self.add_controller(clickPrimary);
        self.add_controller(clickMiddle);
        self.add_controller(clickSecondary);
      },
      onDestroy: (self) => {
        clickPrimary.disconnect(handlers2.primary);
        clickMiddle.disconnect(handlers2.middle);
        clickSecondary.disconnect(handlers2.secondary);
        item.disconnect(handlers2.menuModel);
        item.disconnect(handlers2.actionG);
        self.remove_controller(clickPrimary);
        self.remove_controller(clickMiddle);
        self.remove_controller(clickSecondary);
      },
      children: /* @__PURE__ */ jsx2("image", { gicon: bind(item, "gicon"), pixelSize: 16 })
    }
  );
}
function SystemTray() {
  const tray = Tray.get_default();
  return /* @__PURE__ */ jsx2(
    "box",
    {
      cssClasses: ["SystemTray"],
      orientation: Gtk4.Orientation.HORIZONTAL,
      spacing: 4,
      marginEnd: 8,
      children: bind(tray, "items").as(
        (items) => items.map(
          (item) => /* @__PURE__ */ jsx2(TrayItem, { item })
        )
      )
    }
  );
}

// modules/DateTime.tsx
var time = Variable({ clock: "", date: "" }).poll(
  6e4,
  () => {
    const dateConstructor = /* @__PURE__ */ new Date();
    return {
      clock: dateConstructor.toLocaleTimeString("pt-br", { hour: "2-digit", minute: "2-digit" }),
      date: dateConstructor.toLocaleDateString("pt-br", { weekday: "long", day: "numeric", month: "long", year: "numeric" }).replace(/^./, (char) => char.toUpperCase())
    };
  }
);
var Calendar = astalify(Gtk4.Calendar, {
  getChildren(self) {
    return [];
  },
  setChildren(self, children) {
  }
});
function MenuCalendar() {
  const selectedDate = Variable("Nenhuma data selecionada");
  return /* @__PURE__ */ jsxs("box", { cssClasses: ["Calendar"], orientation: Gtk4.Orientation.VERTICAL, onDestroy: () => {
    selectedDate.drop();
  }, children: [
    /* @__PURE__ */ jsx2("label", { cssClasses: ["CalendarLabel"], label: bind(selectedDate) }),
    /* @__PURE__ */ jsx2(
      Calendar,
      {
        cssClasses: ["CalendarContainer"],
        setup: (self) => {
          const daySelectedId = self.connect("day-selected", () => {
            const date = self.get_date();
            selectedDate.set(`Selecionado: ${date.format("%d-%m-%Y")}`);
          });
          return () => {
            self.disconnect(daySelectedId);
          };
        }
      }
    )
  ] });
}
function DateTime() {
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["DateTime"],
      orientation: Gtk4.Orientation.VERTICAL,
      onDestroy: () => {
        time.drop();
      },
      children: [
        /* @__PURE__ */ jsxs("menubutton", { cssClasses: ["Time"], halign: Gtk4.Align.END, children: [
          /* @__PURE__ */ jsx2("label", { cssClasses: ["TimeLabel"], label: bind(time).as((t) => `${t.clock}`) }),
          /* @__PURE__ */ jsx2("popover", { position: Gtk4.PositionType.TOP, children: /* @__PURE__ */ jsx2(MenuCalendar, {}) })
        ] }),
        /* @__PURE__ */ jsx2("label", { cssClasses: ["Date"], label: bind(time).as((t) => `${t.date}`) })
      ]
    }
  );
}
function MiniTime() {
  const shouldReveal = Variable(false);
  const transitionSpeed = 750;
  function toggleReveal() {
    shouldReveal.set(!shouldReveal.get());
  }
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: ["MiniTime"],
      onDestroy: () => {
        time.drop();
        shouldReveal.drop();
      },
      onHoverEnter: () => toggleReveal(),
      onHoverLeave: () => toggleReveal(),
      children: [
        /* @__PURE__ */ jsx2(
          "revealer",
          {
            revealChild: bind(shouldReveal).as((s) => !s),
            transitionType: Gtk4.RevealerTransitionType.SLIDE_LEFT,
            transitionDuration: transitionSpeed / 4,
            children: /* @__PURE__ */ jsx2("label", { label: bind(time).as((t) => `${t.clock}`) })
          }
        ),
        /* @__PURE__ */ jsx2(
          "revealer",
          {
            revealChild: bind(shouldReveal).as((s) => s),
            transitionType: Gtk4.RevealerTransitionType.SLIDE_RIGHT,
            transitionDuration: transitionSpeed,
            children: /* @__PURE__ */ jsx2("label", { label: bind(time).as((t) => `Hoje \xE9: ${t.date}`) })
          }
        )
      ]
    }
  );
}

// widget/Bar.tsx
function Bar(gdkmonitor) {
  const { TOP, LEFT, RIGHT } = Astal6.WindowAnchor;
  return /* @__PURE__ */ jsx2(
    "window",
    {
      visible: true,
      gdkmonitor,
      exclusivity: Astal6.Exclusivity.EXCLUSIVE,
      anchor: TOP | RIGHT | LEFT,
      application: app_default,
      children: /* @__PURE__ */ jsxs("centerbox", { cssClasses: ["Bar"], halign: Gtk4.Align.FILL, children: [
        /* @__PURE__ */ jsx2("box", { halign: Gtk4.Align.START, children: /* @__PURE__ */ jsx2(SystemTray, {}) }),
        /* @__PURE__ */ jsx2("box", { halign: Gtk4.Align.CENTER, children: /* @__PURE__ */ jsx2(MiniTime, {}) }),
        /* @__PURE__ */ jsxs("box", { halign: Gtk4.Align.END, children: [
          /* @__PURE__ */ jsx2(Network, {}),
          /* @__PURE__ */ jsx2(AudioControl, {}),
          /* @__PURE__ */ jsx2(SystemMonitor, {})
        ] })
      ] })
    }
  );
}

// modules/Media.tsx
import Mpris from "gi://AstalMpris";

// modules/Cava.tsx
import Gsk from "gi://Gsk";
import AstalCava from "gi://AstalCava?version=0.1";
import GObject3 from "gi://GObject";
import Graphene from "gi://Graphene?version=1.0";
var CavaConfig = {
  autosens: true,
  bars: 40,
  barWidth: 20,
  barHeight: 140,
  framerate: 60,
  input: AstalCava.Input.PIPEWIRE,
  noiseReduction: 0.77,
  sensitivity: 0.75,
  stereo: false,
  lerpFactor: 1
};
var cavaInstance = AstalCava.get_default();
var handler = null;
var Cava = GObject3.registerClass({ GTypeName: "Cava" }, class Cava2 extends Gtk4.DrawingArea {
  _rect = new Graphene.Rect();
  _size = new Graphene.Size();
  builder = new Gsk.PathBuilder();
  clip;
  values;
  norm;
  _isDestroyed = false;
  constructor() {
    super();
    this.setupRect();
    this.setupCava();
  }
  setupRect() {
    this.set_size_request(CavaConfig.barWidth * CavaConfig.bars, CavaConfig.barHeight);
    this.clip = new Gsk.RoundedRect();
    this._size.init(7, 7);
    this._rect.init(0, 0, this.get_allocated_width(), this.get_allocated_height());
    this.clip.init(this._rect, this._size, this._size, Graphene.Size.zero(), Graphene.Size.zero());
  }
  setupCava() {
    if (cavaInstance) {
      try {
        cavaInstance.set_autosens(CavaConfig.autosens);
        cavaInstance.set_bars(CavaConfig.bars);
        cavaInstance.set_framerate(CavaConfig.framerate);
        cavaInstance.set_input(CavaConfig.input);
        cavaInstance.set_noise_reduction(CavaConfig.noiseReduction);
        cavaInstance.set_stereo(CavaConfig.stereo);
        this.add_css_class("CavaContainer");
        this.values = new Float32Array(CavaConfig.bars);
        this.norm = new Float32Array(CavaConfig.bars);
        if (handler) {
          cavaInstance.disconnect(handler);
        }
        handler = cavaInstance.connect("notify::values", () => {
          if (!this._isDestroyed) {
            this.queue_draw();
          }
        });
      } catch (error) {
        console.warn("Erro ao configurar Cava:", error);
      }
    }
  }
  vfunc_size_allocate(width, height) {
    this.clip = null;
    super.vfunc_size_allocate(width, height, -1);
  }
  vfunc_snapshot(snapshot) {
    if (!cavaInstance || this._isDestroyed) return;
    try {
      if (!this.clip) {
        this.clip = new Gsk.RoundedRect();
        this._rect.init(0, 0, this.get_allocated_width(), this.get_allocated_height());
        this.clip.init(this._rect, this._size, this._size, Graphene.Size.zero(), Graphene.Size.zero());
      }
      snapshot.push_rounded_clip(this.clip);
      this.draw_catmull_rom(snapshot);
      snapshot.pop();
    } catch (error) {
      console.warn("Erro no snapshot do Cava:", error);
    }
  }
  // Code from Kotontrion. See https://github.com/kotontrion/kompass/blob/main/libkompass/src/cava.vala
  draw_catmull_rom(snapshot) {
    if (!cavaInstance || this._isDestroyed) return;
    try {
      if (!this.builder) this.builder = new Gsk.PathBuilder();
      const width = this.get_allocated_width();
      const height = this.get_allocated_height();
      const raw = cavaInstance.get_values();
      if (!raw || raw.length === 0) return;
      const bars = Math.min(CavaConfig.bars, raw.length);
      const barWidth = width / Math.max(1, bars - 1);
      const color = this.get_color();
      const sens = CavaConfig.sensitivity;
      const lerp = CavaConfig.lerpFactor;
      const invSix = 1 / 6;
      if (!this.values || this.values.length !== bars) {
        this.values = new Float32Array(bars);
      }
      if (!this.norm || this.norm.length !== bars) {
        this.norm = new Float32Array(bars);
      }
      for (let i = 0; i < bars; i++) {
        const vRaw = (raw[i] || 0) * sens;
        const v = this.values[i] += (vRaw - this.values[i]) * lerp;
        this.norm[i] = height - height * Math.max(0, Math.min(1, v));
      }
      this.builder.move_to(0, this.norm[0]);
      for (let i = 0; i < bars - 1; i++) {
        const p0x = (i - 1) * barWidth;
        const p0y = this.norm[i > 0 ? i - 1 : 0];
        const p1x = i * barWidth;
        const p1y = this.norm[i];
        const p2x = (i + 1) * barWidth;
        const p2y = this.norm[i + 1];
        const p3x = (i + 2) * barWidth;
        const p3y = this.norm[i + 2 < bars ? i + 2 : bars - 1];
        const c1x = p1x + (p2x - p0x) * invSix;
        const c1y = p1y + (p2y - p0y) * invSix;
        const c2x = p2x - (p3x - p1x) * invSix;
        const c2y = p2y - (p3y - p1y) * invSix;
        this.builder.cubic_to(c1x, c1y, c2x, c2y, p2x, p2y);
      }
      this.builder.line_to(width, height);
      this.builder.line_to(0, height);
      snapshot.append_fill(this.builder.to_path(), Gsk.FillRule.WINDING, color);
    } catch (error) {
      console.warn("Erro ao desenhar Cava:", error);
    }
  }
  destroy() {
    this._isDestroyed = true;
    if (handler && cavaInstance) {
      try {
        cavaInstance.disconnect(handler);
      } catch (error) {
        console.warn("Erro ao desconectar handler do Cava:", error);
      }
      handler = null;
    }
  }
});
function CavaContainer() {
  let cavaWidget = null;
  return /* @__PURE__ */ jsx2(
    "box",
    {
      setup: (self) => {
        self.set_size_request(CavaConfig.barWidth * CavaConfig.bars, CavaConfig.barHeight);
        cavaWidget = new Cava();
        self.append(cavaWidget);
      },
      onDestroy: () => {
        if (cavaWidget) {
          cavaWidget.destroy();
          cavaWidget = null;
        }
        if (handler && cavaInstance) {
          try {
            cavaInstance.disconnect(handler);
          } catch (error) {
            console.warn("Erro ao limpar handler do Cava:", error);
          }
          handler = null;
        }
      }
    }
  );
}

// modules/Media.tsx
var mediaState = Variable(
  {
    currentState: "Nada tocando...",
    currentCss: "",
    lastPlayer: null,
    handlers: []
  }
);
var updateTimeout = null;
var DEBOUNCE_DELAY = 100;
var mpris = Mpris.get_default();
function disconnectFromPlayer() {
  const state = mediaState.get();
  if (updateTimeout) {
    default2.source_remove(updateTimeout);
    updateTimeout = null;
  }
  if (state.lastPlayer && state.handlers.length > 0) {
    state.handlers.forEach((handler2) => {
      if (state.lastPlayer && GObject2.signal_handler_is_connected(state.lastPlayer, handler2)) {
        state.lastPlayer.disconnect(handler2);
      }
    });
  }
  mediaState.set({
    ...state,
    lastPlayer: null,
    handlers: [],
    currentCss: "",
    currentState: "Nada tocando..."
  });
}
function connectToPlayer(player) {
  disconnectFromPlayer();
  if (!player) return;
  try {
    if (!player.busName) return;
  } catch {
    return;
  }
  const handlers2 = [
    player.connect("notify::playback-status", () => {
      updateMediaState(player);
    }),
    player.connect("notify::title", () => {
      updateMediaState(player);
    }),
    player.connect("notify::artist", () => {
      updateMediaState(player);
    }),
    // Alguns players enviam notify::metadata em vez dos campos específicos
    player.connect("notify::metadata", () => {
      updateMediaState(player);
    })
  ];
  mediaState.set({
    ...mediaState.get(),
    lastPlayer: player,
    handlers: handlers2
  });
  updateMediaState(player);
}
function updateMediaState(player) {
  if (updateTimeout) {
    default2.source_remove(updateTimeout);
    updateTimeout = null;
  }
  updateTimeout = default2.timeout_add(default2.PRIORITY_DEFAULT, DEBOUNCE_DELAY, () => {
    executeUpdateMediaState(player);
    updateTimeout = null;
    return default2.SOURCE_REMOVE;
  });
}
function executeUpdateMediaState(player) {
  if (!player) {
    mediaState.set({
      ...mediaState.get(),
      currentCss: "",
      currentState: "Nada tocando..."
    });
    return;
  }
  try {
    if (!player.busName) {
      const nextPlayer = findBestPlayer();
      if (nextPlayer && nextPlayer !== player) {
        connectToPlayer(nextPlayer);
        return;
      }
    }
    const title = player.title || "T\xEDtulo desconhecido";
    const artist = player.artist || "Artista desconhecido";
    const status = player.playbackStatus;
    switch (status) {
      case Mpris.PlaybackStatus.PLAYING:
        mediaState.set({
          ...mediaState.get(),
          currentCss: "MediaPlaying",
          currentState: `Tocando agora: ${title} \u2013 ${artist}`
        });
        break;
      case Mpris.PlaybackStatus.PAUSED:
        mediaState.set({
          ...mediaState.get(),
          currentCss: "MediaPlaying",
          currentState: `Pausado: ${title} \u2013 ${artist}`
        });
        break;
      case Mpris.PlaybackStatus.STOPPED:
      default:
        mediaState.set({
          ...mediaState.get(),
          currentCss: "",
          currentState: "Nada tocando..."
        });
        break;
    }
  } catch (error) {
    console.warn("Erro ao acessar propriedades do player MPRIS:", error);
    const nextPlayer = findBestPlayer();
    if (nextPlayer && nextPlayer !== player) {
      connectToPlayer(nextPlayer);
    } else {
      mediaState.set({
        ...mediaState.get(),
        currentCss: "",
        currentState: "Nada tocando..."
      });
    }
  }
}
function findBestPlayer() {
  const players = mpris.players;
  if (players.length === 0) return null;
  const validPlayers = players.filter((p) => {
    try {
      return p.busName && p.busName.length > 0;
    } catch {
      return false;
    }
  });
  if (validPlayers.length === 0) return null;
  const playingPlayer = validPlayers.find((p) => {
    try {
      return p.playbackStatus === Mpris.PlaybackStatus.PLAYING;
    } catch {
      return false;
    }
  });
  if (playingPlayer) {
    return playingPlayer;
  }
  const pausedPlayer = validPlayers.find((p) => {
    try {
      return p.playbackStatus === Mpris.PlaybackStatus.PAUSED;
    } catch {
      return false;
    }
  });
  if (pausedPlayer) {
    return pausedPlayer;
  }
  return validPlayers[0];
}
function initializeMpris() {
  console.log("Inicializando MPRIS...");
  const initialPlayer = findBestPlayer();
  if (initialPlayer) {
    connectToPlayer(initialPlayer);
  } else {
    console.log("Nenhum player dispon\xEDvel na inicializa\xE7\xE3o");
  }
}
var mprisHandlers = [];
function setupMprisHandlers() {
  mprisHandlers = [
    mpris.connect("player-added", (_, player) => {
      const currentPlayer = mediaState.get().lastPlayer;
      if (!currentPlayer) {
        connectToPlayer(player);
      } else {
        try {
          if (player.playbackStatus === Mpris.PlaybackStatus.PLAYING) {
            connectToPlayer(player);
          }
        } catch (error) {
          console.warn("Erro ao verificar status do novo player:", error);
        }
      }
    }),
    mpris.connect("player-closed", (_, player) => {
      const currentPlayer = mediaState.get().lastPlayer;
      if (currentPlayer === player) {
        const nextPlayer = findBestPlayer();
        if (nextPlayer) {
          connectToPlayer(nextPlayer);
        } else {
          disconnectFromPlayer();
        }
      }
    })
  ];
}
function MprisInfo() {
  return /* @__PURE__ */ jsx2("box", { cssClasses: ["MprisInfo"], vexpand: true, children: /* @__PURE__ */ jsx2(
    "label",
    {
      cssClasses: ["MprisLabel"],
      label: bind(mediaState).as((c) => c.currentState),
      ellipsize: 3,
      maxWidthChars: 75
    }
  ) });
}
function Media() {
  initializeMpris();
  setupMprisHandlers();
  return /* @__PURE__ */ jsxs(
    "box",
    {
      cssClasses: bind(mediaState).as((m) => ["Media", m.currentCss]),
      orientation: Gtk4.Orientation.VERTICAL,
      setup: (self) => {
        const click = new Gtk4.GestureClick();
        click.set_button(Gdk2.BUTTON_PRIMARY);
        const clickHandler = click.connect("pressed", () => {
          const player = mediaState.get().lastPlayer;
          if (player) {
            try {
              player.play_pause();
              default2.timeout_add(default2.PRIORITY_DEFAULT, 100, () => {
                executeUpdateMediaState(player);
                return default2.SOURCE_REMOVE;
              });
            } catch (error) {
              console.warn("Erro ao pausar/tocar:", error);
            }
          }
        });
        self.add_controller(click);
        self._clickHandler = clickHandler;
        self._clickController = click;
      },
      onDestroy: () => {
        disconnectFromPlayer();
        mediaState.drop();
        mprisHandlers.forEach((h) => {
          if (GObject2.signal_handler_is_connected(mpris, h)) {
            mpris.disconnect(h);
          }
        });
        mprisHandlers = [];
        if (updateTimeout) {
          default2.source_remove(updateTimeout);
          updateTimeout = null;
        }
      },
      children: [
        /* @__PURE__ */ jsx2(CavaContainer, {}),
        /* @__PURE__ */ jsx2(MprisInfo, {})
      ]
    }
  );
}

// widget/Background.tsx
function Background(gdkmonitor) {
  const { BOTTOM, RIGHT, LEFT } = Astal6.WindowAnchor;
  return /* @__PURE__ */ jsx2(
    "window",
    {
      visible: true,
      gdkmonitor,
      exclusivity: Astal6.Exclusivity.IGNORE,
      layer: Astal6.Layer.BOTTOM,
      anchor: BOTTOM | LEFT | RIGHT,
      application: app_default,
      popup: false,
      children: /* @__PURE__ */ jsxs("centerbox", { cssClasses: ["Background"], halign: Gtk4.Align.FILL, children: [
        /* @__PURE__ */ jsx2("box", { cssClasses: ["BackgroundLeftModules"], halign: Gtk4.Align.START, children: /* @__PURE__ */ jsx2(Media, {}) }),
        /* @__PURE__ */ jsx2("box", { cssClasses: ["BackgroundLeftModules"], halign: Gtk4.Align.CENTER, hexpand: true }),
        /* @__PURE__ */ jsx2("box", { cssClasses: ["BackgroundRightModules"], halign: Gtk4.Align.END, children: /* @__PURE__ */ jsx2(DateTime, {}) })
      ] })
    }
  );
}

// app.ts
app_default.start({
  instanceName: "AgsEcosystem",
  css: "",
  main() {
    const provider = new Gtk4.CssProvider();
    provider.load_from_string(style_default);
    Gtk4.StyleContext.add_provider_for_display(Gdk2.Display.get_default(), provider, Gtk4.STYLE_PROVIDER_PRIORITY_USER);
    app_default.get_monitors().map(
      (monitor) => {
        Bar(monitor);
        Background(monitor);
      }
    );
  }
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9ndGs0L2luZGV4LnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvdmFyaWFibGUudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9iaW5kaW5nLnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvdGltZS50cyIsICIuLi8uLi8uLi8uLi91c3Ivc2hhcmUvYXN0YWwvZ2pzL3Byb2Nlc3MudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9fYXN0YWwudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9ndGs0L2FzdGFsaWZ5LnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvZ3RrNC9hcHAudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9vdmVycmlkZXMudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9fYXBwLnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvZ3RrNC93aWRnZXQudHMiLCAic2FzczovaG9tZS9pdGlyby8uY29uZmlnL2Fncy9zdHlsZS5zY3NzIiwgIm1vZHVsZXMvU3lzdGVtTW9uaXRvci50c3giLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9pbmRleC50cyIsICIuLi8uLi8uLi8uLi91c3Ivc2hhcmUvYXN0YWwvZ2pzL2ZpbGUudHMiLCAiLi4vLi4vLi4vLi4vdXNyL3NoYXJlL2FzdGFsL2dqcy9nb2JqZWN0LnRzIiwgIi4uLy4uLy4uLy4uL3Vzci9zaGFyZS9hc3RhbC9nanMvZ3RrNC9qc3gtcnVudGltZS50cyIsICJtb2R1bGVzL0F1ZGlvQ29udHJvbC50c3giLCAibW9kdWxlcy9OZXR3b3JrLnRzeCIsICJtb2R1bGVzL1N5c3RlbVRyYXkudHN4IiwgIm1vZHVsZXMvRGF0ZVRpbWUudHN4IiwgIndpZGdldC9CYXIudHN4IiwgIm1vZHVsZXMvTWVkaWEudHN4IiwgIm1vZHVsZXMvQ2F2YS50c3giLCAid2lkZ2V0L0JhY2tncm91bmQudHN4IiwgImFwcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IEFzdGFsIGZyb20gXCJnaTovL0FzdGFsP3ZlcnNpb249NC4wXCJcbmltcG9ydCBHdGsgZnJvbSBcImdpOi8vR3RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBHZGsgZnJvbSBcImdpOi8vR2RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBhc3RhbGlmeSwgeyB0eXBlIENvbnN0cnVjdFByb3BzIH0gZnJvbSBcIi4vYXN0YWxpZnkuanNcIlxuXG5leHBvcnQgeyBBc3RhbCwgR3RrLCBHZGsgfVxuZXhwb3J0IHsgZGVmYXVsdCBhcyBBcHAgfSBmcm9tIFwiLi9hcHAuanNcIlxuZXhwb3J0IHsgYXN0YWxpZnksIENvbnN0cnVjdFByb3BzIH1cbmV4cG9ydCAqIGFzIFdpZGdldCBmcm9tIFwiLi93aWRnZXQuanNcIlxuZXhwb3J0IHsgaG9vayB9IGZyb20gXCIuLi9fYXN0YWxcIlxuIiwgImltcG9ydCBBc3RhbCBmcm9tIFwiZ2k6Ly9Bc3RhbElPXCJcbmltcG9ydCBCaW5kaW5nLCB7IHR5cGUgQ29ubmVjdGFibGUsIHR5cGUgU3Vic2NyaWJhYmxlIH0gZnJvbSBcIi4vYmluZGluZy5qc1wiXG5pbXBvcnQgeyBpbnRlcnZhbCB9IGZyb20gXCIuL3RpbWUuanNcIlxuaW1wb3J0IHsgZXhlY0FzeW5jLCBzdWJwcm9jZXNzIH0gZnJvbSBcIi4vcHJvY2Vzcy5qc1wiXG5cbmNsYXNzIFZhcmlhYmxlV3JhcHBlcjxUPiBleHRlbmRzIEZ1bmN0aW9uIHtcbiAgICBwcml2YXRlIHZhcmlhYmxlITogQXN0YWwuVmFyaWFibGVCYXNlXG4gICAgcHJpdmF0ZSBlcnJIYW5kbGVyPyA9IGNvbnNvbGUuZXJyb3JcblxuICAgIHByaXZhdGUgX3ZhbHVlOiBUXG4gICAgcHJpdmF0ZSBfcG9sbD86IEFzdGFsLlRpbWVcbiAgICBwcml2YXRlIF93YXRjaD86IEFzdGFsLlByb2Nlc3NcblxuICAgIHByaXZhdGUgcG9sbEludGVydmFsID0gMTAwMFxuICAgIHByaXZhdGUgcG9sbEV4ZWM/OiBzdHJpbmdbXSB8IHN0cmluZ1xuICAgIHByaXZhdGUgcG9sbFRyYW5zZm9ybT86IChzdGRvdXQ6IHN0cmluZywgcHJldjogVCkgPT4gVFxuICAgIHByaXZhdGUgcG9sbEZuPzogKHByZXY6IFQpID0+IFQgfCBQcm9taXNlPFQ+XG5cbiAgICBwcml2YXRlIHdhdGNoVHJhbnNmb3JtPzogKHN0ZG91dDogc3RyaW5nLCBwcmV2OiBUKSA9PiBUXG4gICAgcHJpdmF0ZSB3YXRjaEV4ZWM/OiBzdHJpbmdbXSB8IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3IoaW5pdDogVCkge1xuICAgICAgICBzdXBlcigpXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gaW5pdFxuICAgICAgICB0aGlzLnZhcmlhYmxlID0gbmV3IEFzdGFsLlZhcmlhYmxlQmFzZSgpXG4gICAgICAgIHRoaXMudmFyaWFibGUuY29ubmVjdChcImRyb3BwZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdG9wV2F0Y2goKVxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbCgpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMudmFyaWFibGUuY29ubmVjdChcImVycm9yXCIsIChfLCBlcnIpID0+IHRoaXMuZXJySGFuZGxlcj8uKGVycikpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodGhpcywge1xuICAgICAgICAgICAgYXBwbHk6ICh0YXJnZXQsIF8sIGFyZ3MpID0+IHRhcmdldC5fY2FsbChhcmdzWzBdKSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jYWxsPFIgPSBUPih0cmFuc2Zvcm0/OiAodmFsdWU6IFQpID0+IFIpOiBCaW5kaW5nPFI+IHtcbiAgICAgICAgY29uc3QgYiA9IEJpbmRpbmcuYmluZCh0aGlzKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtID8gYi5hcyh0cmFuc2Zvcm0pIDogYiBhcyB1bmtub3duIGFzIEJpbmRpbmc8Uj5cbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhgVmFyaWFibGU8JHt0aGlzLmdldCgpfT5gKVxuICAgIH1cblxuICAgIGdldCgpOiBUIHsgcmV0dXJuIHRoaXMuX3ZhbHVlIH1cbiAgICBzZXQodmFsdWU6IFQpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLl92YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgdGhpcy52YXJpYWJsZS5lbWl0KFwiY2hhbmdlZFwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnRQb2xsKCkge1xuICAgICAgICBpZiAodGhpcy5fcG9sbClcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIGlmICh0aGlzLnBvbGxGbikge1xuICAgICAgICAgICAgdGhpcy5fcG9sbCA9IGludGVydmFsKHRoaXMucG9sbEludGVydmFsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMucG9sbEZuISh0aGlzLmdldCgpKVxuICAgICAgICAgICAgICAgIGlmICh2IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB2LnRoZW4odiA9PiB0aGlzLnNldCh2KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gdGhpcy52YXJpYWJsZS5lbWl0KFwiZXJyb3JcIiwgZXJyKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCh2KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wb2xsRXhlYykge1xuICAgICAgICAgICAgdGhpcy5fcG9sbCA9IGludGVydmFsKHRoaXMucG9sbEludGVydmFsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZXhlY0FzeW5jKHRoaXMucG9sbEV4ZWMhKVxuICAgICAgICAgICAgICAgICAgICAudGhlbih2ID0+IHRoaXMuc2V0KHRoaXMucG9sbFRyYW5zZm9ybSEodiwgdGhpcy5nZXQoKSkpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHRoaXMudmFyaWFibGUuZW1pdChcImVycm9yXCIsIGVycikpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnRXYXRjaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3dhdGNoKVxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5fd2F0Y2ggPSBzdWJwcm9jZXNzKHtcbiAgICAgICAgICAgIGNtZDogdGhpcy53YXRjaEV4ZWMhLFxuICAgICAgICAgICAgb3V0OiBvdXQgPT4gdGhpcy5zZXQodGhpcy53YXRjaFRyYW5zZm9ybSEob3V0LCB0aGlzLmdldCgpKSksXG4gICAgICAgICAgICBlcnI6IGVyciA9PiB0aGlzLnZhcmlhYmxlLmVtaXQoXCJlcnJvclwiLCBlcnIpLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0b3BQb2xsKCkge1xuICAgICAgICB0aGlzLl9wb2xsPy5jYW5jZWwoKVxuICAgICAgICBkZWxldGUgdGhpcy5fcG9sbFxuICAgIH1cblxuICAgIHN0b3BXYXRjaCgpIHtcbiAgICAgICAgdGhpcy5fd2F0Y2g/LmtpbGwoKVxuICAgICAgICBkZWxldGUgdGhpcy5fd2F0Y2hcbiAgICB9XG5cbiAgICBpc1BvbGxpbmcoKSB7IHJldHVybiAhIXRoaXMuX3BvbGwgfVxuICAgIGlzV2F0Y2hpbmcoKSB7IHJldHVybiAhIXRoaXMuX3dhdGNoIH1cblxuICAgIGRyb3AoKSB7XG4gICAgICAgIHRoaXMudmFyaWFibGUuZW1pdChcImRyb3BwZWRcIilcbiAgICB9XG5cbiAgICBvbkRyb3BwZWQoY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZS5jb25uZWN0KFwiZHJvcHBlZFwiLCBjYWxsYmFjaylcbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIG9uRXJyb3IoY2FsbGJhY2s6IChlcnI6IHN0cmluZykgPT4gdm9pZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5lcnJIYW5kbGVyXG4gICAgICAgIHRoaXMudmFyaWFibGUuY29ubmVjdChcImVycm9yXCIsIChfLCBlcnIpID0+IGNhbGxiYWNrKGVycikpXG4gICAgICAgIHJldHVybiB0aGlzIGFzIHVua25vd24gYXMgVmFyaWFibGU8VD5cbiAgICB9XG5cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2s6ICh2YWx1ZTogVCkgPT4gdm9pZCkge1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMudmFyaWFibGUuY29ubmVjdChcImNoYW5nZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5nZXQoKSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMudmFyaWFibGUuZGlzY29ubmVjdChpZClcbiAgICB9XG5cbiAgICBwb2xsKFxuICAgICAgICBpbnRlcnZhbDogbnVtYmVyLFxuICAgICAgICBleGVjOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICAgICAgdHJhbnNmb3JtPzogKHN0ZG91dDogc3RyaW5nLCBwcmV2OiBUKSA9PiBUXG4gICAgKTogVmFyaWFibGU8VD5cblxuICAgIHBvbGwoXG4gICAgICAgIGludGVydmFsOiBudW1iZXIsXG4gICAgICAgIGNhbGxiYWNrOiAocHJldjogVCkgPT4gVCB8IFByb21pc2U8VD5cbiAgICApOiBWYXJpYWJsZTxUPlxuXG4gICAgcG9sbChcbiAgICAgICAgaW50ZXJ2YWw6IG51bWJlcixcbiAgICAgICAgZXhlYzogc3RyaW5nIHwgc3RyaW5nW10gfCAoKHByZXY6IFQpID0+IFQgfCBQcm9taXNlPFQ+KSxcbiAgICAgICAgdHJhbnNmb3JtOiAoc3Rkb3V0OiBzdHJpbmcsIHByZXY6IFQpID0+IFQgPSBvdXQgPT4gb3V0IGFzIFQsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGwoKVxuICAgICAgICB0aGlzLnBvbGxJbnRlcnZhbCA9IGludGVydmFsXG4gICAgICAgIHRoaXMucG9sbFRyYW5zZm9ybSA9IHRyYW5zZm9ybVxuICAgICAgICBpZiAodHlwZW9mIGV4ZWMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5wb2xsRm4gPSBleGVjXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wb2xsRXhlY1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wb2xsRXhlYyA9IGV4ZWNcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBvbGxGblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhcnRQb2xsKClcbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIHdhdGNoKFxuICAgICAgICBleGVjOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICAgICAgdHJhbnNmb3JtOiAoc3Rkb3V0OiBzdHJpbmcsIHByZXY6IFQpID0+IFQgPSBvdXQgPT4gb3V0IGFzIFQsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuc3RvcFdhdGNoKClcbiAgICAgICAgdGhpcy53YXRjaEV4ZWMgPSBleGVjXG4gICAgICAgIHRoaXMud2F0Y2hUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbiAgICAgICAgdGhpcy5zdGFydFdhdGNoKClcbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIG9ic2VydmUoXG4gICAgICAgIG9ianM6IEFycmF5PFtvYmo6IENvbm5lY3RhYmxlLCBzaWduYWw6IHN0cmluZ10+LFxuICAgICAgICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBULFxuICAgICk6IFZhcmlhYmxlPFQ+XG5cbiAgICBvYnNlcnZlKFxuICAgICAgICBvYmo6IENvbm5lY3RhYmxlLFxuICAgICAgICBzaWduYWw6IHN0cmluZyxcbiAgICAgICAgY2FsbGJhY2s6ICguLi5hcmdzOiBhbnlbXSkgPT4gVCxcbiAgICApOiBWYXJpYWJsZTxUPlxuXG4gICAgb2JzZXJ2ZShcbiAgICAgICAgb2JqczogQ29ubmVjdGFibGUgfCBBcnJheTxbb2JqOiBDb25uZWN0YWJsZSwgc2lnbmFsOiBzdHJpbmddPixcbiAgICAgICAgc2lnT3JGbjogc3RyaW5nIHwgKChvYmo6IENvbm5lY3RhYmxlLCAuLi5hcmdzOiBhbnlbXSkgPT4gVCksXG4gICAgICAgIGNhbGxiYWNrPzogKG9iajogQ29ubmVjdGFibGUsIC4uLmFyZ3M6IGFueVtdKSA9PiBULFxuICAgICkge1xuICAgICAgICBjb25zdCBmID0gdHlwZW9mIHNpZ09yRm4gPT09IFwiZnVuY3Rpb25cIiA/IHNpZ09yRm4gOiBjYWxsYmFjayA/PyAoKCkgPT4gdGhpcy5nZXQoKSlcbiAgICAgICAgY29uc3Qgc2V0ID0gKG9iajogQ29ubmVjdGFibGUsIC4uLmFyZ3M6IGFueVtdKSA9PiB0aGlzLnNldChmKG9iaiwgLi4uYXJncykpXG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIG9ianMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBbbywgc10gPSBvYmpcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IG8uY29ubmVjdChzLCBzZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyb3BwZWQoKCkgPT4gby5kaXNjb25uZWN0KGlkKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2lnT3JGbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gb2Jqcy5jb25uZWN0KHNpZ09yRm4sIHNldClcbiAgICAgICAgICAgICAgICB0aGlzLm9uRHJvcHBlZCgoKSA9PiBvYmpzLmRpc2Nvbm5lY3QoaWQpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWYXJpYWJsZTxUPlxuICAgIH1cblxuICAgIHN0YXRpYyBkZXJpdmU8XG4gICAgICAgIGNvbnN0IERlcHMgZXh0ZW5kcyBBcnJheTxTdWJzY3JpYmFibGU8YW55Pj4sXG4gICAgICAgIEFyZ3MgZXh0ZW5kcyB7XG4gICAgICAgICAgICBbSyBpbiBrZXlvZiBEZXBzXTogRGVwc1tLXSBleHRlbmRzIFN1YnNjcmliYWJsZTxpbmZlciBUPiA/IFQgOiBuZXZlclxuICAgICAgICB9LFxuICAgICAgICBWID0gQXJncyxcbiAgICA+KGRlcHM6IERlcHMsIGZuOiAoLi4uYXJnczogQXJncykgPT4gViA9ICguLi5hcmdzKSA9PiBhcmdzIGFzIHVua25vd24gYXMgVikge1xuICAgICAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiBmbiguLi5kZXBzLm1hcChkID0+IGQuZ2V0KCkpIGFzIEFyZ3MpXG4gICAgICAgIGNvbnN0IGRlcml2ZWQgPSBuZXcgVmFyaWFibGUodXBkYXRlKCkpXG4gICAgICAgIGNvbnN0IHVuc3VicyA9IGRlcHMubWFwKGRlcCA9PiBkZXAuc3Vic2NyaWJlKCgpID0+IGRlcml2ZWQuc2V0KHVwZGF0ZSgpKSkpXG4gICAgICAgIGRlcml2ZWQub25Ecm9wcGVkKCgpID0+IHVuc3Vicy5tYXAodW5zdWIgPT4gdW5zdWIoKSkpXG4gICAgICAgIHJldHVybiBkZXJpdmVkXG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhcmlhYmxlPFQ+IGV4dGVuZHMgT21pdDxWYXJpYWJsZVdyYXBwZXI8VD4sIFwiYmluZFwiPiB7XG4gICAgPFI+KHRyYW5zZm9ybTogKHZhbHVlOiBUKSA9PiBSKTogQmluZGluZzxSPlxuICAgICgpOiBCaW5kaW5nPFQ+XG59XG5cbmV4cG9ydCBjb25zdCBWYXJpYWJsZSA9IG5ldyBQcm94eShWYXJpYWJsZVdyYXBwZXIgYXMgYW55LCB7XG4gICAgYXBwbHk6IChfdCwgX2EsIGFyZ3MpID0+IG5ldyBWYXJpYWJsZVdyYXBwZXIoYXJnc1swXSksXG59KSBhcyB7XG4gICAgZGVyaXZlOiB0eXBlb2YgVmFyaWFibGVXcmFwcGVyW1wiZGVyaXZlXCJdXG4gICAgPFQ+KGluaXQ6IFQpOiBWYXJpYWJsZTxUPlxuICAgIG5ldzxUPihpbml0OiBUKTogVmFyaWFibGU8VD5cbn1cblxuZXhwb3J0IGNvbnN0IHsgZGVyaXZlIH0gPSBWYXJpYWJsZVxuZXhwb3J0IGRlZmF1bHQgVmFyaWFibGVcbiIsICJleHBvcnQgY29uc3Qgc25ha2VpZnkgPSAoc3RyOiBzdHJpbmcpID0+IHN0clxuICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxXyQyXCIpXG4gICAgLnJlcGxhY2VBbGwoXCItXCIsIFwiX1wiKVxuICAgIC50b0xvd2VyQ2FzZSgpXG5cbmV4cG9ydCBjb25zdCBrZWJhYmlmeSA9IChzdHI6IHN0cmluZykgPT4gc3RyXG4gICAgLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEtJDJcIilcbiAgICAucmVwbGFjZUFsbChcIl9cIiwgXCItXCIpXG4gICAgLnRvTG93ZXJDYXNlKClcblxuZXhwb3J0IGludGVyZmFjZSBTdWJzY3JpYmFibGU8VCA9IHVua25vd24+IHtcbiAgICBzdWJzY3JpYmUoY2FsbGJhY2s6ICh2YWx1ZTogVCkgPT4gdm9pZCk6ICgpID0+IHZvaWRcbiAgICBnZXQoKTogVFxuICAgIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RhYmxlIHtcbiAgICBjb25uZWN0KHNpZ25hbDogc3RyaW5nLCBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiB1bmtub3duKTogbnVtYmVyXG4gICAgZGlzY29ubmVjdChpZDogbnVtYmVyKTogdm9pZFxuICAgIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG5leHBvcnQgY2xhc3MgQmluZGluZzxWYWx1ZT4ge1xuICAgIHByaXZhdGUgdHJhbnNmb3JtRm4gPSAodjogYW55KSA9PiB2XG5cbiAgICAjZW1pdHRlcjogU3Vic2NyaWJhYmxlPFZhbHVlPiB8IENvbm5lY3RhYmxlXG4gICAgI3Byb3A/OiBzdHJpbmdcblxuICAgIHN0YXRpYyBiaW5kPFxuICAgICAgICBUIGV4dGVuZHMgQ29ubmVjdGFibGUsXG4gICAgICAgIFAgZXh0ZW5kcyBrZXlvZiBULFxuICAgID4ob2JqZWN0OiBULCBwcm9wZXJ0eTogUCk6IEJpbmRpbmc8VFtQXT5cblxuICAgIHN0YXRpYyBiaW5kPFQ+KG9iamVjdDogU3Vic2NyaWJhYmxlPFQ+KTogQmluZGluZzxUPlxuXG4gICAgc3RhdGljIGJpbmQoZW1pdHRlcjogQ29ubmVjdGFibGUgfCBTdWJzY3JpYmFibGUsIHByb3A/OiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nKGVtaXR0ZXIsIHByb3ApXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihlbWl0dGVyOiBDb25uZWN0YWJsZSB8IFN1YnNjcmliYWJsZTxWYWx1ZT4sIHByb3A/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy4jZW1pdHRlciA9IGVtaXR0ZXJcbiAgICAgICAgdGhpcy4jcHJvcCA9IHByb3AgJiYga2ViYWJpZnkocHJvcClcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBCaW5kaW5nPCR7dGhpcy4jZW1pdHRlcn0ke3RoaXMuI3Byb3AgPyBgLCBcIiR7dGhpcy4jcHJvcH1cImAgOiBcIlwifT5gXG4gICAgfVxuXG4gICAgYXM8VD4oZm46ICh2OiBWYWx1ZSkgPT4gVCk6IEJpbmRpbmc8VD4ge1xuICAgICAgICBjb25zdCBiaW5kID0gbmV3IEJpbmRpbmcodGhpcy4jZW1pdHRlciwgdGhpcy4jcHJvcClcbiAgICAgICAgYmluZC50cmFuc2Zvcm1GbiA9ICh2OiBWYWx1ZSkgPT4gZm4odGhpcy50cmFuc2Zvcm1Gbih2KSlcbiAgICAgICAgcmV0dXJuIGJpbmQgYXMgdW5rbm93biBhcyBCaW5kaW5nPFQ+XG4gICAgfVxuXG4gICAgZ2V0KCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiNlbWl0dGVyLmdldCA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRm4odGhpcy4jZW1pdHRlci5nZXQoKSlcblxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3Byb3AgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGdldHRlciA9IGBnZXRfJHtzbmFrZWlmeSh0aGlzLiNwcm9wKX1gXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuI2VtaXR0ZXJbZ2V0dGVyXSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUZuKHRoaXMuI2VtaXR0ZXJbZ2V0dGVyXSgpKVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Gbih0aGlzLiNlbWl0dGVyW3RoaXMuI3Byb3BdKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgRXJyb3IoXCJjYW4gbm90IGdldCB2YWx1ZSBvZiBiaW5kaW5nXCIpXG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrOiAodmFsdWU6IFZhbHVlKSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jZW1pdHRlci5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2VtaXR0ZXIuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLmdldCgpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy4jZW1pdHRlci5jb25uZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25hbCA9IGBub3RpZnk6OiR7dGhpcy4jcHJvcH1gXG4gICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuI2VtaXR0ZXIuY29ubmVjdChzaWduYWwsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLmdldCgpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgKHRoaXMuI2VtaXR0ZXIuZGlzY29ubmVjdCBhcyBDb25uZWN0YWJsZVtcImRpc2Nvbm5lY3RcIl0pKGlkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IEVycm9yKGAke3RoaXMuI2VtaXR0ZXJ9IGlzIG5vdCBiaW5kYWJsZWApXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgeyBiaW5kIH0gPSBCaW5kaW5nXG5leHBvcnQgZGVmYXVsdCBCaW5kaW5nXG4iLCAiaW1wb3J0IEFzdGFsIGZyb20gXCJnaTovL0FzdGFsSU9cIlxuXG5leHBvcnQgdHlwZSBUaW1lID0gQXN0YWwuVGltZVxuZXhwb3J0IGNvbnN0IFRpbWUgPSBBc3RhbC5UaW1lXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnZhbChpbnRlcnZhbDogbnVtYmVyLCBjYWxsYmFjaz86ICgpID0+IHZvaWQpIHtcbiAgICByZXR1cm4gQXN0YWwuVGltZS5pbnRlcnZhbChpbnRlcnZhbCwgKCkgPT4gdm9pZCBjYWxsYmFjaz8uKCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lb3V0KHRpbWVvdXQ6IG51bWJlciwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIEFzdGFsLlRpbWUudGltZW91dCh0aW1lb3V0LCAoKSA9PiB2b2lkIGNhbGxiYWNrPy4oKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlkbGUoY2FsbGJhY2s/OiAoKSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIEFzdGFsLlRpbWUuaWRsZSgoKSA9PiB2b2lkIGNhbGxiYWNrPy4oKSlcbn1cbiIsICJpbXBvcnQgQXN0YWwgZnJvbSBcImdpOi8vQXN0YWxJT1wiXG5cbnR5cGUgQXJncyA9IHtcbiAgICBjbWQ6IHN0cmluZyB8IHN0cmluZ1tdXG4gICAgb3V0PzogKHN0ZG91dDogc3RyaW5nKSA9PiB2b2lkXG4gICAgZXJyPzogKHN0ZGVycjogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmV4cG9ydCB0eXBlIFByb2Nlc3MgPSBBc3RhbC5Qcm9jZXNzXG5leHBvcnQgY29uc3QgUHJvY2VzcyA9IEFzdGFsLlByb2Nlc3NcblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnByb2Nlc3MoYXJnczogQXJncyk6IEFzdGFsLlByb2Nlc3NcblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnByb2Nlc3MoXG4gICAgY21kOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBvbk91dD86IChzdGRvdXQ6IHN0cmluZykgPT4gdm9pZCxcbiAgICBvbkVycj86IChzdGRlcnI6IHN0cmluZykgPT4gdm9pZCxcbik6IEFzdGFsLlByb2Nlc3NcblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnByb2Nlc3MoXG4gICAgYXJnc09yQ21kOiBBcmdzIHwgc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgb25PdXQ6IChzdGRvdXQ6IHN0cmluZykgPT4gdm9pZCA9IHByaW50LFxuICAgIG9uRXJyOiAoc3RkZXJyOiBzdHJpbmcpID0+IHZvaWQgPSBwcmludGVycixcbikge1xuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5pc0FycmF5KGFyZ3NPckNtZCkgfHwgdHlwZW9mIGFyZ3NPckNtZCA9PT0gXCJzdHJpbmdcIlxuICAgIGNvbnN0IHsgY21kLCBlcnIsIG91dCB9ID0ge1xuICAgICAgICBjbWQ6IGFyZ3MgPyBhcmdzT3JDbWQgOiBhcmdzT3JDbWQuY21kLFxuICAgICAgICBlcnI6IGFyZ3MgPyBvbkVyciA6IGFyZ3NPckNtZC5lcnIgfHwgb25FcnIsXG4gICAgICAgIG91dDogYXJncyA/IG9uT3V0IDogYXJnc09yQ21kLm91dCB8fCBvbk91dCxcbiAgICB9XG5cbiAgICBjb25zdCBwcm9jID0gQXJyYXkuaXNBcnJheShjbWQpXG4gICAgICAgID8gQXN0YWwuUHJvY2Vzcy5zdWJwcm9jZXNzdihjbWQpXG4gICAgICAgIDogQXN0YWwuUHJvY2Vzcy5zdWJwcm9jZXNzKGNtZClcblxuICAgIHByb2MuY29ubmVjdChcInN0ZG91dFwiLCAoXywgc3Rkb3V0OiBzdHJpbmcpID0+IG91dChzdGRvdXQpKVxuICAgIHByb2MuY29ubmVjdChcInN0ZGVyclwiLCAoXywgc3RkZXJyOiBzdHJpbmcpID0+IGVycihzdGRlcnIpKVxuICAgIHJldHVybiBwcm9jXG59XG5cbi8qKiBAdGhyb3dzIHtHTGliLkVycm9yfSBUaHJvd3Mgc3RkZXJyICovXG5leHBvcnQgZnVuY3Rpb24gZXhlYyhjbWQ6IHN0cmluZyB8IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY21kKVxuICAgICAgICA/IEFzdGFsLlByb2Nlc3MuZXhlY3YoY21kKVxuICAgICAgICA6IEFzdGFsLlByb2Nlc3MuZXhlYyhjbWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjQXN5bmMoY21kOiBzdHJpbmcgfCBzdHJpbmdbXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY21kKSkge1xuICAgICAgICAgICAgQXN0YWwuUHJvY2Vzcy5leGVjX2FzeW5jdihjbWQsIChfLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEFzdGFsLlByb2Nlc3MuZXhlY19hc3luY3ZfZmluaXNoKHJlcykpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBBc3RhbC5Qcm9jZXNzLmV4ZWNfYXN5bmMoY21kLCAoXywgcmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShBc3RhbC5Qcm9jZXNzLmV4ZWNfZmluaXNoKHJlcykpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufVxuIiwgImltcG9ydCBWYXJpYWJsZSBmcm9tIFwiLi92YXJpYWJsZS5qc1wiXG5pbXBvcnQgeyBleGVjQXN5bmMgfSBmcm9tIFwiLi9wcm9jZXNzLmpzXCJcbmltcG9ydCBCaW5kaW5nLCB7IENvbm5lY3RhYmxlLCBrZWJhYmlmeSwgc25ha2VpZnksIFN1YnNjcmliYWJsZSB9IGZyb20gXCIuL2JpbmRpbmcuanNcIlxuXG5leHBvcnQgY29uc3Qgbm9JbXBsaWNpdERlc3Ryb3kgPSBTeW1ib2woXCJubyBubyBpbXBsaWNpdCBkZXN0cm95XCIpXG5leHBvcnQgY29uc3Qgc2V0Q2hpbGRyZW4gPSBTeW1ib2woXCJjaGlsZHJlbiBzZXR0ZXIgbWV0aG9kXCIpXG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUJpbmRpbmdzKGFycmF5OiBhbnlbXSkge1xuICAgIGZ1bmN0aW9uIGdldFZhbHVlcyguLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBsZXQgaSA9IDBcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCh2YWx1ZSA9PiB2YWx1ZSBpbnN0YW5jZW9mIEJpbmRpbmdcbiAgICAgICAgICAgID8gYXJnc1tpKytdXG4gICAgICAgICAgICA6IHZhbHVlLFxuICAgICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgYmluZGluZ3MgPSBhcnJheS5maWx0ZXIoaSA9PiBpIGluc3RhbmNlb2YgQmluZGluZylcblxuICAgIGlmIChiaW5kaW5ncy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBhcnJheVxuXG4gICAgaWYgKGJpbmRpbmdzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgcmV0dXJuIGJpbmRpbmdzWzBdLmFzKGdldFZhbHVlcylcblxuICAgIHJldHVybiBWYXJpYWJsZS5kZXJpdmUoYmluZGluZ3MsIGdldFZhbHVlcykoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0UHJvcChvYmo6IGFueSwgcHJvcDogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGVyID0gYHNldF8ke3NuYWtlaWZ5KHByb3ApfWBcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbc2V0dGVyXSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgcmV0dXJuIG9ialtzZXR0ZXJdKHZhbHVlKVxuXG4gICAgICAgIHJldHVybiAob2JqW3Byb3BdID0gdmFsdWUpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgY291bGQgbm90IHNldCBwcm9wZXJ0eSBcIiR7cHJvcH1cIiBvbiAke29ian06YCwgZXJyb3IpXG4gICAgfVxufVxuXG5leHBvcnQgdHlwZSBCaW5kYWJsZVByb3BzPFQ+ID0ge1xuICAgIFtLIGluIGtleW9mIFRdOiBCaW5kaW5nPFRbS10+IHwgVFtLXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhvb2s8V2lkZ2V0IGV4dGVuZHMgQ29ubmVjdGFibGU+KFxuICAgIHdpZGdldDogV2lkZ2V0LFxuICAgIG9iamVjdDogQ29ubmVjdGFibGUgfCBTdWJzY3JpYmFibGUsXG4gICAgc2lnbmFsT3JDYWxsYmFjazogc3RyaW5nIHwgKChzZWxmOiBXaWRnZXQsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKSxcbiAgICBjYWxsYmFjaz86IChzZWxmOiBXaWRnZXQsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkLFxuKSB7XG4gICAgaWYgKHR5cGVvZiBvYmplY3QuY29ubmVjdCA9PT0gXCJmdW5jdGlvblwiICYmIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGlkID0gb2JqZWN0LmNvbm5lY3Qoc2lnbmFsT3JDYWxsYmFjaywgKF86IGFueSwgLi4uYXJnczogdW5rbm93bltdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sod2lkZ2V0LCAuLi5hcmdzKVxuICAgICAgICB9KVxuICAgICAgICB3aWRnZXQuY29ubmVjdChcImRlc3Ryb3lcIiwgKCkgPT4ge1xuICAgICAgICAgICAgKG9iamVjdC5kaXNjb25uZWN0IGFzIENvbm5lY3RhYmxlW1wiZGlzY29ubmVjdFwiXSkoaWQpXG4gICAgICAgIH0pXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LnN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBzaWduYWxPckNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgdW5zdWIgPSBvYmplY3Quc3Vic2NyaWJlKCguLi5hcmdzOiB1bmtub3duW10pID0+IHtcbiAgICAgICAgICAgIHNpZ25hbE9yQ2FsbGJhY2sod2lkZ2V0LCAuLi5hcmdzKVxuICAgICAgICB9KVxuICAgICAgICB3aWRnZXQuY29ubmVjdChcImRlc3Ryb3lcIiwgdW5zdWIpXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uc3RydWN0PFdpZGdldCBleHRlbmRzIENvbm5lY3RhYmxlICYgeyBbc2V0Q2hpbGRyZW5dOiAoY2hpbGRyZW46IGFueVtdKSA9PiB2b2lkIH0+KHdpZGdldDogV2lkZ2V0LCBjb25maWc6IGFueSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICBsZXQgeyBzZXR1cCwgY2hpbGQsIGNoaWxkcmVuID0gW10sIC4uLnByb3BzIH0gPSBjb25maWdcblxuICAgIGlmIChjaGlsZHJlbiBpbnN0YW5jZW9mIEJpbmRpbmcpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dXG4gICAgfVxuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIGNoaWxkcmVuLnVuc2hpZnQoY2hpbGQpXG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIHVuZGVmaW5lZCB2YWx1ZXNcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wcykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1trZXldXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb2xsZWN0IGJpbmRpbmdzXG4gICAgY29uc3QgYmluZGluZ3M6IEFycmF5PFtzdHJpbmcsIEJpbmRpbmc8YW55Pl0+ID0gT2JqZWN0XG4gICAgICAgIC5rZXlzKHByb3BzKVxuICAgICAgICAucmVkdWNlKChhY2M6IGFueSwgcHJvcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3BzW3Byb3BdIGluc3RhbmNlb2YgQmluZGluZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmcgPSBwcm9wc1twcm9wXVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1twcm9wXVxuICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCBbcHJvcCwgYmluZGluZ11dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIFtdKVxuXG4gICAgLy8gY29sbGVjdCBzaWduYWwgaGFuZGxlcnNcbiAgICBjb25zdCBvbkhhbmRsZXJzOiBBcnJheTxbc3RyaW5nLCBzdHJpbmcgfCAoKCkgPT4gdW5rbm93bildPiA9IE9iamVjdFxuICAgICAgICAua2V5cyhwcm9wcylcbiAgICAgICAgLnJlZHVjZSgoYWNjOiBhbnksIGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKFwib25cIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWcgPSBrZWJhYmlmeShrZXkpLnNwbGl0KFwiLVwiKS5zbGljZSgxKS5qb2luKFwiLVwiKVxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBwcm9wc1trZXldXG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BzW2tleV1cbiAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgW3NpZywgaGFuZGxlcl1dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIFtdKVxuXG4gICAgLy8gc2V0IGNoaWxkcmVuXG4gICAgY29uc3QgbWVyZ2VkQ2hpbGRyZW4gPSBtZXJnZUJpbmRpbmdzKGNoaWxkcmVuLmZsYXQoSW5maW5pdHkpKVxuICAgIGlmIChtZXJnZWRDaGlsZHJlbiBpbnN0YW5jZW9mIEJpbmRpbmcpIHtcbiAgICAgICAgd2lkZ2V0W3NldENoaWxkcmVuXShtZXJnZWRDaGlsZHJlbi5nZXQoKSlcbiAgICAgICAgd2lkZ2V0LmNvbm5lY3QoXCJkZXN0cm95XCIsIG1lcmdlZENoaWxkcmVuLnN1YnNjcmliZSgodikgPT4ge1xuICAgICAgICAgICAgd2lkZ2V0W3NldENoaWxkcmVuXSh2KVxuICAgICAgICB9KSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobWVyZ2VkQ2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgd2lkZ2V0W3NldENoaWxkcmVuXShtZXJnZWRDaGlsZHJlbilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNldHVwIHNpZ25hbCBoYW5kbGVyc1xuICAgIGZvciAoY29uc3QgW3NpZ25hbCwgY2FsbGJhY2tdIG9mIG9uSGFuZGxlcnMpIHtcbiAgICAgICAgY29uc3Qgc2lnID0gc2lnbmFsLnN0YXJ0c1dpdGgoXCJub3RpZnlcIilcbiAgICAgICAgICAgID8gc2lnbmFsLnJlcGxhY2UoXCItXCIsIFwiOjpcIilcbiAgICAgICAgICAgIDogc2lnbmFsXG5cbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB3aWRnZXQuY29ubmVjdChzaWcsIGNhbGxiYWNrKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2lkZ2V0LmNvbm5lY3Qoc2lnLCAoKSA9PiBleGVjQXN5bmMoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgLnRoZW4ocHJpbnQpLmNhdGNoKGNvbnNvbGUuZXJyb3IpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2V0dXAgYmluZGluZ3MgaGFuZGxlcnNcbiAgICBmb3IgKGNvbnN0IFtwcm9wLCBiaW5kaW5nXSBvZiBiaW5kaW5ncykge1xuICAgICAgICBpZiAocHJvcCA9PT0gXCJjaGlsZFwiIHx8IHByb3AgPT09IFwiY2hpbGRyZW5cIikge1xuICAgICAgICAgICAgd2lkZ2V0LmNvbm5lY3QoXCJkZXN0cm95XCIsIGJpbmRpbmcuc3Vic2NyaWJlKCh2OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICB3aWRnZXRbc2V0Q2hpbGRyZW5dKHYpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfVxuICAgICAgICB3aWRnZXQuY29ubmVjdChcImRlc3Ryb3lcIiwgYmluZGluZy5zdWJzY3JpYmUoKHY6IGFueSkgPT4ge1xuICAgICAgICAgICAgc2V0UHJvcCh3aWRnZXQsIHByb3AsIHYpXG4gICAgICAgIH0pKVxuICAgICAgICBzZXRQcm9wKHdpZGdldCwgcHJvcCwgYmluZGluZy5nZXQoKSlcbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgdW5kZWZpbmVkIHZhbHVlc1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BzKSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVsZXRlIHByb3BzW2tleV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24od2lkZ2V0LCBwcm9wcylcbiAgICBzZXR1cD8uKHdpZGdldClcbiAgICByZXR1cm4gd2lkZ2V0XG59XG5cbmZ1bmN0aW9uIGlzQXJyb3dGdW5jdGlvbihmdW5jOiBhbnkpOiBmdW5jIGlzIChhcmdzOiBhbnkpID0+IGFueSB7XG4gICAgcmV0dXJuICFPYmplY3QuaGFzT3duKGZ1bmMsIFwicHJvdG90eXBlXCIpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBqc3goXG4gICAgY3RvcnM6IFJlY29yZDxzdHJpbmcsIHsgbmV3KHByb3BzOiBhbnkpOiBhbnkgfSB8ICgocHJvcHM6IGFueSkgPT4gYW55KT4sXG4gICAgY3Rvcjogc3RyaW5nIHwgKChwcm9wczogYW55KSA9PiBhbnkpIHwgeyBuZXcocHJvcHM6IGFueSk6IGFueSB9LFxuICAgIHsgY2hpbGRyZW4sIC4uLnByb3BzIH06IGFueSxcbikge1xuICAgIGNoaWxkcmVuID8/PSBbXVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNoaWxkcmVuKSlcbiAgICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dXG5cbiAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmZpbHRlcihCb29sZWFuKVxuXG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgcHJvcHMuY2hpbGQgPSBjaGlsZHJlblswXVxuICAgIGVsc2UgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpXG4gICAgICAgIHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW5cblxuICAgIGlmICh0eXBlb2YgY3RvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoaXNBcnJvd0Z1bmN0aW9uKGN0b3JzW2N0b3JdKSlcbiAgICAgICAgICAgIHJldHVybiBjdG9yc1tjdG9yXShwcm9wcylcblxuICAgICAgICByZXR1cm4gbmV3IGN0b3JzW2N0b3JdKHByb3BzKVxuICAgIH1cblxuICAgIGlmIChpc0Fycm93RnVuY3Rpb24oY3RvcikpXG4gICAgICAgIHJldHVybiBjdG9yKHByb3BzKVxuXG4gICAgcmV0dXJuIG5ldyBjdG9yKHByb3BzKVxufVxuIiwgImltcG9ydCB7IG5vSW1wbGljaXREZXN0cm95LCBzZXRDaGlsZHJlbiwgdHlwZSBCaW5kYWJsZVByb3BzLCBjb25zdHJ1Y3QgfSBmcm9tIFwiLi4vX2FzdGFsLmpzXCJcbmltcG9ydCBHdGsgZnJvbSBcImdpOi8vR3RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBHZGsgZnJvbSBcImdpOi8vR2RrP3ZlcnNpb249NC4wXCJcbmltcG9ydCBCaW5kaW5nIGZyb20gXCIuLi9iaW5kaW5nLmpzXCJcblxuZXhwb3J0IGNvbnN0IHR5cGUgPSBTeW1ib2woXCJjaGlsZCB0eXBlXCIpXG5jb25zdCBkdW1teUJ1bGRlciA9IG5ldyBHdGsuQnVpbGRlclxuXG5mdW5jdGlvbiBfZ2V0Q2hpbGRyZW4od2lkZ2V0OiBHdGsuV2lkZ2V0KTogQXJyYXk8R3RrLldpZGdldD4ge1xuICAgIGlmIChcImdldF9jaGlsZFwiIGluIHdpZGdldCAmJiB0eXBlb2Ygd2lkZ2V0LmdldF9jaGlsZCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpZGdldC5nZXRfY2hpbGQoKSA/IFt3aWRnZXQuZ2V0X2NoaWxkKCldIDogW11cbiAgICB9XG5cbiAgICBjb25zdCBjaGlsZHJlbjogQXJyYXk8R3RrLldpZGdldD4gPSBbXVxuICAgIGxldCBjaCA9IHdpZGdldC5nZXRfZmlyc3RfY2hpbGQoKVxuICAgIHdoaWxlIChjaCAhPT0gbnVsbCkge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKGNoKVxuICAgICAgICBjaCA9IGNoLmdldF9uZXh0X3NpYmxpbmcoKVxuICAgIH1cbiAgICByZXR1cm4gY2hpbGRyZW5cbn1cblxuZnVuY3Rpb24gX3NldENoaWxkcmVuKHdpZGdldDogR3RrLldpZGdldCwgY2hpbGRyZW46IGFueVtdKSB7XG4gICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5mbGF0KEluZmluaXR5KS5tYXAoY2ggPT4gY2ggaW5zdGFuY2VvZiBHdGsuV2lkZ2V0XG4gICAgICAgID8gY2hcbiAgICAgICAgOiBuZXcgR3RrLkxhYmVsKHsgdmlzaWJsZTogdHJ1ZSwgbGFiZWw6IFN0cmluZyhjaCkgfSkpXG5cblxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgd2lkZ2V0LnZmdW5jX2FkZF9jaGlsZChcbiAgICAgICAgICAgIGR1bW15QnVsZGVyLFxuICAgICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgICB0eXBlIGluIGNoaWxkID8gY2hpbGRbdHlwZV0gOiBudWxsLFxuICAgICAgICApXG4gICAgfVxufVxuXG50eXBlIENvbmZpZzxUIGV4dGVuZHMgR3RrLldpZGdldD4gPSB7XG4gICAgc2V0Q2hpbGRyZW4od2lkZ2V0OiBULCBjaGlsZHJlbjogYW55W10pOiB2b2lkXG4gICAgZ2V0Q2hpbGRyZW4od2lkZ2V0OiBUKTogQXJyYXk8R3RrLldpZGdldD5cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXN0YWxpZnk8XG4gICAgV2lkZ2V0IGV4dGVuZHMgR3RrLldpZGdldCxcbiAgICBQcm9wcyBleHRlbmRzIEd0ay5XaWRnZXQuQ29uc3RydWN0b3JQcm9wcyA9IEd0ay5XaWRnZXQuQ29uc3RydWN0b3JQcm9wcyxcbiAgICBTaWduYWxzIGV4dGVuZHMgUmVjb3JkPGBvbiR7c3RyaW5nfWAsIEFycmF5PHVua25vd24+PiA9IFJlY29yZDxgb24ke3N0cmluZ31gLCBhbnlbXT4sXG4+KGNsczogeyBuZXcoLi4uYXJnczogYW55W10pOiBXaWRnZXQgfSwgY29uZmlnOiBQYXJ0aWFsPENvbmZpZzxXaWRnZXQ+PiA9IHt9KSB7XG4gICAgT2JqZWN0LmFzc2lnbihjbHMucHJvdG90eXBlLCB7XG4gICAgICAgIFtzZXRDaGlsZHJlbl0oY2hpbGRyZW46IGFueVtdKSB7XG4gICAgICAgICAgICBjb25zdCB3ID0gdGhpcyBhcyB1bmtub3duIGFzIFdpZGdldFxuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiAoY29uZmlnLmdldENoaWxkcmVuPy4odykgfHwgX2dldENoaWxkcmVuKHcpKSkge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIEd0ay5XaWRnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQudW5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkcmVuLmluY2x1ZGVzKGNoaWxkKSAmJiBub0ltcGxpY2l0RGVzdHJveSBpbiB0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQucnVuX2Rpc3Bvc2UoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5zZXRDaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5zZXRDaGlsZHJlbih3LCBjaGlsZHJlbilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3NldENoaWxkcmVuKHcsIGNoaWxkcmVuKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBbY2xzLm5hbWVdOiAoXG4gICAgICAgICAgICBwcm9wczogQ29uc3RydWN0UHJvcHM8V2lkZ2V0LCBQcm9wcywgU2lnbmFscz4gPSB7fSxcbiAgICAgICAgICAgIC4uLmNoaWxkcmVuOiBhbnlbXVxuICAgICAgICApOiBXaWRnZXQgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2lkZ2V0ID0gbmV3IGNscyhcImNzc05hbWVcIiBpbiBwcm9wcyA/IHsgY3NzTmFtZTogcHJvcHMuY3NzTmFtZSB9IDoge30pXG5cbiAgICAgICAgICAgIGlmIChcImNzc05hbWVcIiBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wcy5jc3NOYW1lXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9wcy5ub0ltcGxpY2l0RGVzdHJveSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24od2lkZ2V0LCB7IFtub0ltcGxpY2l0RGVzdHJveV06IHRydWUgfSlcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHMubm9JbXBsaWNpdERlc3Ryb3lcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByb3BzLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHdpZGdldCwgeyBbdHlwZV06IHByb3BzLnR5cGUgfSlcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHMudHlwZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJvcHMsIHsgY2hpbGRyZW4gfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdCh3aWRnZXQgYXMgYW55LCBzZXR1cENvbnRyb2xsZXJzKHdpZGdldCwgcHJvcHMgYXMgYW55KSlcbiAgICAgICAgfSxcbiAgICB9W2Nscy5uYW1lXVxufVxuXG50eXBlIFNpZ0hhbmRsZXI8XG4gICAgVyBleHRlbmRzIEluc3RhbmNlVHlwZTx0eXBlb2YgR3RrLldpZGdldD4sXG4gICAgQXJncyBleHRlbmRzIEFycmF5PHVua25vd24+LFxuPiA9ICgoc2VsZjogVywgLi4uYXJnczogQXJncykgPT4gdW5rbm93bikgfCBzdHJpbmcgfCBzdHJpbmdbXVxuXG5leHBvcnQgeyBCaW5kYWJsZVByb3BzIH1cbmV4cG9ydCB0eXBlIEJpbmRhYmxlQ2hpbGQgPSBHdGsuV2lkZ2V0IHwgQmluZGluZzxHdGsuV2lkZ2V0PlxuXG5leHBvcnQgdHlwZSBDb25zdHJ1Y3RQcm9wczxcbiAgICBTZWxmIGV4dGVuZHMgSW5zdGFuY2VUeXBlPHR5cGVvZiBHdGsuV2lkZ2V0PixcbiAgICBQcm9wcyBleHRlbmRzIEd0ay5XaWRnZXQuQ29uc3RydWN0b3JQcm9wcyxcbiAgICBTaWduYWxzIGV4dGVuZHMgUmVjb3JkPGBvbiR7c3RyaW5nfWAsIEFycmF5PHVua25vd24+PiA9IFJlY29yZDxgb24ke3N0cmluZ31gLCBhbnlbXT4sXG4+ID0gUGFydGlhbDx7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBjYW4ndCBhc3NpZ24gdG8gdW5rbm93biwgYnV0IGl0IHdvcmtzIGFzIGV4cGVjdGVkIHRob3VnaFxuICAgIFtTIGluIGtleW9mIFNpZ25hbHNdOiBTaWdIYW5kbGVyPFNlbGYsIFNpZ25hbHNbU10+XG59PiAmIFBhcnRpYWw8e1xuICAgIFtLZXkgaW4gYG9uJHtzdHJpbmd9YF06IFNpZ0hhbmRsZXI8U2VsZiwgYW55W10+XG59PiAmIFBhcnRpYWw8QmluZGFibGVQcm9wczxPbWl0PFByb3BzLCBcImNzc05hbWVcIiB8IFwiY3NzX25hbWVcIj4+PiAmIHtcbiAgICBub0ltcGxpY2l0RGVzdHJveT86IHRydWVcbiAgICB0eXBlPzogc3RyaW5nXG4gICAgY3NzTmFtZT86IHN0cmluZ1xufSAmIEV2ZW50Q29udHJvbGxlcjxTZWxmPiAmIHtcbiAgICBvbkRlc3Ryb3k/OiAoc2VsZjogU2VsZikgPT4gdW5rbm93blxuICAgIHNldHVwPzogKHNlbGY6IFNlbGYpID0+IHZvaWRcbn1cblxudHlwZSBFdmVudENvbnRyb2xsZXI8U2VsZiBleHRlbmRzIEd0ay5XaWRnZXQ+ID0ge1xuICAgIG9uRm9jdXNFbnRlcj86IChzZWxmOiBTZWxmKSA9PiB2b2lkXG4gICAgb25Gb2N1c0xlYXZlPzogKHNlbGY6IFNlbGYpID0+IHZvaWRcblxuICAgIG9uS2V5UHJlc3NlZD86IChzZWxmOiBTZWxmLCBrZXl2YWw6IG51bWJlciwga2V5Y29kZTogbnVtYmVyLCBzdGF0ZTogR2RrLk1vZGlmaWVyVHlwZSkgPT4gdm9pZFxuICAgIG9uS2V5UmVsZWFzZWQ/OiAoc2VsZjogU2VsZiwga2V5dmFsOiBudW1iZXIsIGtleWNvZGU6IG51bWJlciwgc3RhdGU6IEdkay5Nb2RpZmllclR5cGUpID0+IHZvaWRcbiAgICBvbktleU1vZGlmaWVyPzogKHNlbGY6IFNlbGYsIHN0YXRlOiBHZGsuTW9kaWZpZXJUeXBlKSA9PiB2b2lkXG5cbiAgICBvbkxlZ2FjeT86IChzZWxmOiBTZWxmLCBldmVudDogR2RrLkV2ZW50KSA9PiB2b2lkXG4gICAgb25CdXR0b25QcmVzc2VkPzogKHNlbGY6IFNlbGYsIHN0YXRlOiBHZGsuQnV0dG9uRXZlbnQpID0+IHZvaWRcbiAgICBvbkJ1dHRvblJlbGVhc2VkPzogKHNlbGY6IFNlbGYsIHN0YXRlOiBHZGsuQnV0dG9uRXZlbnQpID0+IHZvaWRcblxuICAgIG9uSG92ZXJFbnRlcj86IChzZWxmOiBTZWxmLCB4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gdm9pZFxuICAgIG9uSG92ZXJMZWF2ZT86IChzZWxmOiBTZWxmKSA9PiB2b2lkXG4gICAgb25Nb3Rpb24/OiAoc2VsZjogU2VsZiwgeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHZvaWRcblxuICAgIG9uU2Nyb2xsPzogKHNlbGY6IFNlbGYsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpID0+IHZvaWRcbiAgICBvblNjcm9sbERlY2VsZXJhdGU/OiAoc2VsZjogU2VsZiwgdmVsX3g6IG51bWJlciwgdmVsX3k6IG51bWJlcikgPT4gdm9pZFxufVxuXG5mdW5jdGlvbiBzZXR1cENvbnRyb2xsZXJzPFQ+KHdpZGdldDogR3RrLldpZGdldCwge1xuICAgIG9uRm9jdXNFbnRlcixcbiAgICBvbkZvY3VzTGVhdmUsXG4gICAgb25LZXlQcmVzc2VkLFxuICAgIG9uS2V5UmVsZWFzZWQsXG4gICAgb25LZXlNb2RpZmllcixcbiAgICBvbkxlZ2FjeSxcbiAgICBvbkJ1dHRvblByZXNzZWQsXG4gICAgb25CdXR0b25SZWxlYXNlZCxcbiAgICBvbkhvdmVyRW50ZXIsXG4gICAgb25Ib3ZlckxlYXZlLFxuICAgIG9uTW90aW9uLFxuICAgIG9uU2Nyb2xsLFxuICAgIG9uU2Nyb2xsRGVjZWxlcmF0ZSxcbiAgICAuLi5wcm9wc1xufTogRXZlbnRDb250cm9sbGVyPEd0ay5XaWRnZXQ+ICYgVCkge1xuICAgIGlmIChvbkZvY3VzRW50ZXIgfHwgb25Gb2N1c0xlYXZlKSB7XG4gICAgICAgIGNvbnN0IGZvY3VzID0gbmV3IEd0ay5FdmVudENvbnRyb2xsZXJGb2N1c1xuICAgICAgICB3aWRnZXQuYWRkX2NvbnRyb2xsZXIoZm9jdXMpXG5cbiAgICAgICAgaWYgKG9uRm9jdXNFbnRlcilcbiAgICAgICAgICAgIGZvY3VzLmNvbm5lY3QoXCJlbnRlclwiLCAoKSA9PiBvbkZvY3VzRW50ZXIod2lkZ2V0KSlcblxuICAgICAgICBpZiAob25Gb2N1c0xlYXZlKVxuICAgICAgICAgICAgZm9jdXMuY29ubmVjdChcImxlYXZlXCIsICgpID0+IG9uRm9jdXNMZWF2ZSh3aWRnZXQpKVxuICAgIH1cblxuICAgIGlmIChvbktleVByZXNzZWQgfHwgb25LZXlSZWxlYXNlZCB8fCBvbktleU1vZGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5ldyBHdGsuRXZlbnRDb250cm9sbGVyS2V5XG4gICAgICAgIHdpZGdldC5hZGRfY29udHJvbGxlcihrZXkpXG5cbiAgICAgICAgaWYgKG9uS2V5UHJlc3NlZClcbiAgICAgICAgICAgIGtleS5jb25uZWN0KFwia2V5LXByZXNzZWRcIiwgKF8sIHZhbCwgY29kZSwgc3RhdGUpID0+IG9uS2V5UHJlc3NlZCh3aWRnZXQsIHZhbCwgY29kZSwgc3RhdGUpKVxuXG4gICAgICAgIGlmIChvbktleVJlbGVhc2VkKVxuICAgICAgICAgICAga2V5LmNvbm5lY3QoXCJrZXktcmVsZWFzZWRcIiwgKF8sIHZhbCwgY29kZSwgc3RhdGUpID0+IG9uS2V5UmVsZWFzZWQod2lkZ2V0LCB2YWwsIGNvZGUsIHN0YXRlKSlcblxuICAgICAgICBpZiAob25LZXlNb2RpZmllcilcbiAgICAgICAgICAgIGtleS5jb25uZWN0KFwibW9kaWZpZXJzXCIsIChfLCBzdGF0ZSkgPT4gb25LZXlNb2RpZmllcih3aWRnZXQsIHN0YXRlKSlcbiAgICB9XG5cbiAgICBpZiAob25MZWdhY3kgfHwgb25CdXR0b25QcmVzc2VkIHx8IG9uQnV0dG9uUmVsZWFzZWQpIHtcbiAgICAgICAgY29uc3QgbGVnYWN5ID0gbmV3IEd0ay5FdmVudENvbnRyb2xsZXJMZWdhY3lcbiAgICAgICAgd2lkZ2V0LmFkZF9jb250cm9sbGVyKGxlZ2FjeSlcblxuICAgICAgICBsZWdhY3kuY29ubmVjdChcImV2ZW50XCIsIChfLCBldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmdldF9ldmVudF90eXBlKCkgPT09IEdkay5FdmVudFR5cGUuQlVUVE9OX1BSRVNTKSB7XG4gICAgICAgICAgICAgICAgb25CdXR0b25QcmVzc2VkPy4od2lkZ2V0LCBldmVudCBhcyBHZGsuQnV0dG9uRXZlbnQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChldmVudC5nZXRfZXZlbnRfdHlwZSgpID09PSBHZGsuRXZlbnRUeXBlLkJVVFRPTl9SRUxFQVNFKSB7XG4gICAgICAgICAgICAgICAgb25CdXR0b25SZWxlYXNlZD8uKHdpZGdldCwgZXZlbnQgYXMgR2RrLkJ1dHRvbkV2ZW50KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvbkxlZ2FjeT8uKHdpZGdldCwgZXZlbnQpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKG9uTW90aW9uIHx8IG9uSG92ZXJFbnRlciB8fCBvbkhvdmVyTGVhdmUpIHtcbiAgICAgICAgY29uc3QgaG92ZXIgPSBuZXcgR3RrLkV2ZW50Q29udHJvbGxlck1vdGlvblxuICAgICAgICB3aWRnZXQuYWRkX2NvbnRyb2xsZXIoaG92ZXIpXG5cbiAgICAgICAgaWYgKG9uSG92ZXJFbnRlcilcbiAgICAgICAgICAgIGhvdmVyLmNvbm5lY3QoXCJlbnRlclwiLCAoXywgeCwgeSkgPT4gb25Ib3ZlckVudGVyKHdpZGdldCwgeCwgeSkpXG5cbiAgICAgICAgaWYgKG9uSG92ZXJMZWF2ZSlcbiAgICAgICAgICAgIGhvdmVyLmNvbm5lY3QoXCJsZWF2ZVwiLCAoKSA9PiBvbkhvdmVyTGVhdmUod2lkZ2V0KSlcblxuICAgICAgICBpZiAob25Nb3Rpb24pXG4gICAgICAgICAgICBob3Zlci5jb25uZWN0KFwibW90aW9uXCIsIChfLCB4LCB5KSA9PiBvbk1vdGlvbih3aWRnZXQsIHgsIHkpKVxuICAgIH1cblxuICAgIGlmIChvblNjcm9sbCB8fCBvblNjcm9sbERlY2VsZXJhdGUpIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsID0gbmV3IEd0ay5FdmVudENvbnRyb2xsZXJTY3JvbGxcbiAgICAgICAgc2Nyb2xsLmZsYWdzID0gR3RrLkV2ZW50Q29udHJvbGxlclNjcm9sbEZsYWdzLkJPVEhfQVhFUyB8IEd0ay5FdmVudENvbnRyb2xsZXJTY3JvbGxGbGFncy5LSU5FVElDXG4gICAgICAgIHdpZGdldC5hZGRfY29udHJvbGxlcihzY3JvbGwpXG5cbiAgICAgICAgaWYgKG9uU2Nyb2xsKVxuICAgICAgICAgICAgc2Nyb2xsLmNvbm5lY3QoXCJzY3JvbGxcIiwgKF8sIHgsIHkpID0+IG9uU2Nyb2xsKHdpZGdldCwgeCwgeSkpXG5cbiAgICAgICAgaWYgKG9uU2Nyb2xsRGVjZWxlcmF0ZSlcbiAgICAgICAgICAgIHNjcm9sbC5jb25uZWN0KFwiZGVjZWxlcmF0ZVwiLCAoXywgeCwgeSkgPT4gb25TY3JvbGxEZWNlbGVyYXRlKHdpZGdldCwgeCwgeSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BzXG59XG4iLCAiaW1wb3J0IEdMaWIgZnJvbSBcImdpOi8vR0xpYj92ZXJzaW9uPTIuMFwiXG5pbXBvcnQgR3RrIGZyb20gXCJnaTovL0d0az92ZXJzaW9uPTQuMFwiXG5pbXBvcnQgQXN0YWwgZnJvbSBcImdpOi8vQXN0YWw/dmVyc2lvbj00LjBcIlxuaW1wb3J0IHsgbWtBcHAgfSBmcm9tIFwiLi4vX2FwcFwiXG5cbkd0ay5pbml0KClcblxuLy8gc3RvcCB0aGlzIGZyb20gbGVha2luZyBpbnRvIHN1YnByb2Nlc3Nlc1xuLy8gYW5kIGdpbyBsYXVuY2ggaW52b2NhdGlvbnNcbkdMaWIudW5zZXRlbnYoXCJMRF9QUkVMT0FEXCIpXG5cbi8vIHVzZXJzIG1pZ2h0IHdhbnQgdG8gdXNlIEFkd2FpdGEgaW4gd2hpY2ggY2FzZSBpdCBoYXMgdG8gYmUgaW5pdGlhbGl6ZWRcbi8vIGl0IG1pZ2h0IGJlIGNvbW1vbiBwaXRmYWxsIHRvIGZvcmdldCBpdCBiZWNhdXNlIGBBcHBgIGlzIG5vdCBgQWR3LkFwcGxpY2F0aW9uYFxuYXdhaXQgaW1wb3J0KFwiZ2k6Ly9BZHc/dmVyc2lvbj0xXCIpXG4gICAgLnRoZW4oKHsgZGVmYXVsdDogQWR3IH0pID0+IEFkdy5pbml0KCkpXG4gICAgLmNhdGNoKCgpID0+IHZvaWQgMClcblxuZXhwb3J0IGRlZmF1bHQgbWtBcHAoQXN0YWwuQXBwbGljYXRpb24pXG4iLCAiLyoqXG4gKiBXb3JrYXJvdW5kIGZvciBcIkNhbid0IGNvbnZlcnQgbm9uLW51bGwgcG9pbnRlciB0byBKUyB2YWx1ZSBcIlxuICovXG5cbmV4cG9ydCB7IH1cblxuY29uc3Qgc25ha2VpZnkgPSAoc3RyOiBzdHJpbmcpID0+IHN0clxuICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxXyQyXCIpXG4gICAgLnJlcGxhY2VBbGwoXCItXCIsIFwiX1wiKVxuICAgIC50b0xvd2VyQ2FzZSgpXG5cbmFzeW5jIGZ1bmN0aW9uIHN1cHByZXNzPFQ+KG1vZDogUHJvbWlzZTx7IGRlZmF1bHQ6IFQgfT4sIHBhdGNoOiAobTogVCkgPT4gdm9pZCkge1xuICAgIHJldHVybiBtb2QudGhlbihtID0+IHBhdGNoKG0uZGVmYXVsdCkpLmNhdGNoKCgpID0+IHZvaWQgMClcbn1cblxuZnVuY3Rpb24gcGF0Y2g8UCBleHRlbmRzIG9iamVjdD4ocHJvdG86IFAsIHByb3A6IEV4dHJhY3Q8a2V5b2YgUCwgc3RyaW5nPikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgcHJvcCwge1xuICAgICAgICBnZXQoKSB7IHJldHVybiB0aGlzW2BnZXRfJHtzbmFrZWlmeShwcm9wKX1gXSgpIH0sXG4gICAgfSlcbn1cblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbEFwcHNcIiksICh7IEFwcHMsIEFwcGxpY2F0aW9uIH0pID0+IHtcbiAgICBwYXRjaChBcHBzLnByb3RvdHlwZSwgXCJsaXN0XCIpXG4gICAgcGF0Y2goQXBwbGljYXRpb24ucHJvdG90eXBlLCBcImtleXdvcmRzXCIpXG4gICAgcGF0Y2goQXBwbGljYXRpb24ucHJvdG90eXBlLCBcImNhdGVnb3JpZXNcIilcbn0pXG5cbmF3YWl0IHN1cHByZXNzKGltcG9ydChcImdpOi8vQXN0YWxCYXR0ZXJ5XCIpLCAoeyBVUG93ZXIgfSkgPT4ge1xuICAgIHBhdGNoKFVQb3dlci5wcm90b3R5cGUsIFwiZGV2aWNlc1wiKVxufSlcblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbEJsdWV0b290aFwiKSwgKHsgQWRhcHRlciwgQmx1ZXRvb3RoLCBEZXZpY2UgfSkgPT4ge1xuICAgIHBhdGNoKEFkYXB0ZXIucHJvdG90eXBlLCBcInV1aWRzXCIpXG4gICAgcGF0Y2goQmx1ZXRvb3RoLnByb3RvdHlwZSwgXCJhZGFwdGVyc1wiKVxuICAgIHBhdGNoKEJsdWV0b290aC5wcm90b3R5cGUsIFwiZGV2aWNlc1wiKVxuICAgIHBhdGNoKERldmljZS5wcm90b3R5cGUsIFwidXVpZHNcIilcbn0pXG5cbmF3YWl0IHN1cHByZXNzKGltcG9ydChcImdpOi8vQXN0YWxIeXBybGFuZFwiKSwgKHsgSHlwcmxhbmQsIE1vbml0b3IsIFdvcmtzcGFjZSB9KSA9PiB7XG4gICAgcGF0Y2goSHlwcmxhbmQucHJvdG90eXBlLCBcImJpbmRzXCIpXG4gICAgcGF0Y2goSHlwcmxhbmQucHJvdG90eXBlLCBcIm1vbml0b3JzXCIpXG4gICAgcGF0Y2goSHlwcmxhbmQucHJvdG90eXBlLCBcIndvcmtzcGFjZXNcIilcbiAgICBwYXRjaChIeXBybGFuZC5wcm90b3R5cGUsIFwiY2xpZW50c1wiKVxuICAgIHBhdGNoKE1vbml0b3IucHJvdG90eXBlLCBcImF2YWlsYWJsZU1vZGVzXCIpXG4gICAgcGF0Y2goTW9uaXRvci5wcm90b3R5cGUsIFwiYXZhaWxhYmxlX21vZGVzXCIpXG4gICAgcGF0Y2goV29ya3NwYWNlLnByb3RvdHlwZSwgXCJjbGllbnRzXCIpXG59KVxuXG5hd2FpdCBzdXBwcmVzcyhpbXBvcnQoXCJnaTovL0FzdGFsTXByaXNcIiksICh7IE1wcmlzLCBQbGF5ZXIgfSkgPT4ge1xuICAgIHBhdGNoKE1wcmlzLnByb3RvdHlwZSwgXCJwbGF5ZXJzXCIpXG4gICAgcGF0Y2goUGxheWVyLnByb3RvdHlwZSwgXCJzdXBwb3J0ZWRfdXJpX3NjaGVtZXNcIilcbiAgICBwYXRjaChQbGF5ZXIucHJvdG90eXBlLCBcInN1cHBvcnRlZFVyaVNjaGVtZXNcIilcbiAgICBwYXRjaChQbGF5ZXIucHJvdG90eXBlLCBcInN1cHBvcnRlZF9taW1lX3R5cGVzXCIpXG4gICAgcGF0Y2goUGxheWVyLnByb3RvdHlwZSwgXCJzdXBwb3J0ZWRNaW1lVHlwZXNcIilcbiAgICBwYXRjaChQbGF5ZXIucHJvdG90eXBlLCBcImNvbW1lbnRzXCIpXG59KVxuXG5hd2FpdCBzdXBwcmVzcyhpbXBvcnQoXCJnaTovL0FzdGFsTmV0d29ya1wiKSwgKHsgV2lmaSB9KSA9PiB7XG4gICAgcGF0Y2goV2lmaS5wcm90b3R5cGUsIFwiYWNjZXNzX3BvaW50c1wiKVxuICAgIHBhdGNoKFdpZmkucHJvdG90eXBlLCBcImFjY2Vzc1BvaW50c1wiKVxufSlcblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbE5vdGlmZFwiKSwgKHsgTm90aWZkLCBOb3RpZmljYXRpb24gfSkgPT4ge1xuICAgIHBhdGNoKE5vdGlmZC5wcm90b3R5cGUsIFwibm90aWZpY2F0aW9uc1wiKVxuICAgIHBhdGNoKE5vdGlmaWNhdGlvbi5wcm90b3R5cGUsIFwiYWN0aW9uc1wiKVxufSlcblxuYXdhaXQgc3VwcHJlc3MoaW1wb3J0KFwiZ2k6Ly9Bc3RhbFBvd2VyUHJvZmlsZXNcIiksICh7IFBvd2VyUHJvZmlsZXMgfSkgPT4ge1xuICAgIHBhdGNoKFBvd2VyUHJvZmlsZXMucHJvdG90eXBlLCBcImFjdGlvbnNcIilcbn0pXG5cbmF3YWl0IHN1cHByZXNzKGltcG9ydChcImdpOi8vQXN0YWxXcFwiKSwgKHsgV3AsIEF1ZGlvLCBWaWRlbyB9KSA9PiB7XG4gICAgcGF0Y2goV3AucHJvdG90eXBlLCBcImVuZHBvaW50c1wiKVxuICAgIHBhdGNoKFdwLnByb3RvdHlwZSwgXCJkZXZpY2VzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcInN0cmVhbXNcIilcbiAgICBwYXRjaChBdWRpby5wcm90b3R5cGUsIFwicmVjb3JkZXJzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcIm1pY3JvcGhvbmVzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcInNwZWFrZXJzXCIpXG4gICAgcGF0Y2goQXVkaW8ucHJvdG90eXBlLCBcImRldmljZXNcIilcbiAgICBwYXRjaChWaWRlby5wcm90b3R5cGUsIFwic3RyZWFtc1wiKVxuICAgIHBhdGNoKFZpZGVvLnByb3RvdHlwZSwgXCJyZWNvcmRlcnNcIilcbiAgICBwYXRjaChWaWRlby5wcm90b3R5cGUsIFwic2lua3NcIilcbiAgICBwYXRjaChWaWRlby5wcm90b3R5cGUsIFwic291cmNlc1wiKVxuICAgIHBhdGNoKFZpZGVvLnByb3RvdHlwZSwgXCJkZXZpY2VzXCIpXG59KVxuIiwgImltcG9ydCBcIi4vb3ZlcnJpZGVzLmpzXCJcbmltcG9ydCB7IHNldENvbnNvbGVMb2dEb21haW4gfSBmcm9tIFwiY29uc29sZVwiXG5pbXBvcnQgeyBleGl0LCBwcm9ncmFtQXJncyB9IGZyb20gXCJzeXN0ZW1cIlxuaW1wb3J0IElPIGZyb20gXCJnaTovL0FzdGFsSU9cIlxuaW1wb3J0IEdPYmplY3QgZnJvbSBcImdpOi8vR09iamVjdFwiXG5pbXBvcnQgR2lvIGZyb20gXCJnaTovL0dpbz92ZXJzaW9uPTIuMFwiXG5pbXBvcnQgdHlwZSBBc3RhbDMgZnJvbSBcImdpOi8vQXN0YWw/dmVyc2lvbj0zLjBcIlxuaW1wb3J0IHR5cGUgQXN0YWw0IGZyb20gXCJnaTovL0FzdGFsP3ZlcnNpb249NC4wXCJcblxudHlwZSBDb25maWcgPSBQYXJ0aWFsPHtcbiAgICBpbnN0YW5jZU5hbWU6IHN0cmluZ1xuICAgIGNzczogc3RyaW5nXG4gICAgaWNvbnM6IHN0cmluZ1xuICAgIGd0a1RoZW1lOiBzdHJpbmdcbiAgICBpY29uVGhlbWU6IHN0cmluZ1xuICAgIGN1cnNvclRoZW1lOiBzdHJpbmdcbiAgICBob2xkOiBib29sZWFuXG4gICAgcmVxdWVzdEhhbmRsZXIocmVxdWVzdDogc3RyaW5nLCByZXM6IChyZXNwb25zZTogYW55KSA9PiB2b2lkKTogdm9pZFxuICAgIG1haW4oLi4uYXJnczogc3RyaW5nW10pOiB2b2lkXG4gICAgY2xpZW50KG1lc3NhZ2U6IChtc2c6IHN0cmluZykgPT4gc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSk6IHZvaWRcbn0+XG5cbmludGVyZmFjZSBBc3RhbDNKUyBleHRlbmRzIEFzdGFsMy5BcHBsaWNhdGlvbiB7XG4gICAgZXZhbChib2R5OiBzdHJpbmcpOiBQcm9taXNlPGFueT5cbiAgICByZXF1ZXN0SGFuZGxlcjogQ29uZmlnW1wicmVxdWVzdEhhbmRsZXJcIl1cbiAgICBhcHBseV9jc3Moc3R5bGU6IHN0cmluZywgcmVzZXQ/OiBib29sZWFuKTogdm9pZFxuICAgIHF1aXQoY29kZT86IG51bWJlcik6IHZvaWRcbiAgICBzdGFydChjb25maWc/OiBDb25maWcpOiB2b2lkXG59XG5cbmludGVyZmFjZSBBc3RhbDRKUyBleHRlbmRzIEFzdGFsNC5BcHBsaWNhdGlvbiB7XG4gICAgZXZhbChib2R5OiBzdHJpbmcpOiBQcm9taXNlPGFueT5cbiAgICByZXF1ZXN0SGFuZGxlcj86IENvbmZpZ1tcInJlcXVlc3RIYW5kbGVyXCJdXG4gICAgYXBwbHlfY3NzKHN0eWxlOiBzdHJpbmcsIHJlc2V0PzogYm9vbGVhbik6IHZvaWRcbiAgICBxdWl0KGNvZGU/OiBudW1iZXIpOiB2b2lkXG4gICAgc3RhcnQoY29uZmlnPzogQ29uZmlnKTogdm9pZFxufVxuXG50eXBlIEFwcDMgPSB0eXBlb2YgQXN0YWwzLkFwcGxpY2F0aW9uXG50eXBlIEFwcDQgPSB0eXBlb2YgQXN0YWw0LkFwcGxpY2F0aW9uXG5cbmV4cG9ydCBmdW5jdGlvbiBta0FwcDxBcHAgZXh0ZW5kcyBBcHAzPihBcHA6IEFwcCk6IEFzdGFsM0pTXG5leHBvcnQgZnVuY3Rpb24gbWtBcHA8QXBwIGV4dGVuZHMgQXBwND4oQXBwOiBBcHApOiBBc3RhbDRKU1xuXG5leHBvcnQgZnVuY3Rpb24gbWtBcHAoQXBwOiBBcHAzIHwgQXBwNCkge1xuICAgIHJldHVybiBuZXcgKGNsYXNzIEFzdGFsSlMgZXh0ZW5kcyBBcHAge1xuICAgICAgICBzdGF0aWMgeyBHT2JqZWN0LnJlZ2lzdGVyQ2xhc3MoeyBHVHlwZU5hbWU6IFwiQXN0YWxKU1wiIH0sIHRoaXMgYXMgYW55KSB9XG5cbiAgICAgICAgZXZhbChib2R5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZuID0gRnVuY3Rpb24oYHJldHVybiAoYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAke2JvZHkuaW5jbHVkZXMoXCI7XCIpID8gYm9keSA6IGByZXR1cm4gJHtib2R5fTtgfVxuICAgICAgICAgICAgICAgICAgICB9KWApXG4gICAgICAgICAgICAgICAgICAgIGZuKCkoKS50aGVuKHJlcykuY2F0Y2gocmVqKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlaihlcnJvcilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdEhhbmRsZXI/OiBDb25maWdbXCJyZXF1ZXN0SGFuZGxlclwiXVxuXG4gICAgICAgIHZmdW5jX3JlcXVlc3QobXNnOiBzdHJpbmcsIGNvbm46IEdpby5Tb2NrZXRDb25uZWN0aW9uKTogdm9pZCB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucmVxdWVzdEhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdEhhbmRsZXIobXNnLCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgSU8ud3JpdGVfc29jayhjb25uLCBTdHJpbmcocmVzcG9uc2UpLCAoXywgcmVzKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgSU8ud3JpdGVfc29ja19maW5pc2gocmVzKSxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1cGVyLnZmdW5jX3JlcXVlc3QobXNnLCBjb25uKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXBwbHlfY3NzKHN0eWxlOiBzdHJpbmcsIHJlc2V0ID0gZmFsc2UpIHtcbiAgICAgICAgICAgIHN1cGVyLmFwcGx5X2NzcyhzdHlsZSwgcmVzZXQpXG4gICAgICAgIH1cblxuICAgICAgICBxdWl0KGNvZGU/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgICAgIHN1cGVyLnF1aXQoKVxuICAgICAgICAgICAgZXhpdChjb2RlID8/IDApXG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCh7IHJlcXVlc3RIYW5kbGVyLCBjc3MsIGhvbGQsIG1haW4sIGNsaWVudCwgaWNvbnMsIC4uLmNmZyB9OiBDb25maWcgPSB7fSkge1xuICAgICAgICAgICAgY29uc3QgYXBwID0gdGhpcyBhcyB1bmtub3duIGFzIEluc3RhbmNlVHlwZTxBcHAzIHwgQXBwND5cblxuICAgICAgICAgICAgY2xpZW50ID8/PSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcHJpbnQoYEFzdGFsIGluc3RhbmNlIFwiJHthcHAuaW5zdGFuY2VOYW1lfVwiIGFscmVhZHkgcnVubmluZ2ApXG4gICAgICAgICAgICAgICAgZXhpdCgxKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNmZylcbiAgICAgICAgICAgIHNldENvbnNvbGVMb2dEb21haW4oYXBwLmluc3RhbmNlTmFtZSlcblxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0SGFuZGxlciA9IHJlcXVlc3RIYW5kbGVyXG4gICAgICAgICAgICBhcHAuY29ubmVjdChcImFjdGl2YXRlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBtYWluPy4oLi4ucHJvZ3JhbUFyZ3MpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGFwcC5hY3F1aXJlX3NvY2tldCgpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnQobXNnID0+IElPLnNlbmRfcmVxdWVzdChhcHAuaW5zdGFuY2VOYW1lLCBtc2cpISwgLi4ucHJvZ3JhbUFyZ3MpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseV9jc3MoY3NzLCBmYWxzZSlcblxuICAgICAgICAgICAgaWYgKGljb25zKVxuICAgICAgICAgICAgICAgIGFwcC5hZGRfaWNvbnMoaWNvbnMpXG5cbiAgICAgICAgICAgIGhvbGQgPz89IHRydWVcbiAgICAgICAgICAgIGlmIChob2xkKVxuICAgICAgICAgICAgICAgIGFwcC5ob2xkKClcblxuICAgICAgICAgICAgYXBwLnJ1bkFzeW5jKFtdKVxuICAgICAgICB9XG4gICAgfSlcbn1cbiIsICJpbXBvcnQgQXN0YWwgZnJvbSBcImdpOi8vQXN0YWw/dmVyc2lvbj00LjBcIlxuaW1wb3J0IEd0ayBmcm9tIFwiZ2k6Ly9HdGs/dmVyc2lvbj00LjBcIlxuaW1wb3J0IGFzdGFsaWZ5LCB7IHR5cGUsIHR5cGUgQ29uc3RydWN0UHJvcHMgfSBmcm9tIFwiLi9hc3RhbGlmeS5qc1wiXG5cbmZ1bmN0aW9uIGZpbHRlcihjaGlsZHJlbjogYW55W10pIHtcbiAgICByZXR1cm4gY2hpbGRyZW4uZmxhdChJbmZpbml0eSkubWFwKGNoID0+IGNoIGluc3RhbmNlb2YgR3RrLldpZGdldFxuICAgICAgICA/IGNoXG4gICAgICAgIDogbmV3IEd0ay5MYWJlbCh7IHZpc2libGU6IHRydWUsIGxhYmVsOiBTdHJpbmcoY2gpIH0pKVxufVxuXG4vLyBCb3hcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3RhbC5Cb3gucHJvdG90eXBlLCBcImNoaWxkcmVuXCIsIHtcbiAgICBnZXQoKSB7IHJldHVybiB0aGlzLmdldF9jaGlsZHJlbigpIH0sXG4gICAgc2V0KHYpIHsgdGhpcy5zZXRfY2hpbGRyZW4odikgfSxcbn0pXG5cbmV4cG9ydCB0eXBlIEJveFByb3BzID0gQ29uc3RydWN0UHJvcHM8QXN0YWwuQm94LCBBc3RhbC5Cb3guQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBCb3ggPSBhc3RhbGlmeTxBc3RhbC5Cb3gsIEFzdGFsLkJveC5Db25zdHJ1Y3RvclByb3BzPihBc3RhbC5Cb3gsIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7IHJldHVybiBzZWxmLmdldF9jaGlsZHJlbigpIH0sXG4gICAgc2V0Q2hpbGRyZW4oc2VsZiwgY2hpbGRyZW4pIHsgcmV0dXJuIHNlbGYuc2V0X2NoaWxkcmVuKGZpbHRlcihjaGlsZHJlbikpIH0sXG59KVxuXG4vLyBCdXR0b25cbnR5cGUgQnV0dG9uU2lnbmFscyA9IHtcbiAgICBvbkNsaWNrZWQ6IFtdXG59XG5cbmV4cG9ydCB0eXBlIEJ1dHRvblByb3BzID0gQ29uc3RydWN0UHJvcHM8R3RrLkJ1dHRvbiwgR3RrLkJ1dHRvbi5Db25zdHJ1Y3RvclByb3BzLCBCdXR0b25TaWduYWxzPlxuZXhwb3J0IGNvbnN0IEJ1dHRvbiA9IGFzdGFsaWZ5PEd0ay5CdXR0b24sIEd0ay5CdXR0b24uQ29uc3RydWN0b3JQcm9wcywgQnV0dG9uU2lnbmFscz4oR3RrLkJ1dHRvbilcblxuLy8gQ2VudGVyQm94XG5leHBvcnQgdHlwZSBDZW50ZXJCb3hQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5DZW50ZXJCb3gsIEd0ay5DZW50ZXJCb3guQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBDZW50ZXJCb3ggPSBhc3RhbGlmeTxHdGsuQ2VudGVyQm94LCBHdGsuQ2VudGVyQm94LkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5DZW50ZXJCb3gsIHtcbiAgICBnZXRDaGlsZHJlbihib3gpIHtcbiAgICAgICAgcmV0dXJuIFtib3guc3RhcnRXaWRnZXQsIGJveC5jZW50ZXJXaWRnZXQsIGJveC5lbmRXaWRnZXRdXG4gICAgfSxcbiAgICBzZXRDaGlsZHJlbihib3gsIGNoaWxkcmVuKSB7XG4gICAgICAgIGNvbnN0IGNoID0gZmlsdGVyKGNoaWxkcmVuKVxuICAgICAgICBib3guc3RhcnRXaWRnZXQgPSBjaFswXSB8fCBuZXcgR3RrLkJveFxuICAgICAgICBib3guY2VudGVyV2lkZ2V0ID0gY2hbMV0gfHwgbmV3IEd0ay5Cb3hcbiAgICAgICAgYm94LmVuZFdpZGdldCA9IGNoWzJdIHx8IG5ldyBHdGsuQm94XG4gICAgfSxcbn0pXG5cbi8vIFRPRE86IENpcmN1bGFyUHJvZ3Jlc3Ncbi8vIFRPRE86IERyYXdpbmdBcmVhXG5cbi8vIEVudHJ5XG50eXBlIEVudHJ5U2lnbmFscyA9IHtcbiAgICBvbkFjdGl2YXRlOiBbXVxuICAgIG9uTm90aWZ5VGV4dDogW11cbn1cblxuZXhwb3J0IHR5cGUgRW50cnlQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5FbnRyeSwgR3RrLkVudHJ5LkNvbnN0cnVjdG9yUHJvcHMsIEVudHJ5U2lnbmFscz5cbmV4cG9ydCBjb25zdCBFbnRyeSA9IGFzdGFsaWZ5PEd0ay5FbnRyeSwgR3RrLkVudHJ5LkNvbnN0cnVjdG9yUHJvcHMsIEVudHJ5U2lnbmFscz4oR3RrLkVudHJ5LCB7XG4gICAgZ2V0Q2hpbGRyZW4oKSB7IHJldHVybiBbXSB9LFxufSlcblxuLy8gSW1hZ2VcbmV4cG9ydCB0eXBlIEltYWdlUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxHdGsuSW1hZ2UsIEd0ay5JbWFnZS5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IEltYWdlID0gYXN0YWxpZnk8R3RrLkltYWdlLCBHdGsuSW1hZ2UuQ29uc3RydWN0b3JQcm9wcz4oR3RrLkltYWdlLCB7XG4gICAgZ2V0Q2hpbGRyZW4oKSB7IHJldHVybiBbXSB9LFxufSlcblxuLy8gTGFiZWxcbmV4cG9ydCB0eXBlIExhYmVsUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxHdGsuTGFiZWwsIEd0ay5MYWJlbC5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IExhYmVsID0gYXN0YWxpZnk8R3RrLkxhYmVsLCBHdGsuTGFiZWwuQ29uc3RydWN0b3JQcm9wcz4oR3RrLkxhYmVsLCB7XG4gICAgZ2V0Q2hpbGRyZW4oKSB7IHJldHVybiBbXSB9LFxuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7IHNlbGYubGFiZWwgPSBTdHJpbmcoY2hpbGRyZW4pIH0sXG59KVxuXG4vLyBMZXZlbEJhclxuZXhwb3J0IHR5cGUgTGV2ZWxCYXJQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5MZXZlbEJhciwgR3RrLkxldmVsQmFyLkNvbnN0cnVjdG9yUHJvcHM+XG5leHBvcnQgY29uc3QgTGV2ZWxCYXIgPSBhc3RhbGlmeTxHdGsuTGV2ZWxCYXIsIEd0ay5MZXZlbEJhci5Db25zdHJ1Y3RvclByb3BzPihHdGsuTGV2ZWxCYXIsIHtcbiAgICBnZXRDaGlsZHJlbigpIHsgcmV0dXJuIFtdIH0sXG59KVxuXG4vLyBUT0RPOiBMaXN0Qm94XG5cbi8vIE92ZXJsYXlcbmV4cG9ydCB0eXBlIE92ZXJsYXlQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5PdmVybGF5LCBHdGsuT3ZlcmxheS5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IE92ZXJsYXkgPSBhc3RhbGlmeTxHdGsuT3ZlcmxheSwgR3RrLk92ZXJsYXkuQ29uc3RydWN0b3JQcm9wcz4oR3RrLk92ZXJsYXksIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuOiBBcnJheTxHdGsuV2lkZ2V0PiA9IFtdXG4gICAgICAgIGxldCBjaCA9IHNlbGYuZ2V0X2ZpcnN0X2NoaWxkKClcbiAgICAgICAgd2hpbGUgKGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGNoKVxuICAgICAgICAgICAgY2ggPSBjaC5nZXRfbmV4dF9zaWJsaW5nKClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5maWx0ZXIoY2ggPT4gY2ggIT09IHNlbGYuY2hpbGQpXG4gICAgfSxcbiAgICBzZXRDaGlsZHJlbihzZWxmLCBjaGlsZHJlbikge1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGZpbHRlcihjaGlsZHJlbikpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVzID0gdHlwZSBpbiBjaGlsZFxuICAgICAgICAgICAgICAgID8gKGNoaWxkW3R5cGVdIGFzIHN0cmluZykuc3BsaXQoL1xccysvKVxuICAgICAgICAgICAgICAgIDogW11cblxuICAgICAgICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKFwib3ZlcmxheVwiKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYWRkX292ZXJsYXkoY2hpbGQpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0X2NoaWxkKGNoaWxkKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLnNldF9tZWFzdXJlX292ZXJsYXkoY2hpbGQsIHR5cGVzLmluY2x1ZGVzKFwibWVhc3VyZVwiKSlcbiAgICAgICAgICAgIHNlbGYuc2V0X2NsaXBfb3ZlcmxheShjaGlsZCwgdHlwZXMuaW5jbHVkZXMoXCJjbGlwXCIpKVxuICAgICAgICB9XG4gICAgfSxcbn0pXG5cbi8vIFJldmVhbGVyXG5leHBvcnQgdHlwZSBSZXZlYWxlclByb3BzID0gQ29uc3RydWN0UHJvcHM8R3RrLlJldmVhbGVyLCBHdGsuUmV2ZWFsZXIuQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBSZXZlYWxlciA9IGFzdGFsaWZ5PEd0ay5SZXZlYWxlciwgR3RrLlJldmVhbGVyLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5SZXZlYWxlcilcblxuLy8gU2xpZGVyXG50eXBlIFNsaWRlclNpZ25hbHMgPSB7XG4gICAgb25DaGFuZ2VWYWx1ZTogW11cbn1cblxuZXhwb3J0IHR5cGUgU2xpZGVyUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxBc3RhbC5TbGlkZXIsIEFzdGFsLlNsaWRlci5Db25zdHJ1Y3RvclByb3BzLCBTbGlkZXJTaWduYWxzPlxuZXhwb3J0IGNvbnN0IFNsaWRlciA9IGFzdGFsaWZ5PEFzdGFsLlNsaWRlciwgQXN0YWwuU2xpZGVyLkNvbnN0cnVjdG9yUHJvcHMsIFNsaWRlclNpZ25hbHM+KEFzdGFsLlNsaWRlciwge1xuICAgIGdldENoaWxkcmVuKCkgeyByZXR1cm4gW10gfSxcbn0pXG5cbi8vIFN0YWNrXG5leHBvcnQgdHlwZSBTdGFja1Byb3BzID0gQ29uc3RydWN0UHJvcHM8R3RrLlN0YWNrLCBHdGsuU3RhY2suQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBTdGFjayA9IGFzdGFsaWZ5PEd0ay5TdGFjaywgR3RrLlN0YWNrLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5TdGFjaywge1xuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZmlsdGVyKGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5hbWUgIT0gXCJcIiAmJiBjaGlsZC5uYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFkZF9uYW1lZChjaGlsZCwgY2hpbGQubmFtZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGRfY2hpbGQoY2hpbGQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxufSlcblxuLy8gU3dpdGNoXG5leHBvcnQgdHlwZSBTd2l0Y2hQcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5Td2l0Y2gsIEd0ay5Td2l0Y2guQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBTd2l0Y2ggPSBhc3RhbGlmeTxHdGsuU3dpdGNoLCBHdGsuU3dpdGNoLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5Td2l0Y2gsIHtcbiAgICBnZXRDaGlsZHJlbigpIHsgcmV0dXJuIFtdIH0sXG59KVxuXG4vLyBXaW5kb3dcbmV4cG9ydCB0eXBlIFdpbmRvd1Byb3BzID0gQ29uc3RydWN0UHJvcHM8QXN0YWwuV2luZG93LCBBc3RhbC5XaW5kb3cuQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBXaW5kb3cgPSBhc3RhbGlmeTxBc3RhbC5XaW5kb3csIEFzdGFsLldpbmRvdy5Db25zdHJ1Y3RvclByb3BzPihBc3RhbC5XaW5kb3cpXG5cbi8vIE1lbnVCdXR0b25cbmV4cG9ydCB0eXBlIE1lbnVCdXR0b25Qcm9wcyA9IENvbnN0cnVjdFByb3BzPEd0ay5NZW51QnV0dG9uLCBHdGsuTWVudUJ1dHRvbi5Db25zdHJ1Y3RvclByb3BzPlxuZXhwb3J0IGNvbnN0IE1lbnVCdXR0b24gPSBhc3RhbGlmeTxHdGsuTWVudUJ1dHRvbiwgR3RrLk1lbnVCdXR0b24uQ29uc3RydWN0b3JQcm9wcz4oR3RrLk1lbnVCdXR0b24sIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7IHJldHVybiBbc2VsZi5wb3BvdmVyLCBzZWxmLmNoaWxkXSB9LFxuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZmlsdGVyKGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgR3RrLlBvcG92ZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNldF9wb3BvdmVyKGNoaWxkKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNldF9jaGlsZChjaGlsZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG59KVxuXG4vLyBQb3BvcGVyXG5leHBvcnQgdHlwZSBQb3BvdmVyUHJvcHMgPSBDb25zdHJ1Y3RQcm9wczxHdGsuUG9wb3ZlciwgR3RrLlBvcG92ZXIuQ29uc3RydWN0b3JQcm9wcz5cbmV4cG9ydCBjb25zdCBQb3BvdmVyID0gYXN0YWxpZnk8R3RrLlBvcG92ZXIsIEd0ay5Qb3BvdmVyLkNvbnN0cnVjdG9yUHJvcHM+KEd0ay5Qb3BvdmVyKVxuIiwgImJ1dHRvbiwgYnV0dG9uICosIHBvcG92ZXIsIHBvcG92ZXIgKiwgKiB7XG4gIGZvbnQtZmFtaWx5OiBcIk1vbm9zcGFjZVwiO1xuICBmb250LXNpemU6IDE2cHg7XG4gIC1ndGstaWNvbi1zaXplOiAxNnB4O1xuICBjb2xvcjogI2NkZDZmNDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlci13aWR0aDogMDtcbiAgYm9yZGVyLXN0eWxlOiBub25lO1xuICBib3gtc2hhZG93OiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG59XG5cbi5CYWNrZ3JvdW5kIHtcbiAgcGFkZGluZzogMjBweDtcbiAgbWFyZ2luOiA1cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICMxZTFlMmU7XG4gIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW4tb3V0O1xuICBvcGFjaXR5OiAwLjU7XG59XG4uQmFja2dyb3VuZCAuTWVkaWEge1xuICBib3JkZXI6IDJweCBzb2xpZCAjNzRjN2VjO1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTJlO1xufVxuLkJhY2tncm91bmQgLk1lZGlhICoge1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlLWluLW91dDtcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYSAuTXByaXNJbmZvIHtcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXItcmFkaXVzOiAwIDAgN3B4IDdweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYSAuTXByaXNJbmZvIC5NcHJpc0xhYmVsIHtcbiAgY29sb3I6ICM3NGM3ZWM7XG59XG4uQmFja2dyb3VuZCAuTWVkaWEgLkNhdmFDb250YWluZXIge1xuICBib3JkZXItcmFkaXVzOiA2cHggNnB4IDBweCAwcHg7XG4gIGNvbG9yOiAjNzRjN2VjO1xuICBiYWNrZ3JvdW5kOiBub25lO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZyAuQ2F2YUNvbnRhaW5lciB7XG4gIGNvbG9yOiAjNzRjN2VjO1xuICBiYWNrZ3JvdW5kOiBub25lO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZyAuTXByaXNJbmZvIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzc0YzdlYztcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYVBsYXlpbmcgLk1wcmlzSW5mbyAuTXByaXNMYWJlbCB7XG4gIGNvbG9yOiAjMWUxZTJlO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZzpob3ZlciAuQ2F2YUNvbnRhaW5lciB7XG4gIGNvbG9yOiAjMWUxZTJlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzRjN2VjO1xufVxuLkJhY2tncm91bmQgLk1lZGlhUGxheWluZzpob3ZlciAuTXByaXNJbmZvIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbn1cbi5CYWNrZ3JvdW5kIC5NZWRpYVBsYXlpbmc6aG92ZXIgLk1wcmlzSW5mbyAuTXByaXNMYWJlbCB7XG4gIGNvbG9yOiAjNzRjN2VjO1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lICoge1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlLWluLW91dDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbn1cbi5CYWNrZ3JvdW5kIC5EYXRlVGltZSAuVGltZSB7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW4tb3V0O1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lIC5UaW1lIC5UaW1lTGFiZWwge1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgZm9udC1zaXplOiA5MHB4O1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lIC5UaW1lIHBvcG92ZXIgPiBjb250ZW50cyB7XG4gIHBhZGRpbmc6IDVweDtcbiAgYmFja2dyb3VuZDogIzMxMzI0NDtcbiAgYm9yZGVyOiAycHggc29saWQgIzc0YzdlYztcbn1cbi5CYWNrZ3JvdW5kIC5EYXRlVGltZSAuVGltZSBwb3BvdmVyID4gY29udGVudHMgLkNhbGVuZGFyQ29udGFpbmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbiAgY29sb3I6ICNjZGQ2ZjQ7XG59XG4uQmFja2dyb3VuZCAuRGF0ZVRpbWUgLlRpbWUgcG9wb3ZlciA+IGNvbnRlbnRzIC5DYWxlbmRhckNvbnRhaW5lciBsYWJlbC50b2RheSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4OWI0ZmE7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6ICMxZTFlMmU7XG59XG4uQmFja2dyb3VuZCAuRGF0ZVRpbWUgLlRpbWUgcG9wb3ZlciA+IGNvbnRlbnRzIC5DYWxlbmRhckNvbnRhaW5lciBsYWJlbDpzZWxlY3RlZCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNiNGJlZmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6ICMxZTFlMmU7XG59XG4uQmFja2dyb3VuZCAuRGF0ZVRpbWUgLlRpbWU6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzRjN2VjO1xufVxuLkJhY2tncm91bmQgLkRhdGVUaW1lIC5UaW1lOmhvdmVyIC5UaW1lTGFiZWwge1xuICBjb2xvcjogIzE4MTgyNTtcbn1cbi5CYWNrZ3JvdW5kIC5EYXRlVGltZSAuRGF0ZSB7XG4gIGZvbnQtc2l6ZTogNDBweDtcbn1cbi5CYWNrZ3JvdW5kOmhvdmVyIHtcbiAgb3BhY2l0eTogMC45O1xufVxuXG4uU3lzdGVtTW9uaXRvciwgLkF1ZGlvQ29udHJvbCwgLlN5c3RlbVRyYXksIC5XaXJlZCwgLldpZmksIC5NaW5pVGltZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMxZTFlMmU7XG4gIGJvcmRlcjogMnB4IHNvbGlkICM4OWI0ZmE7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIHBhZGRpbmc6IDBweCAycHg7XG4gIG1hcmdpbjogMHB4IDJweDtcbn1cblxuLkNwdVVzYWdlLCAuTWVtb3J5VXNhZ2UsIC5CYXR0ZXJ5LCAuSWNvbkJ0biwgLkxhYmVsQXVkaW9Db250cm9sLCAuQXVkaW9Db250cm9sQnRuLCAuVHJheUl0ZW0sIC5XaXJlZCwgLldpZmksIC5NaW5pVGltZSB7XG4gIHBhZGRpbmc6IDFweCA0cHg7XG59XG5cbi5CYXR0ZXJ5SWNvbiwgLkNwdVVzYWdlSWNvbiwgLk1lbW9yeVVzYWdlSWNvbiB7XG4gIG1hcmdpbjogMHB4IDVweCAwcHggMHB4O1xufVxuXG4uQ3B1VXNhZ2UgLkNwdVVzYWdlSWNvbiwgLkNwdVVzYWdlIC5DcHVVc2FnZUxhYmVsIHtcbiAgY29sb3I6ICNhNmUzYTE7XG59XG5cbi5NZW1vcnlVc2FnZSAuTWVtb3J5VXNhZ2VJY29uLCAuTWVtb3J5VXNhZ2UgLk1lbW9yeVVzYWdlTGFiZWwge1xuICBjb2xvcjogI2ZhYjM4Nztcbn1cblxuLkJhdHRlcnkgLkJhdHRlcnlJY29uLCAuQmF0dGVyeSAuQmF0dGVyeUxhYmVsIHtcbiAgY29sb3I6ICNiNGJlZmU7XG59XG5cbi5CYXR0ZXJ5Q3JpdGljYWwgLkJhdHRlcnlJY29uLCAuQmF0dGVyeUNyaXRpY2FsIC5CYXR0ZXJ5TGFiZWwge1xuICBjb2xvcjogI2YzOGJhODtcbn1cblxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSB7XG4gIG1hcmdpbjogMTBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzMxMzI0NDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgcGFkZGluZzogNXB4O1xufVxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSA+IGNvbnRlbnRzIHtcbiAgcGFkZGluZzogNXB4O1xufVxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSBtb2RlbGJ1dHRvbiB7XG4gIHBhZGRpbmc6IDJweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBtYXJnaW46IDAgMnB4O1xufVxuLlRyYXlJdGVtIHBvcG92ZXIubWVudSBtb2RlbGJ1dHRvbjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHJnYmEoNjksIDcxLCA5MCwgMC4yKTtcbn1cbi5UcmF5SXRlbSBwb3BvdmVyLm1lbnUgbW9kZWxidXR0b246YWN0aXZlIHtcbiAgYmFja2dyb3VuZDogcmdiYSg2OSwgNzEsIDkwLCAwLjQpO1xufVxuXG50b29sdGlwIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUyZTtcbiAgY29sb3I6ICNjZGQ2ZjQ7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogOHB4IDEycHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICMzMTMyNDQ7XG4gIGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG59IiwgImltcG9ydCBBc3RhbEJhdHRlcnkgZnJvbSBcImdpOi8vQXN0YWxCYXR0ZXJ5XCJcbmltcG9ydCB7IFZhcmlhYmxlLCBiaW5kIH0gZnJvbSBcImFzdGFsXCJcbmltcG9ydCBHVG9wIGZyb20gXCJnaTovL0dUb3A/dmVyc2lvbj0yLjBcIjtcblxuZnVuY3Rpb24gZm9ybWF0VGltZShzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7TWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCl9aCR7TWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApfW1gO1xufVxuXG5jb25zdCBtaWxsaXNlY29uZHMgPSAyMDAwO1xuXG5jb25zdCBjcHUgPSBuZXcgR1RvcC5nbGlidG9wX2NwdSgpO1xuY29uc3QgbWVtID0gbmV3IEdUb3AuZ2xpYnRvcF9tZW0oKTtcbmNvbnN0IGJhdHRlcnkgPSBBc3RhbEJhdHRlcnkuZ2V0X2RlZmF1bHQoKTtcblxuY29uc3QgY3B1RGF0YSA9IHtcbiAgcHJldjogeyB1c2VyOiAwLCBzeXM6IDAsIHRvdGFsOiAwIH0sXG4gIGRpZmY6IHsgdXNlcjogMCwgc3lzOiAwLCB0b3RhbDogMCB9XG59O1xuXG5HVG9wLmdsaWJ0b3BfZ2V0X2NwdShjcHUpO1xuY3B1RGF0YS5wcmV2LnVzZXIgPSBjcHUudXNlcjtcbmNwdURhdGEucHJldi5zeXMgPSBjcHUuc3lzO1xuY3B1RGF0YS5wcmV2LnRvdGFsID0gY3B1LnRvdGFsO1xuXG5jb25zdCBtZXRyaWNzID0gVmFyaWFibGUoeyBjcHU6IDAsIG1lbTogMCB9KS5wb2xsKFxuICAgIG1pbGxpc2Vjb25kcyxcbiAgICAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2VXNlciA9IGNwdURhdGEucHJldi51c2VyO1xuICAgICAgICAgICAgY29uc3QgcHJldlN5cyA9IGNwdURhdGEucHJldi5zeXM7XG4gICAgICAgICAgICBjb25zdCBwcmV2VG90YWwgPSBjcHVEYXRhLnByZXYudG90YWw7XG5cbiAgICAgICAgICAgIEdUb3AuZ2xpYnRvcF9nZXRfY3B1KGNwdSk7XG4gICAgICAgICAgICBHVG9wLmdsaWJ0b3BfZ2V0X21lbShtZW0pO1xuXG4gICAgICAgICAgICBjcHVEYXRhLmRpZmYudXNlciA9IGNwdS51c2VyIC0gcHJldlVzZXI7XG4gICAgICAgICAgICBjcHVEYXRhLmRpZmYuc3lzID0gY3B1LnN5cyAtIHByZXZTeXM7XG4gICAgICAgICAgICBjcHVEYXRhLmRpZmYudG90YWwgPSBjcHUudG90YWwgLSBwcmV2VG90YWw7XG5cbiAgICAgICAgICAgIGNwdURhdGEucHJldi51c2VyID0gY3B1LnVzZXI7XG4gICAgICAgICAgICBjcHVEYXRhLnByZXYuc3lzID0gY3B1LnN5cztcbiAgICAgICAgICAgIGNwdURhdGEucHJldi50b3RhbCA9IGNwdS50b3RhbDtcblxuICAgICAgICAgICAgY29uc3QgY3B1UGVyY2VudCA9IGNwdURhdGEuZGlmZi50b3RhbCA+IDBcbiAgICAgICAgICAgICAgICA/IE1hdGgucm91bmQoKChjcHVEYXRhLmRpZmYudXNlciArIGNwdURhdGEuZGlmZi5zeXMpIC8gY3B1RGF0YS5kaWZmLnRvdGFsKSAqIDEwMClcbiAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICBjb25zdCBtZW1QZXJjZW50ID0gbWVtLnRvdGFsID4gMFxuICAgICAgICAgICAgICAgID8gTWF0aC5yb3VuZCgobWVtLnVzZXIgLyBtZW0udG90YWwpICogMTAwKVxuICAgICAgICAgICAgICAgIDogMDtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjcHU6IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgY3B1UGVyY2VudCkpLFxuICAgICAgICAgICAgICAgIG1lbTogTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBtZW1QZXJjZW50KSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvIGFvIG9idGVyIG1cdTAwRTl0cmljYXMgZG8gc2lzdGVtYTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY3B1OiAwLCBtZW06IDAgfTtcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbmNvbnN0IENwdVVzYWdlID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIkNwdVVzYWdlXCIgXX0+XG4gICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIkNwdVVzYWdlSWNvblwiIF19IGxhYmVsPXsgJycgfSAvPlxuICAgICAgICAgICAgPGxhYmVsIGNzc0NsYXNzZXM9e1sgXCJDcHVVc2FnZUxhYmVsXCIgXX0gbGFiZWw9eyBiaW5kKG1ldHJpY3MpLmFzKG0gPT4gYCR7bS5jcHV9JWApIH0gLz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn1cblxuY29uc3QgTWVtb3J5VXNhZ2UgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGJveCBjc3NDbGFzc2VzPXtbIFwiTWVtb3J5VXNhZ2VcIiBdfT5cbiAgICAgICAgICAgIDxsYWJlbCBjc3NDbGFzc2VzPXtbIFwiTWVtb3J5VXNhZ2VJY29uXCIgXX0gbGFiZWw9eyAnJyB9IC8+XG4gICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIk1lbW9yeVVzYWdlTGFiZWxcIiBdfSBsYWJlbD17IGJpbmQobWV0cmljcykuYXMobSA9PiBgJHttLm1lbX0lYCkgfSAvPlxuICAgICAgICA8L2JveD5cbiAgICApO1xufVxuXG5sZXQgYmF0dGVyeUhhbmRsZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG5jb25zdCBCYXR0ZXJ5ID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxib3hcbiAgICAgICAgICAgIGNzc0NsYXNzZXM9e1sgXCJCYXR0ZXJ5XCIgXX1cbiAgICAgICAgICAgIHRvb2x0aXBUZXh0PXsgYmluZChiYXR0ZXJ5LCBcImNoYXJnaW5nXCIpLmFzKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0NoYXJnaW5nID0gYmF0dGVyeS5nZXRfY2hhcmdpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZVJlbWFpbmluZyA9IGlzQ2hhcmdpbmcgPyBiYXR0ZXJ5LnRpbWVfdG9fZnVsbCA6IGJhdHRlcnkudGltZV90b19lbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gaXNDaGFyZ2luZyA/IFwiQ2FycmVnYW5kb1wiIDogXCJEZXNjYXJyZWdhbmRvXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHthY3Rpb259OiAke2Zvcm1hdFRpbWUodGltZVJlbWFpbmluZyl9IHJlc3RhbnRlKHMpYDtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSW5mb3JtYVx1MDBFN1x1MDBGNWVzIGRhIGJhdGVyaWEgaW5kaXNwb25cdTAwRUR2ZWlzXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkgfVxuICAgICAgICAgICAgc2V0dXA9e1xuICAgICAgICAgICAgICAgIChzZWxmKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXR0ZXJ5SGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmF0dGVyeS5kaXNjb25uZWN0KGJhdHRlcnlIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJhdHRlcnlIYW5kbGVyID0gYmF0dGVyeS5jb25uZWN0KFwibm90aWZ5OjpjaGFyZ2luZ1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJhdHRlcnkucGVyY2VudGFnZSA8PSAwLjIgJiYgIWJhdHRlcnkuY2hhcmdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRfY3NzX2NsYXNzKFwiQmF0dGVyeUNyaXRpY2FsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlX2Nzc19jbGFzcyhcIkJhdHRlcnlDcml0aWNhbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm8gYW8gdmVyaWZpY2FyIHN0YXR1cyBkYSBiYXRlcmlhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uRGVzdHJveT17XG4gICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYmF0dGVyeUhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYmF0dGVyeS5kaXNjb25uZWN0KGJhdHRlcnlIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgYmF0dGVyeUhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICAgIDxpbWFnZSBjc3NDbGFzc2VzPXtbIFwiQmF0dGVyeUljb25cIiBdfSBpY29uTmFtZT17IGJpbmQoYmF0dGVyeSwgXCJpY29uTmFtZVwiKSB9IC8+XG4gICAgICAgICAgICA8bGFiZWwgbGFiZWw9eyBiaW5kKGJhdHRlcnksIFwicGVyY2VudGFnZVwiKS5hcyhwID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7TWF0aC5yb3VuZChNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHAgKiAxMDApKSl9JWA7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIjAlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkgfSAvPlxuICAgICAgICA8L2JveD5cbiAgICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTeXN0ZW1Nb25pdG9yKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxib3hcbiAgICAgICAgICAgIGNzc0NsYXNzZXM9e1sgXCJTeXN0ZW1Nb25pdG9yXCIgXX1cbiAgICAgICAgICAgIG9uRGVzdHJveT17KCkgPT4ge1xuICAgICAgICAgICAgICAgIG1ldHJpY3MuZHJvcCgpO1xuICAgICAgICAgICAgICAgIGlmIChiYXR0ZXJ5SGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICBiYXR0ZXJ5LmRpc2Nvbm5lY3QoYmF0dGVyeUhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICBiYXR0ZXJ5SGFuZGxlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgICAgPENwdVVzYWdlLz5cbiAgICAgICAgICAgIDxNZW1vcnlVc2FnZS8+XG4gICAgICAgICAgICA8QmF0dGVyeS8+XG4gICAgICAgIDwvYm94PlxuICAgICk7XG59XG4iLCAiaW1wb3J0IFwiLi9vdmVycmlkZXMuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBBc3RhbElPIH0gZnJvbSBcImdpOi8vQXN0YWxJTz92ZXJzaW9uPTAuMVwiXG5leHBvcnQgKiBmcm9tIFwiLi9wcm9jZXNzLmpzXCJcbmV4cG9ydCAqIGZyb20gXCIuL3RpbWUuanNcIlxuZXhwb3J0ICogZnJvbSBcIi4vZmlsZS5qc1wiXG5leHBvcnQgKiBmcm9tIFwiLi9nb2JqZWN0LmpzXCJcbmV4cG9ydCB7IEJpbmRpbmcsIGJpbmQgfSBmcm9tIFwiLi9iaW5kaW5nLmpzXCJcbmV4cG9ydCB7IFZhcmlhYmxlLCBkZXJpdmUgfSBmcm9tIFwiLi92YXJpYWJsZS5qc1wiXG4iLCAiaW1wb3J0IEFzdGFsIGZyb20gXCJnaTovL0FzdGFsSU9cIlxuaW1wb3J0IEdpbyBmcm9tIFwiZ2k6Ly9HaW8/dmVyc2lvbj0yLjBcIlxuXG5leHBvcnQgeyBHaW8gfVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZEZpbGUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gQXN0YWwucmVhZF9maWxlKHBhdGgpIHx8IFwiXCJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRGaWxlQXN5bmMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBBc3RhbC5yZWFkX2ZpbGVfYXN5bmMocGF0aCwgKF8sIHJlcykgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKEFzdGFsLnJlYWRfZmlsZV9maW5pc2gocmVzKSB8fCBcIlwiKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlRmlsZShwYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIEFzdGFsLndyaXRlX2ZpbGUocGF0aCwgY29udGVudClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlRmlsZUFzeW5jKHBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgQXN0YWwud3JpdGVfZmlsZV9hc3luYyhwYXRoLCBjb250ZW50LCAoXywgcmVzKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoQXN0YWwud3JpdGVfZmlsZV9maW5pc2gocmVzKSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb25pdG9yRmlsZShcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgY2FsbGJhY2s6IChmaWxlOiBzdHJpbmcsIGV2ZW50OiBHaW8uRmlsZU1vbml0b3JFdmVudCkgPT4gdm9pZCxcbik6IEdpby5GaWxlTW9uaXRvciB7XG4gICAgcmV0dXJuIEFzdGFsLm1vbml0b3JfZmlsZShwYXRoLCAoZmlsZTogc3RyaW5nLCBldmVudDogR2lvLkZpbGVNb25pdG9yRXZlbnQpID0+IHtcbiAgICAgICAgY2FsbGJhY2soZmlsZSwgZXZlbnQpXG4gICAgfSkhXG59XG4iLCAiaW1wb3J0IEdPYmplY3QgZnJvbSBcImdpOi8vR09iamVjdFwiXG5cbmV4cG9ydCB7IGRlZmF1bHQgYXMgR0xpYiB9IGZyb20gXCJnaTovL0dMaWI/dmVyc2lvbj0yLjBcIlxuZXhwb3J0IHsgR09iamVjdCwgR09iamVjdCBhcyBkZWZhdWx0IH1cblxuY29uc3QgbWV0YSA9IFN5bWJvbChcIm1ldGFcIilcbmNvbnN0IHByaXYgPSBTeW1ib2woXCJwcml2XCIpXG5cbmNvbnN0IHsgUGFyYW1TcGVjLCBQYXJhbUZsYWdzIH0gPSBHT2JqZWN0XG5cbmNvbnN0IGtlYmFiaWZ5ID0gKHN0cjogc3RyaW5nKSA9PiBzdHJcbiAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMS0kMlwiKVxuICAgIC5yZXBsYWNlQWxsKFwiX1wiLCBcIi1cIilcbiAgICAudG9Mb3dlckNhc2UoKVxuXG50eXBlIFNpZ25hbERlY2xhcmF0aW9uID0ge1xuICAgIGZsYWdzPzogR09iamVjdC5TaWduYWxGbGFnc1xuICAgIGFjY3VtdWxhdG9yPzogR09iamVjdC5BY2N1bXVsYXRvclR5cGVcbiAgICByZXR1cm5fdHlwZT86IEdPYmplY3QuR1R5cGVcbiAgICBwYXJhbV90eXBlcz86IEFycmF5PEdPYmplY3QuR1R5cGU+XG59XG5cbnR5cGUgUHJvcGVydHlEZWNsYXJhdGlvbiA9XG4gICAgfCBJbnN0YW5jZVR5cGU8dHlwZW9mIEdPYmplY3QuUGFyYW1TcGVjPlxuICAgIHwgeyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfVxuICAgIHwgdHlwZW9mIFN0cmluZ1xuICAgIHwgdHlwZW9mIE51bWJlclxuICAgIHwgdHlwZW9mIEJvb2xlYW5cbiAgICB8IHR5cGVvZiBPYmplY3RcblxudHlwZSBHT2JqZWN0Q29uc3RydWN0b3IgPSB7XG4gICAgW21ldGFdPzoge1xuICAgICAgICBQcm9wZXJ0aWVzPzogeyBba2V5OiBzdHJpbmddOiBHT2JqZWN0LlBhcmFtU3BlYyB9XG4gICAgICAgIFNpZ25hbHM/OiB7IFtrZXk6IHN0cmluZ106IEdPYmplY3QuU2lnbmFsRGVmaW5pdGlvbiB9XG4gICAgfVxuICAgIG5ldyguLi5hcmdzOiBhbnlbXSk6IGFueVxufVxuXG50eXBlIE1ldGFJbmZvID0gR09iamVjdC5NZXRhSW5mbzxuZXZlciwgQXJyYXk8eyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfT4sIG5ldmVyPlxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIob3B0aW9uczogTWV0YUluZm8gPSB7fSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoY2xzOiBHT2JqZWN0Q29uc3RydWN0b3IpIHtcbiAgICAgICAgY29uc3QgdCA9IG9wdGlvbnMuVGVtcGxhdGVcbiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiICYmICF0LnN0YXJ0c1dpdGgoXCJyZXNvdXJjZTovL1wiKSAmJiAhdC5zdGFydHNXaXRoKFwiZmlsZTovL1wiKSkge1xuICAgICAgICAgICAgLy8gYXNzdW1lIHhtbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgb3B0aW9ucy5UZW1wbGF0ZSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh0KVxuICAgICAgICB9XG5cbiAgICAgICAgR09iamVjdC5yZWdpc3RlckNsYXNzKHtcbiAgICAgICAgICAgIFNpZ25hbHM6IHsgLi4uY2xzW21ldGFdPy5TaWduYWxzIH0sXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiB7IC4uLmNsc1ttZXRhXT8uUHJvcGVydGllcyB9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSwgY2xzKVxuXG4gICAgICAgIGRlbGV0ZSBjbHNbbWV0YV1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9wZXJ0eShkZWNsYXJhdGlvbjogUHJvcGVydHlEZWNsYXJhdGlvbiA9IE9iamVjdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHByb3A6IGFueSwgZGVzYz86IFByb3BlcnR5RGVzY3JpcHRvcikge1xuICAgICAgICB0YXJnZXQuY29uc3RydWN0b3JbbWV0YV0gPz89IHt9XG4gICAgICAgIHRhcmdldC5jb25zdHJ1Y3RvclttZXRhXS5Qcm9wZXJ0aWVzID8/PSB7fVxuXG4gICAgICAgIGNvbnN0IG5hbWUgPSBrZWJhYmlmeShwcm9wKVxuXG4gICAgICAgIGlmICghZGVzYykge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbcHJpdl0/Lltwcm9wXSA/PyBkZWZhdWx0VmFsdWUoZGVjbGFyYXRpb24pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQodjogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ICE9PSB0aGlzW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3ByaXZdID8/PSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1twcml2XVtwcm9wXSA9IHZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KG5hbWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYHNldF8ke25hbWUucmVwbGFjZShcIi1cIiwgXCJfXCIpfWAsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSh2OiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1twcm9wXSA9IHZcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYGdldF8ke25hbWUucmVwbGFjZShcIi1cIiwgXCJfXCIpfWAsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbcHJvcF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGFyZ2V0LmNvbnN0cnVjdG9yW21ldGFdLlByb3BlcnRpZXNba2ViYWJpZnkocHJvcCldID0gcHNwZWMobmFtZSwgUGFyYW1GbGFncy5SRUFEV1JJVEUsIGRlY2xhcmF0aW9uKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZsYWdzID0gMFxuICAgICAgICAgICAgaWYgKGRlc2MuZ2V0KSBmbGFncyB8PSBQYXJhbUZsYWdzLlJFQURBQkxFXG4gICAgICAgICAgICBpZiAoZGVzYy5zZXQpIGZsYWdzIHw9IFBhcmFtRmxhZ3MuV1JJVEFCTEVcblxuICAgICAgICAgICAgdGFyZ2V0LmNvbnN0cnVjdG9yW21ldGFdLlByb3BlcnRpZXNba2ViYWJpZnkocHJvcCldID0gcHNwZWMobmFtZSwgZmxhZ3MsIGRlY2xhcmF0aW9uKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lnbmFsKC4uLnBhcmFtczogQXJyYXk8eyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfSB8IHR5cGVvZiBPYmplY3Q+KTpcbih0YXJnZXQ6IGFueSwgc2lnbmFsOiBhbnksIGRlc2M/OiBQcm9wZXJ0eURlc2NyaXB0b3IpID0+IHZvaWRcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25hbChkZWNsYXJhdGlvbj86IFNpZ25hbERlY2xhcmF0aW9uKTpcbih0YXJnZXQ6IGFueSwgc2lnbmFsOiBhbnksIGRlc2M/OiBQcm9wZXJ0eURlc2NyaXB0b3IpID0+IHZvaWRcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25hbChcbiAgICBkZWNsYXJhdGlvbj86IFNpZ25hbERlY2xhcmF0aW9uIHwgeyAkZ3R5cGU6IEdPYmplY3QuR1R5cGUgfSB8IHR5cGVvZiBPYmplY3QsXG4gICAgLi4ucGFyYW1zOiBBcnJheTx7ICRndHlwZTogR09iamVjdC5HVHlwZSB9IHwgdHlwZW9mIE9iamVjdD5cbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnksIHNpZ25hbDogYW55LCBkZXNjPzogUHJvcGVydHlEZXNjcmlwdG9yKSB7XG4gICAgICAgIHRhcmdldC5jb25zdHJ1Y3RvclttZXRhXSA/Pz0ge31cbiAgICAgICAgdGFyZ2V0LmNvbnN0cnVjdG9yW21ldGFdLlNpZ25hbHMgPz89IHt9XG5cbiAgICAgICAgY29uc3QgbmFtZSA9IGtlYmFiaWZ5KHNpZ25hbClcblxuICAgICAgICBpZiAoZGVjbGFyYXRpb24gfHwgcGFyYW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogdHlwZSBhc3NlcnRcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IFtkZWNsYXJhdGlvbiwgLi4ucGFyYW1zXS5tYXAodiA9PiB2LiRndHlwZSlcbiAgICAgICAgICAgIHRhcmdldC5jb25zdHJ1Y3RvclttZXRhXS5TaWduYWxzW25hbWVdID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtX3R5cGVzOiBhcnIsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuY29uc3RydWN0b3JbbWV0YV0uU2lnbmFsc1tuYW1lXSA9IGRlY2xhcmF0aW9uIHx8IHtcbiAgICAgICAgICAgICAgICBwYXJhbV90eXBlczogW10sXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRlc2MpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHNpZ25hbCwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KG5hbWUsIC4uLmFyZ3MpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvZzogKCguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCkgPSBkZXNjLnZhbHVlXG4gICAgICAgICAgICBkZXNjLnZhbHVlID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3QgdHlwZWRcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQobmFtZSwgLi4uYXJncylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGBvbl8ke25hbWUucmVwbGFjZShcIi1cIiwgXCJfXCIpfWAsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvZy5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwc3BlYyhuYW1lOiBzdHJpbmcsIGZsYWdzOiBudW1iZXIsIGRlY2xhcmF0aW9uOiBQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgaWYgKGRlY2xhcmF0aW9uIGluc3RhbmNlb2YgUGFyYW1TcGVjKVxuICAgICAgICByZXR1cm4gZGVjbGFyYXRpb25cblxuICAgIHN3aXRjaCAoZGVjbGFyYXRpb24pIHtcbiAgICAgICAgY2FzZSBTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gUGFyYW1TcGVjLnN0cmluZyhuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgXCJcIilcbiAgICAgICAgY2FzZSBOdW1iZXI6XG4gICAgICAgICAgICByZXR1cm4gUGFyYW1TcGVjLmRvdWJsZShuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgLU51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIDApXG4gICAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBQYXJhbVNwZWMuYm9vbGVhbihuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgZmFsc2UpXG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgcmV0dXJuIFBhcmFtU3BlYy5qc29iamVjdChuYW1lLCBcIlwiLCBcIlwiLCBmbGFncylcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgbWlzc3R5cGVkXG4gICAgICAgICAgICByZXR1cm4gUGFyYW1TcGVjLm9iamVjdChuYW1lLCBcIlwiLCBcIlwiLCBmbGFncywgZGVjbGFyYXRpb24uJGd0eXBlKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFZhbHVlKGRlY2xhcmF0aW9uOiBQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgaWYgKGRlY2xhcmF0aW9uIGluc3RhbmNlb2YgUGFyYW1TcGVjKVxuICAgICAgICByZXR1cm4gZGVjbGFyYXRpb24uZ2V0X2RlZmF1bHRfdmFsdWUoKVxuXG4gICAgc3dpdGNoIChkZWNsYXJhdGlvbikge1xuICAgICAgICBjYXNlIFN0cmluZzpcbiAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG59XG4iLCAiaW1wb3J0IEd0ayBmcm9tIFwiZ2k6Ly9HdGs/dmVyc2lvbj00LjBcIlxuaW1wb3J0IHsgdHlwZSBCaW5kYWJsZUNoaWxkIH0gZnJvbSBcIi4vYXN0YWxpZnkuanNcIlxuaW1wb3J0IHsgbWVyZ2VCaW5kaW5ncywganN4IGFzIF9qc3ggfSBmcm9tIFwiLi4vX2FzdGFsLmpzXCJcbmltcG9ydCAqIGFzIFdpZGdldCBmcm9tIFwiLi93aWRnZXQuanNcIlxuXG5leHBvcnQgZnVuY3Rpb24gRnJhZ21lbnQoeyBjaGlsZHJlbiA9IFtdLCBjaGlsZCB9OiB7XG4gICAgY2hpbGQ/OiBCaW5kYWJsZUNoaWxkXG4gICAgY2hpbGRyZW4/OiBBcnJheTxCaW5kYWJsZUNoaWxkPlxufSkge1xuICAgIGlmIChjaGlsZCkgY2hpbGRyZW4ucHVzaChjaGlsZClcbiAgICByZXR1cm4gbWVyZ2VCaW5kaW5ncyhjaGlsZHJlbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGpzeChcbiAgICBjdG9yOiBrZXlvZiB0eXBlb2YgY3RvcnMgfCB0eXBlb2YgR3RrLldpZGdldCxcbiAgICBwcm9wczogYW55LFxuKSB7XG4gICAgcmV0dXJuIF9qc3goY3RvcnMsIGN0b3IgYXMgYW55LCBwcm9wcylcbn1cblxuY29uc3QgY3RvcnMgPSB7XG4gICAgYm94OiBXaWRnZXQuQm94LFxuICAgIGJ1dHRvbjogV2lkZ2V0LkJ1dHRvbixcbiAgICBjZW50ZXJib3g6IFdpZGdldC5DZW50ZXJCb3gsXG4gICAgLy8gY2lyY3VsYXJwcm9ncmVzczogV2lkZ2V0LkNpcmN1bGFyUHJvZ3Jlc3MsXG4gICAgLy8gZHJhd2luZ2FyZWE6IFdpZGdldC5EcmF3aW5nQXJlYSxcbiAgICBlbnRyeTogV2lkZ2V0LkVudHJ5LFxuICAgIGltYWdlOiBXaWRnZXQuSW1hZ2UsXG4gICAgbGFiZWw6IFdpZGdldC5MYWJlbCxcbiAgICBsZXZlbGJhcjogV2lkZ2V0LkxldmVsQmFyLFxuICAgIG92ZXJsYXk6IFdpZGdldC5PdmVybGF5LFxuICAgIHJldmVhbGVyOiBXaWRnZXQuUmV2ZWFsZXIsXG4gICAgc2xpZGVyOiBXaWRnZXQuU2xpZGVyLFxuICAgIHN0YWNrOiBXaWRnZXQuU3RhY2ssXG4gICAgc3dpdGNoOiBXaWRnZXQuU3dpdGNoLFxuICAgIHdpbmRvdzogV2lkZ2V0LldpbmRvdyxcbiAgICBtZW51YnV0dG9uOiBXaWRnZXQuTWVudUJ1dHRvbixcbiAgICBwb3BvdmVyOiBXaWRnZXQuUG9wb3Zlcixcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gICAgbmFtZXNwYWNlIEpTWCB7XG4gICAgICAgIHR5cGUgRWxlbWVudCA9IEd0ay5XaWRnZXRcbiAgICAgICAgdHlwZSBFbGVtZW50Q2xhc3MgPSBHdGsuV2lkZ2V0XG4gICAgICAgIGludGVyZmFjZSBJbnRyaW5zaWNFbGVtZW50cyB7XG4gICAgICAgICAgICBib3g6IFdpZGdldC5Cb3hQcm9wc1xuICAgICAgICAgICAgYnV0dG9uOiBXaWRnZXQuQnV0dG9uUHJvcHNcbiAgICAgICAgICAgIGNlbnRlcmJveDogV2lkZ2V0LkNlbnRlckJveFByb3BzXG4gICAgICAgICAgICAvLyBjaXJjdWxhcnByb2dyZXNzOiBXaWRnZXQuQ2lyY3VsYXJQcm9ncmVzc1Byb3BzXG4gICAgICAgICAgICAvLyBkcmF3aW5nYXJlYTogV2lkZ2V0LkRyYXdpbmdBcmVhUHJvcHNcbiAgICAgICAgICAgIGVudHJ5OiBXaWRnZXQuRW50cnlQcm9wc1xuICAgICAgICAgICAgaW1hZ2U6IFdpZGdldC5JbWFnZVByb3BzXG4gICAgICAgICAgICBsYWJlbDogV2lkZ2V0LkxhYmVsUHJvcHNcbiAgICAgICAgICAgIGxldmVsYmFyOiBXaWRnZXQuTGV2ZWxCYXJQcm9wc1xuICAgICAgICAgICAgb3ZlcmxheTogV2lkZ2V0Lk92ZXJsYXlQcm9wc1xuICAgICAgICAgICAgcmV2ZWFsZXI6IFdpZGdldC5SZXZlYWxlclByb3BzXG4gICAgICAgICAgICBzbGlkZXI6IFdpZGdldC5TbGlkZXJQcm9wc1xuICAgICAgICAgICAgc3RhY2s6IFdpZGdldC5TdGFja1Byb3BzXG4gICAgICAgICAgICBzd2l0Y2g6IFdpZGdldC5Td2l0Y2hQcm9wc1xuICAgICAgICAgICAgd2luZG93OiBXaWRnZXQuV2luZG93UHJvcHNcbiAgICAgICAgICAgIG1lbnVidXR0b246IFdpZGdldC5NZW51QnV0dG9uUHJvcHNcbiAgICAgICAgICAgIHBvcG92ZXI6IFdpZGdldC5Qb3BvdmVyUHJvcHNcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGpzeHMgPSBqc3hcbiIsICJpbXBvcnQgV3AgZnJvbSBcImdpOi8vQXN0YWxXcFwiXG5pbXBvcnQgeyBiaW5kLCBHTGliIH0gZnJvbSBcImFzdGFsXCJcbmltcG9ydCB7IEd0aywgR2RrIH0gZnJvbSBcImFzdGFsL2d0azRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXVkaW9Db250cm9sKCkge1xuICAgIGNvbnN0IGF1ZGlvID0gV3AuZ2V0X2RlZmF1bHQoKSEuZGVmYXVsdFNwZWFrZXIhO1xuICAgIGNvbnN0IHN0ZXAgPSAwLjAyO1xuICAgIGNvbnN0IHNjcm9sbCA9IG5ldyBHdGsuRXZlbnRDb250cm9sbGVyU2Nyb2xsKHsgZmxhZ3M6IEd0ay5FdmVudENvbnRyb2xsZXJTY3JvbGxGbGFncy5WRVJUSUNBTCB9KTtcbiAgICBjb25zdCBjbGljayA9IHsgbGVmdDogbmV3IEd0ay5HZXN0dXJlQ2xpY2soKSwgcmlnaHQ6IG5ldyBHdGsuR2VzdHVyZUNsaWNrKCkgfTtcbiAgICBjbGljay5sZWZ0LnNldF9idXR0b24oR2RrLkJVVFRPTl9QUklNQVJZKTtcbiAgICBjbGljay5yaWdodC5zZXRfYnV0dG9uKEdkay5CVVRUT05fU0VDT05EQVJZKTtcbiAgICBjb25zdCBoYW5kbGVycyA9IFtcbiAgICAgICAgc2Nyb2xsLmNvbm5lY3QoXCJzY3JvbGxcIiwgKGNvbnRyb2xlciwgZHgsIGR5KSA9PiB7IGF1ZGlvLnZvbHVtZSA9IChkeSA8IDAgPyBNYXRoLm1pbihhdWRpby5nZXRfdm9sdW1lKCkrc3RlcCwgMSkgOiBhdWRpby5nZXRfdm9sdW1lKCktc3RlcCkgfSksXG4gICAgICAgIGNsaWNrLmxlZnQuY29ubmVjdChcInByZXNzZWRcIiwgKCkgPT4geyBhdWRpby5zZXRfbXV0ZSghYXVkaW8uZ2V0X211dGUoKSkgfSApLFxuICAgICAgICBjbGljay5yaWdodC5jb25uZWN0KFwicHJlc3NlZFwiLCAoKSA9PiB7IEdMaWIuc3Bhd25fY29tbWFuZF9saW5lX2FzeW5jKFwicGF2dWNvbnRyb2xcIikgfSApXG4gICAgXTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8Ym94XG4gICAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiQXVkaW9Db250cm9sXCIgXX1cbiAgICAgICAgICAgIHNldHVwPXtcbiAgICAgICAgICAgICAgICAoc2VsZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrLmxlZnQpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrLnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRfY29udHJvbGxlcihzY3JvbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uRGVzdHJveT17XG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGwuZGlzY29ubmVjdChoYW5kbGVyc1swXSk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrLmxlZnQuZGlzY29ubmVjdChoYW5kbGVyc1sxXSk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrLnJpZ2h0LmRpc2Nvbm5lY3QoaGFuZGxlcnNbMl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvb2x0aXBUZXh0PXsgYmluZChhdWRpbywgXCJkZXNjcmlwdGlvblwiKS5hcyhuID0+IGBEaXNwb3NpdGl2byBhdHVhbDogJHtufWApIH1cbiAgICAgICAgPlxuICAgICAgICAgICAgPGltYWdlXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3Nlcz17WyBcIkF1ZGlvQ29udHJvbEJ0blwiIF19XG4gICAgICAgICAgICAgICAgaWNvbk5hbWU9eyBiaW5kKGF1ZGlvLCBcInZvbHVtZUljb25cIikgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzZXM9e1sgXCJMYWJlbEF1ZGlvQ29udHJvbFwiIF19XG4gICAgICAgICAgICAgICAgbGFiZWw9eyBiaW5kKGF1ZGlvLCBcInZvbHVtZVwiKS5hcyhhID0+IGAke01hdGgucm91bmQoYSAqIDEwMCl9JWApIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvYm94PlxuICAgICk7XG59XG4iLCAiaW1wb3J0IEFzdGFsTmV0d29yayBmcm9tIFwiZ2k6Ly9Bc3RhbE5ldHdvcmtcIjtcbmltcG9ydCB7IFZhcmlhYmxlLCBiaW5kIH0gZnJvbSBcImFzdGFsXCI7XG5cbi8vIENvbnZlcnRlIG8gZW51bSBEZXZpY2VTdGF0ZSBwYXJhIHRleHRvIGVtIHBvcnR1Z3VcdTAwRUFzXG5jb25zdCBzdGF0ZVRleHRzOiBSZWNvcmQ8QXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLCBzdHJpbmc+ID0ge1xuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLlVOS05PV05dOiAgICAgICAnRGVzY29uaGVjaWRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5VTk1BTkFHRURdOiAgICAgJ05cdTAwRTNvIGdlcmVuY2lhZG8nLFxuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLlVOQVZBSUxBQkxFXTogICAnSW5kaXNwb25cdTAwRUR2ZWwnLFxuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLkRJU0NPTk5FQ1RFRF06ICAnRGVzY29uZWN0YWRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5QUkVQQVJFXTogICAgICAgJ1ByZXBhcmFuZG8nLFxuICBbQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLkNPTkZJR106ICAgICAgICAnQ29uZmlndXJhbmRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5ORUVEX0FVVEhdOiAgICAgJ05lY2Vzc2l0YSBhdXRlbnRpY2FcdTAwRTdcdTAwRTNvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5JUF9DT05GSUddOiAgICAgJ0NvbmZpZ3VyYW5kbyBJUCcsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuSVBfQ0hFQ0tdOiAgICAgICdWZXJpZmljYW5kbyBJUCcsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuU0VDT05EQVJJRVNdOiAgICdDb25maWd1cmFuZG8gc2VjdW5kXHUwMEUxcmlvcycsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuQUNUSVZBVEVEXTogICAgICdBdGl2YWRvJyxcbiAgW0FzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5ERUFDVElWQVRJTkddOiAgJ0Rlc2NvbmVjdGFkbycsXG4gIFtBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuRkFJTEVEXTogICAgICAgICdGYWxoYScsXG59O1xuXG5mdW5jdGlvbiBzdGF0ZVN0cmluZyhzOiBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlVGV4dHNbc10gPz8gJ0VzdGFkbyBkZXNjb25oZWNpZG8nO1xufVxuXG5jb25zdCBuZXR3b3JrID0gQXN0YWxOZXR3b3JrLmdldF9kZWZhdWx0KCk7XG5cbmNvbnN0IHN0YXRzID0gVmFyaWFibGUoXG4gICAge1xuICAgICAgICB3aWZpOiB7XG4gICAgICAgICAgbmFtZTogbmV0d29yay53aWZpLmRldmljZS5nZXRfaWZhY2UoKSxcbiAgICAgICAgICBzc2lkOiBuZXR3b3JrLndpZmkuc3NpZCA/PyAnJyxcbiAgICAgICAgICBzdGF0ZTogbmV0d29yay53aWZpLnN0YXRlID8/IEFzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5VTktOT1dOLFxuICAgICAgICB9LFxuICAgICAgICB3aXJlZDoge1xuICAgICAgICAgIG5hbWU6IG5ldHdvcmsud2lyZWQ/LmRldmljZS5nZXRfaWZhY2UoKSA/PyBcIlNlbSBkaXNwb3NpdGl2b1wiLFxuICAgICAgICAgIHN0YXRlOiBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuVU5LTk9XTlxuICAgICAgICB9XG4gICAgfVxuKTtcblxuY29uc3QgaGFuZGxlcnMgPSBbXG4gIG5ldHdvcmsud2lmaS5jb25uZWN0KFwic3RhdGUtY2hhbmdlZFwiLFxuICAgICgpID0+IHtcbiAgICAgIHN0YXRzLnNldChcbiAgICAgICAge1xuICAgICAgICAgIC4uLnN0YXRzLmdldCgpLFxuICAgICAgICAgIHdpZmk6IHtcbiAgICAgICAgICAgIG5hbWU6IG5ldHdvcmsud2lmaS5kZXZpY2UuZ2V0X2lmYWNlKCkgPz8gXCJTZW0gZGlzcG9zaXRpdm9cIixcbiAgICAgICAgICAgIHNzaWQ6IG5ldHdvcmsud2lmaS5zc2lkID8/ICcnLFxuICAgICAgICAgICAgc3RhdGU6IG5ldHdvcmsud2lmaS5zdGF0ZSA/PyBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuVU5BVkFJTEFCTEVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICksXG5dO1xuXG5mdW5jdGlvbiBXaWZpKCkge1xuICByZXR1cm4gKFxuICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIldpZmlcIiBdfT5cbiAgICAgIDxsYWJlbFxuICAgICAgICBtYXhXaWR0aENoYXJzPXsyMH1cbiAgICAgICAgbGFiZWw9e2JpbmQoc3RhdHMpLmFzKHMgPT4gcy53aWZpLnN0YXRlID09PSBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuQUNUSVZBVEVEIHx8IHMud2lmaS5zdGF0ZSA9PT0gQXN0YWxOZXR3b3JrLkRldmljZVN0YXRlLlNFQ09OREFSSUVTID8gYCR7cy53aWZpLm5hbWV9OiAke3Mud2lmaS5zc2lkfWAgOiBgJHtzLndpZmkubmFtZX06ICR7c3RhdGVTdHJpbmcocy53aWZpLnN0YXRlKX1gKSB9XG4gICAgICAgIC8+XG4gICAgPC9ib3g+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFdpcmVkKCkge1xuICByZXR1cm4gKFxuICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIldpcmVkXCIgXX0+XG4gICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgbWF4V2lkdGhDaGFycz17IDIwIH1cbiAgICAgICAgICAgIGxhYmVsPXsgYmluZChzdGF0cykuYXMocyA9PiBzLndpcmVkLnN0YXRlID09PSBBc3RhbE5ldHdvcmsuRGV2aWNlU3RhdGUuQUNUSVZBVEVEIHx8IHMud2lyZWQuc3RhdGUgPT09IEFzdGFsTmV0d29yay5EZXZpY2VTdGF0ZS5TRUNPTkRBUklFUyA/IGAke3Mud2lyZWQubmFtZX06IENvbm5lY3RhZG9gIDogYCR7cy53aXJlZC5uYW1lfSR7cy53aXJlZC5uYW1lID09PSBcIlNlbSBkaXNwb3NpdGl2b1wiID8gJyc6IFwiOiBcIiArIHN0YXRlU3RyaW5nKHMud2lyZWQuc3RhdGUpfWApIH1cbiAgICAgICAgLz5cbiAgICA8L2JveD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTmV0d29yaygpIHtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxib3hcbiAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiTmV0d29ya1wiIF19XG4gICAgICAgICAgb25EZXN0cm95PXtcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgc3RhdHMuZHJvcCgpO1xuICAgICAgICAgICAgICBuZXR3b3JrLndpZmkuZGlzY29ubmVjdChoYW5kbGVyc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAgPFdpZmkgLz5cbiAgICAgICAgICA8V2lyZWQgLz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn1cbiIsICJpbXBvcnQgeyBHdGssIEdkayB9IGZyb20gXCJhc3RhbC9ndGs0XCI7XG5pbXBvcnQgVHJheSBmcm9tIFwiZ2k6Ly9Bc3RhbFRyYXlcIjtcbmltcG9ydCB7IGJpbmQgfSBmcm9tIFwiYXN0YWxcIjtcblxuZnVuY3Rpb24gVHJheUl0ZW0oeyBpdGVtIH06IHsgaXRlbTogSW5zdGFuY2VUeXBlPHR5cGVvZiBUcmF5LlRyYXlJdGVtPiB9KSB7XG4gICAgbGV0IGhhbmRsZXJzID0ge1xuICAgICAgICBwcmltYXJ5OiAwLFxuICAgICAgICBtaWRkbGU6IDAsXG4gICAgICAgIHNlY29uZGFyeTogMCxcbiAgICAgICAgbWVudU1vZGVsOiAwLFxuICAgICAgICBhY3Rpb25HOiAwXG4gICAgfTtcbiAgICBjb25zdCBjbGlja1ByaW1hcnkgPSBuZXcgR3RrLkdlc3R1cmVDbGljayh7IGJ1dHRvbjogR2RrLkJVVFRPTl9QUklNQVJZIH0pO1xuICAgIGNvbnN0IGNsaWNrU2Vjb25kYXJ5ID0gbmV3IEd0ay5HZXN0dXJlQ2xpY2soeyBidXR0b246IEdkay5CVVRUT05fU0VDT05EQVJZIH0pO1xuICAgIGNvbnN0IGNsaWNrTWlkZGxlID0gbmV3IEd0ay5HZXN0dXJlQ2xpY2soeyBidXR0b246IEdkay5CVVRUT05fTUlERExFIH0pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPG1lbnVidXR0b25cbiAgICAgICAgICAgIGNzc0NsYXNzZXM9e1sgXCJUcmF5SXRlbVwiIF19XG4gICAgICAgICAgICB0b29sdGlwVGV4dD17IGJpbmQoaXRlbSwgXCJ0b29sdGlwTWFya3VwXCIpIH1cbiAgICAgICAgICAgIG1lbnVNb2RlbD17IGl0ZW0ubWVudU1vZGVsIH1cbiAgICAgICAgICAgIHVzZVBvcG92ZXI9eyB0cnVlIH1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17IEd0ay5BcnJvd1R5cGUuRE9XTiB9XG4gICAgICAgICAgICBzZXR1cD17XG4gICAgICAgICAgICAgICAgKHNlbGYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnk6IGNsaWNrUHJpbWFyeS5jb25uZWN0KFwicHJlc3NlZFwiLCAoX3NlbGYsIF9uLCB4LCB5KSA9PiB7IGlmKGl0ZW0uaXNfbWVudSkgc2VsZi5nZXRfcG9wb3ZlcigpIS5wb3B1cCgpOyBlbHNlIGl0ZW0uYWN0aXZhdGUoeCwgeSk7IH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZGRsZTogY2xpY2tNaWRkbGUuY29ubmVjdChcInByZXNzZWRcIiwgKF9zZWxmLCBfbiwgeCwgeSkgPT4geyBpdGVtLnNlY29uZGFyeV9hY3RpdmF0ZSh4LCB5KTsgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kYXJ5OiAgY2xpY2tTZWNvbmRhcnkuY29ubmVjdChcInByZXNzZWRcIiwgKCkgPT4geyBpdGVtLmFib3V0X3RvX3Nob3coKTsgc2VsZi5nZXRfcG9wb3ZlcigpIS5wb3B1cCgpOyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51TW9kZWw6IGl0ZW0uY29ubmVjdChcIm5vdGlmeTo6bWVudS1tb2RlbFwiLCAoKSA9PiB7IHNlbGYuc2V0X21lbnVfbW9kZWwoaXRlbS5tZW51TW9kZWwpOyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25HOiBpdGVtLmNvbm5lY3QoXCJub3RpZnk6OmFjdGlvbi1ncm91cFwiLCAoKSA9PiB7IHNlbGYuaW5zZXJ0X2FjdGlvbl9ncm91cChcImRidXNtZW51XCIsIGl0ZW0uYWN0aW9uR3JvdXApOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrUHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZF9jb250cm9sbGVyKGNsaWNrTWlkZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkX2NvbnRyb2xsZXIoY2xpY2tTZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25EZXN0cm95PXtcbiAgICAgICAgICAgICAgICAoc2VsZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGlja1ByaW1hcnkuZGlzY29ubmVjdChoYW5kbGVycy5wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tNaWRkbGUuZGlzY29ubmVjdChoYW5kbGVycy5taWRkbGUpO1xuICAgICAgICAgICAgICAgICAgICBjbGlja1NlY29uZGFyeS5kaXNjb25uZWN0KGhhbmRsZXJzLnNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZGlzY29ubmVjdChoYW5kbGVycy5tZW51TW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmRpc2Nvbm5lY3QoaGFuZGxlcnMuYWN0aW9uRyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlX2NvbnRyb2xsZXIoY2xpY2tQcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmVfY29udHJvbGxlcihjbGlja01pZGRsZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlX2NvbnRyb2xsZXIoY2xpY2tTZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICA+XG4gICAgICAgIDxpbWFnZSBnaWNvbj17YmluZChpdGVtLCBcImdpY29uXCIpfSBwaXhlbFNpemU9ezE2fSAvPlxuICAgICAgICA8L21lbnVidXR0b24+XG4gICAgKSBhcyBHdGsuTWVudUJ1dHRvbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3lzdGVtVHJheSgpIHtcbiAgICBjb25zdCB0cmF5ID0gVHJheS5nZXRfZGVmYXVsdCgpO1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICAgIDxib3ggXG4gICAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiU3lzdGVtVHJheVwiIF19XG4gICAgICAgICAgICBvcmllbnRhdGlvbj17R3RrLk9yaWVudGF0aW9uLkhPUklaT05UQUx9XG4gICAgICAgICAgICBzcGFjaW5nPXs0fVxuICAgICAgICAgICAgbWFyZ2luRW5kPXs4fVxuICAgICAgICA+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmluZCh0cmF5LCBcIml0ZW1zXCIpLmFzKGl0ZW1zID0+IFxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0+ICggPFRyYXlJdGVtIGl0ZW09e2l0ZW19Lz4pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgIDwvYm94PlxuICAgICk7XG59IiwgImltcG9ydCB7IEd0ayB9IGZyb20gXCJhc3RhbC9ndGs0XCJcbmltcG9ydCB7IFZhcmlhYmxlLCBiaW5kLCB0aW1lb3V0IH0gZnJvbSBcImFzdGFsXCJcbmltcG9ydCB7IGFzdGFsaWZ5IH0gZnJvbSBcImFzdGFsL2d0azRcIjtcblxuY29uc3QgdGltZSA9IFZhcmlhYmxlKHsgY2xvY2s6IFwiXCIsIGRhdGU6IFwiXCIgfSkucG9sbCg2MF8wMDAsXG4gICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRlQ29uc3RydWN0b3IgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvY2s6IGRhdGVDb25zdHJ1Y3Rvci50b0xvY2FsZVRpbWVTdHJpbmcoXCJwdC1iclwiLCB7IGhvdXI6IFwiMi1kaWdpdFwiLCBtaW51dGU6IFwiMi1kaWdpdFwiIH0pLFxuICAgICAgICAgICAgZGF0ZTogZGF0ZUNvbnN0cnVjdG9yLnRvTG9jYWxlRGF0ZVN0cmluZyhcInB0LWJyXCIsIHsgd2Vla2RheTogJ2xvbmcnLCBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJywgeWVhcjogJ251bWVyaWMnIH0pLnJlcGxhY2UoL14uLywgY2hhciA9PiBjaGFyLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgIH07XG4gICAgfVxuKTtcblxuY29uc3QgQ2FsZW5kYXIgPSBhc3RhbGlmeTxHdGsuQ2FsZW5kYXIsIEd0ay5DYWxlbmRhci5Db25zdHJ1Y3RvclByb3BzPihHdGsuQ2FsZW5kYXIsIHtcbiAgICBnZXRDaGlsZHJlbihzZWxmKSB7IHJldHVybiBbXSB9LFxuICAgIHNldENoaWxkcmVuKHNlbGYsIGNoaWxkcmVuKSB7fSxcbn0pO1xuXG5mdW5jdGlvbiBNZW51Q2FsZW5kYXIoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gVmFyaWFibGUoXCJOZW5odW1hIGRhdGEgc2VsZWNpb25hZGFcIik7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Ym94IGNzc0NsYXNzZXM9e1sgXCJDYWxlbmRhclwiIF19IG9yaWVudGF0aW9uPXsgR3RrLk9yaWVudGF0aW9uLlZFUlRJQ0FMIH0gb25EZXN0cm95PXsgKCkgPT4geyBzZWxlY3RlZERhdGUuZHJvcCgpIH0gfSA+XG4gICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIkNhbGVuZGFyTGFiZWxcIiBdfSBsYWJlbD17IGJpbmQoc2VsZWN0ZWREYXRlKSB9IC8+XG4gICAgICAgICAgICA8Q2FsZW5kYXJcbiAgICAgICAgICAgICAgICBjc3NDbGFzc2VzPXsgW1wiQ2FsZW5kYXJDb250YWluZXJcIl0gfVxuICAgICAgICAgICAgICAgIHNldHVwPXsoc2VsZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXlTZWxlY3RlZElkID0gc2VsZi5jb25uZWN0KFwiZGF5LXNlbGVjdGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzZWxmLmdldF9kYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGUuc2V0KGBTZWxlY2lvbmFkbzogJHtkYXRlLmZvcm1hdChcIiVkLSVtLSVZXCIpfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4geyBzZWxmLmRpc2Nvbm5lY3QoZGF5U2VsZWN0ZWRJZCk7IH07XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvYm94PlxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEYXRlVGltZSgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8Ym94XG4gICAgICAgICAgICBjc3NDbGFzc2VzPXtbIFwiRGF0ZVRpbWVcIiBdfVxuICAgICAgICAgICAgb3JpZW50YXRpb249eyBHdGsuT3JpZW50YXRpb24uVkVSVElDQUwgfVxuICAgICAgICAgICAgb25EZXN0cm95PXsoKSA9PiB7IHRpbWUuZHJvcCgpOyB9fVxuICAgICAgICA+XG4gICAgICAgICAgICA8bWVudWJ1dHRvbiBjc3NDbGFzc2VzPXtbIFwiVGltZVwiIF19IGhhbGlnbj17IEd0ay5BbGlnbi5FTkQgfT5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY3NzQ2xhc3Nlcz17WyBcIlRpbWVMYWJlbFwiIF19IGxhYmVsPXsgYmluZCh0aW1lKS5hcyh0ID0+IGAke3QuY2xvY2t9YCkgfS8+XG4gICAgICAgICAgICAgICAgPHBvcG92ZXIgcG9zaXRpb249eyBHdGsuUG9zaXRpb25UeXBlLlRPUCB9PlxuICAgICAgICAgICAgICAgICAgICA8TWVudUNhbGVuZGFyIC8+XG4gICAgICAgICAgICAgICAgPC9wb3BvdmVyPlxuICAgICAgICAgICAgPC9tZW51YnV0dG9uPlxuICAgICAgICAgICAgPGxhYmVsIGNzc0NsYXNzZXM9e1sgXCJEYXRlXCIgXX0gbGFiZWw9eyBiaW5kKHRpbWUpLmFzKHQgPT4gYCR7dC5kYXRlfWApIH0gLz5cbiAgICAgICAgPC9ib3g+XG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE1pbmlUaW1lKCkge1xuICBjb25zdCBzaG91bGRSZXZlYWwgPSBWYXJpYWJsZShmYWxzZSk7XG4gIGNvbnN0IHRyYW5zaXRpb25TcGVlZCA9IDc1MDtcblxuICBmdW5jdGlvbiB0b2dnbGVSZXZlYWwoKSB7IHNob3VsZFJldmVhbC5zZXQoIXNob3VsZFJldmVhbC5nZXQoKSkgfVxuXG4gIHJldHVybiAoXG4gICAgICA8Ym94XG4gICAgICAgIGNzc0NsYXNzZXM9e1sgXCJNaW5pVGltZVwiIF19XG4gICAgICAgIG9uRGVzdHJveT17ICgpID0+IHsgdGltZS5kcm9wKCk7IHNob3VsZFJldmVhbC5kcm9wKCkgfSB9XG4gICAgICAgIG9uSG92ZXJFbnRlcj17ICgpID0+IHRvZ2dsZVJldmVhbCgpIH1cbiAgICAgICAgb25Ib3ZlckxlYXZlPXsgKCkgPT4gdG9nZ2xlUmV2ZWFsKCkgfVxuICAgICAgPlxuICAgICAgICA8cmV2ZWFsZXJcbiAgICAgICAgICByZXZlYWxDaGlsZCA9IHsgYmluZChzaG91bGRSZXZlYWwpLmFzKHMgPT4gIXMpIH1cbiAgICAgICAgICB0cmFuc2l0aW9uVHlwZT17IEd0ay5SZXZlYWxlclRyYW5zaXRpb25UeXBlLlNMSURFX0xFRlQgfVxuICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbj17IHRyYW5zaXRpb25TcGVlZC80IH1cbiAgICAgICAgPlxuICAgICAgICAgIDxsYWJlbCBsYWJlbD17IGJpbmQodGltZSkuYXModCA9PiBgJHt0LmNsb2NrfWApIH0gLz5cbiAgICAgICAgPC9yZXZlYWxlcj5cbiAgICAgICAgPHJldmVhbGVyXG4gICAgICAgICAgcmV2ZWFsQ2hpbGQgPSB7IGJpbmQoc2hvdWxkUmV2ZWFsKS5hcyhzID0+IHMpIH1cbiAgICAgICAgICB0cmFuc2l0aW9uVHlwZT17IEd0ay5SZXZlYWxlclRyYW5zaXRpb25UeXBlLlNMSURFX1JJR0hUIH1cbiAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb249eyB0cmFuc2l0aW9uU3BlZWQgfVxuICAgICAgICA+XG4gICAgICAgIDxsYWJlbCBsYWJlbD17IGJpbmQodGltZSkuYXModCA9PiBgSG9qZSBcdTAwRTk6ICR7dC5kYXRlfWApIH0gLz5cbiAgICAgICAgPC9yZXZlYWxlcj5cbiAgICAgIDwvYm94PlxuICApO1xufVxuIiwgImltcG9ydCB7IEFwcCwgQXN0YWwsIEd0aywgR2RrIH0gZnJvbSBcImFzdGFsL2d0azRcIlxuaW1wb3J0IFN5c3RlbU1vbml0b3IgZnJvbSBcIi4uL21vZHVsZXMvU3lzdGVtTW9uaXRvclwiO1xuaW1wb3J0IEF1ZGlvQ29udHJvbCBmcm9tIFwiLi4vbW9kdWxlcy9BdWRpb0NvbnRyb2xcIjtcbmltcG9ydCBOZXR3b3JrIGZyb20gXCIuLi9tb2R1bGVzL05ldHdvcmtcIjtcbmltcG9ydCBTeXN0ZW1UcmF5IGZyb20gXCIuLi9tb2R1bGVzL1N5c3RlbVRyYXlcIjtcbmltcG9ydCB7IE1pbmlUaW1lIH0gZnJvbSBcIi4uL21vZHVsZXMvRGF0ZVRpbWVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQmFyKGdka21vbml0b3I6IEdkay5Nb25pdG9yKSB7XG4gICAgY29uc3QgeyBUT1AsIExFRlQsIFJJR0hUIH0gPSBBc3RhbC5XaW5kb3dBbmNob3JcblxuICAgIHJldHVybiAoXG4gICAgICAgIDx3aW5kb3dcbiAgICAgICAgICAgIHZpc2libGVcbiAgICAgICAgICAgIGdka21vbml0b3I9eyBnZGttb25pdG9yIH1cbiAgICAgICAgICAgIGV4Y2x1c2l2aXR5PXsgQXN0YWwuRXhjbHVzaXZpdHkuRVhDTFVTSVZFIH1cbiAgICAgICAgICAgIGFuY2hvcj17IFRPUCB8IFJJR0hUIHwgTEVGVCB9XG4gICAgICAgICAgICBhcHBsaWNhdGlvbj17IEFwcCB9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxjZW50ZXJib3ggY3NzQ2xhc3Nlcz17WyBcIkJhclwiIF19IGhhbGlnbj17IEd0ay5BbGlnbi5GSUxMIH0+XG4gICAgICAgICAgICAgICAgPGJveCBoYWxpZ249eyBHdGsuQWxpZ24uU1RBUlQgfT5cbiAgICAgICAgICAgICAgICAgICAgPFN5c3RlbVRyYXkgLz5cbiAgICAgICAgICAgICAgICA8L2JveD5cblxuICAgICAgICAgICAgICAgIDxib3ggaGFsaWduPXsgR3RrLkFsaWduLkNFTlRFUiB9PlxuICAgICAgICAgICAgICAgICAgICA8TWluaVRpbWUgLz5cbiAgICAgICAgICAgICAgICA8L2JveD5cblxuICAgICAgICAgICAgICAgIDxib3ggaGFsaWduPXsgR3RrLkFsaWduLkVORCB9PlxuICAgICAgICAgICAgICAgICAgICA8TmV0d29yayAvPlxuICAgICAgICAgICAgICAgICAgICA8QXVkaW9Db250cm9sIC8+XG4gICAgICAgICAgICAgICAgICAgIDxTeXN0ZW1Nb25pdG9yIC8+XG4gICAgICAgICAgICAgICAgPC9ib3g+XG4gICAgICAgICAgICA8L2NlbnRlcmJveD5cbiAgICAgICAgPC93aW5kb3c+XG4gICAgKTtcbn0iLCAiaW1wb3J0IHsgR3RrLCBHZGsgfSBmcm9tIFwiYXN0YWwvZ3RrNFwiO1xuaW1wb3J0IE1wcmlzIGZyb20gXCJnaTovL0FzdGFsTXByaXNcIjtcbmltcG9ydCB7IEdMaWIsIEdPYmplY3QsIFZhcmlhYmxlLCBiaW5kIH0gZnJvbSBcImFzdGFsXCI7XG5pbXBvcnQgQ2F2YUNvbnRhaW5lciBmcm9tIFwiLi9DYXZhXCI7XG5cbmNvbnN0IG1lZGlhU3RhdGUgPSBWYXJpYWJsZShcbiAge1xuICAgIGN1cnJlbnRTdGF0ZTogXCJOYWRhIHRvY2FuZG8uLi5cIixcbiAgICBjdXJyZW50Q3NzOiBcIlwiLFxuICAgIGxhc3RQbGF5ZXI6IG51bGwgYXMgTXByaXMuUGxheWVyIHwgbnVsbCxcbiAgICBoYW5kbGVyczogW10gYXMgbnVtYmVyW11cbiAgfVxuKTtcblxubGV0IHVwZGF0ZVRpbWVvdXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuY29uc3QgREVCT1VOQ0VfREVMQVkgPSAxMDA7XG5cbmNvbnN0IG1wcmlzID0gTXByaXMuZ2V0X2RlZmF1bHQoKTtcblxuZnVuY3Rpb24gZGlzY29ubmVjdEZyb21QbGF5ZXIoKSB7XG4gIGNvbnN0IHN0YXRlID0gbWVkaWFTdGF0ZS5nZXQoKTtcblxuICAvLyBDYW5jZWxhIHF1YWxxdWVyIGF0dWFsaXphXHUwMEU3XHUwMEUzbyBwZW5kZW50ZVxuICBpZiAodXBkYXRlVGltZW91dCkge1xuICAgIEdMaWIuc291cmNlX3JlbW92ZSh1cGRhdGVUaW1lb3V0KTtcbiAgICB1cGRhdGVUaW1lb3V0ID0gbnVsbDtcbiAgfVxuXG4gIGlmIChzdGF0ZS5sYXN0UGxheWVyICYmIHN0YXRlLmhhbmRsZXJzLmxlbmd0aCA+IDApIHtcbiAgICAvLyBEZXNjb25lY3RhIHRvZG9zIG9zIGhhbmRsZXJzXG4gICAgc3RhdGUuaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtcbiAgICAgIGlmIChzdGF0ZS5sYXN0UGxheWVyICYmIEdPYmplY3Quc2lnbmFsX2hhbmRsZXJfaXNfY29ubmVjdGVkKHN0YXRlLmxhc3RQbGF5ZXIsIGhhbmRsZXIpKSB7XG4gICAgICAgIHN0YXRlLmxhc3RQbGF5ZXIuZGlzY29ubmVjdChoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBtZWRpYVN0YXRlLnNldCh7XG4gICAgLi4uc3RhdGUsXG4gICAgbGFzdFBsYXllcjogbnVsbCxcbiAgICBoYW5kbGVyczogW10sXG4gICAgY3VycmVudENzczogXCJcIixcbiAgICBjdXJyZW50U3RhdGU6IFwiTmFkYSB0b2NhbmRvLi4uXCJcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbm5lY3RUb1BsYXllcihwbGF5ZXI6IE1wcmlzLlBsYXllcikge1xuICBkaXNjb25uZWN0RnJvbVBsYXllcigpO1xuXG4gIGlmICghcGxheWVyKSByZXR1cm47XG5cbiAgLy8gVmVyaWZpY2Egc2UgbyBwbGF5ZXIgYWluZGEgXHUwMEU5IHZcdTAwRTFsaWRvIGFudGVzIGRlIGNvbmVjdGFyXG4gIHRyeSB7XG4gICAgaWYgKCFwbGF5ZXIuYnVzTmFtZSkgcmV0dXJuO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDb25lY3RhIG1cdTAwRkFsdGlwbG9zIHNpbmFpcyBwYXJhIG1haW9yIGNvbmZpYWJpbGlkYWRlXG4gIGNvbnN0IGhhbmRsZXJzID0gW1xuICAgIHBsYXllci5jb25uZWN0KFwibm90aWZ5OjpwbGF5YmFjay1zdGF0dXNcIiwgKCkgPT4ge1xuICAgICAgdXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXIpO1xuICAgIH0pLFxuICAgIHBsYXllci5jb25uZWN0KFwibm90aWZ5Ojp0aXRsZVwiLCAoKSA9PiB7XG4gICAgICB1cGRhdGVNZWRpYVN0YXRlKHBsYXllcik7XG4gICAgfSksXG4gICAgcGxheWVyLmNvbm5lY3QoXCJub3RpZnk6OmFydGlzdFwiLCAoKSA9PiB7XG4gICAgICB1cGRhdGVNZWRpYVN0YXRlKHBsYXllcik7XG4gICAgfSksXG4gICAgLy8gQWxndW5zIHBsYXllcnMgZW52aWFtIG5vdGlmeTo6bWV0YWRhdGEgZW0gdmV6IGRvcyBjYW1wb3MgZXNwZWNcdTAwRURmaWNvc1xuICAgIHBsYXllci5jb25uZWN0KFwibm90aWZ5OjptZXRhZGF0YVwiLCAoKSA9PiB7XG4gICAgICB1cGRhdGVNZWRpYVN0YXRlKHBsYXllcik7XG4gICAgfSlcbiAgXTtcblxuICBtZWRpYVN0YXRlLnNldCh7XG4gICAgLi4ubWVkaWFTdGF0ZS5nZXQoKSxcbiAgICBsYXN0UGxheWVyOiBwbGF5ZXIsXG4gICAgaGFuZGxlcnM6IGhhbmRsZXJzXG4gIH0pO1xuXG4gIC8vIEF0dWFsaXphIGltZWRpYXRhbWVudGVcbiAgdXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXIpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVNZWRpYVN0YXRlKHBsYXllcjogTXByaXMuUGxheWVyIHwgbnVsbCkge1xuICBpZiAodXBkYXRlVGltZW91dCkge1xuICAgIEdMaWIuc291cmNlX3JlbW92ZSh1cGRhdGVUaW1lb3V0KTtcbiAgICB1cGRhdGVUaW1lb3V0ID0gbnVsbDtcbiAgfVxuXG4gIHVwZGF0ZVRpbWVvdXQgPSBHTGliLnRpbWVvdXRfYWRkKEdMaWIuUFJJT1JJVFlfREVGQVVMVCwgREVCT1VOQ0VfREVMQVksICgpID0+IHtcbiAgICBleGVjdXRlVXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXIpO1xuICAgIHVwZGF0ZVRpbWVvdXQgPSBudWxsO1xuICAgIHJldHVybiBHTGliLlNPVVJDRV9SRU1PVkU7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBleGVjdXRlVXBkYXRlTWVkaWFTdGF0ZShwbGF5ZXI6IE1wcmlzLlBsYXllciB8IG51bGwpIHtcblxuICBpZiAoIXBsYXllcikge1xuICAgIG1lZGlhU3RhdGUuc2V0KHtcbiAgICAgIC4uLm1lZGlhU3RhdGUuZ2V0KCksXG4gICAgICBjdXJyZW50Q3NzOiBcIlwiLFxuICAgICAgY3VycmVudFN0YXRlOiBcIk5hZGEgdG9jYW5kby4uLlwiXG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAoIXBsYXllci5idXNOYW1lKSB7XG4gICAgICBjb25zdCBuZXh0UGxheWVyID0gZmluZEJlc3RQbGF5ZXIoKTtcbiAgICAgIGlmIChuZXh0UGxheWVyICYmIG5leHRQbGF5ZXIgIT09IHBsYXllcikge1xuICAgICAgICBjb25uZWN0VG9QbGF5ZXIobmV4dFBsYXllcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0aXRsZSA9IHBsYXllci50aXRsZSB8fCBcIlRcdTAwRUR0dWxvIGRlc2NvbmhlY2lkb1wiO1xuICAgIGNvbnN0IGFydGlzdCA9IHBsYXllci5hcnRpc3QgfHwgXCJBcnRpc3RhIGRlc2NvbmhlY2lkb1wiO1xuICAgIGNvbnN0IHN0YXR1cyA9IHBsYXllci5wbGF5YmFja1N0YXR1cztcblxuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlIE1wcmlzLlBsYXliYWNrU3RhdHVzLlBMQVlJTkc6XG4gICAgICAgIG1lZGlhU3RhdGUuc2V0KHtcbiAgICAgICAgICAuLi5tZWRpYVN0YXRlLmdldCgpLFxuICAgICAgICAgIGN1cnJlbnRDc3M6IFwiTWVkaWFQbGF5aW5nXCIsXG4gICAgICAgICAgY3VycmVudFN0YXRlOiBgVG9jYW5kbyBhZ29yYTogJHt0aXRsZX0gXHUyMDEzICR7YXJ0aXN0fWBcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBNcHJpcy5QbGF5YmFja1N0YXR1cy5QQVVTRUQ6XG4gICAgICAgIG1lZGlhU3RhdGUuc2V0KHtcbiAgICAgICAgICAuLi5tZWRpYVN0YXRlLmdldCgpLFxuICAgICAgICAgIGN1cnJlbnRDc3M6IFwiTWVkaWFQbGF5aW5nXCIsXG4gICAgICAgICAgY3VycmVudFN0YXRlOiBgUGF1c2FkbzogJHt0aXRsZX0gXHUyMDEzICR7YXJ0aXN0fWBcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBNcHJpcy5QbGF5YmFja1N0YXR1cy5TVE9QUEVEOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbWVkaWFTdGF0ZS5zZXQoe1xuICAgICAgICAgIC4uLm1lZGlhU3RhdGUuZ2V0KCksXG4gICAgICAgICAgY3VycmVudENzczogXCJcIixcbiAgICAgICAgICBjdXJyZW50U3RhdGU6IFwiTmFkYSB0b2NhbmRvLi4uXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oXCJFcnJvIGFvIGFjZXNzYXIgcHJvcHJpZWRhZGVzIGRvIHBsYXllciBNUFJJUzpcIiwgZXJyb3IpO1xuICAgIC8vIFRlbnRhIGVuY29udHJhciB1bSBwbGF5ZXIgdlx1MDBFMWxpZG9cbiAgICBjb25zdCBuZXh0UGxheWVyID0gZmluZEJlc3RQbGF5ZXIoKTtcbiAgICBpZiAobmV4dFBsYXllciAmJiBuZXh0UGxheWVyICE9PSBwbGF5ZXIpIHtcbiAgICAgIGNvbm5lY3RUb1BsYXllcihuZXh0UGxheWVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVkaWFTdGF0ZS5zZXQoe1xuICAgICAgICAuLi5tZWRpYVN0YXRlLmdldCgpLFxuICAgICAgICBjdXJyZW50Q3NzOiBcIlwiLFxuICAgICAgICBjdXJyZW50U3RhdGU6IFwiTmFkYSB0b2NhbmRvLi4uXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kQmVzdFBsYXllcigpOiBNcHJpcy5QbGF5ZXIgfCBudWxsIHtcbiAgY29uc3QgcGxheWVycyA9IG1wcmlzLnBsYXllcnM7XG5cbiAgaWYgKHBsYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCB2YWxpZFBsYXllcnMgPSBwbGF5ZXJzLmZpbHRlcihwID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHAuYnVzTmFtZSAmJiBwLmJ1c05hbWUubGVuZ3RoID4gMDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICh2YWxpZFBsYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBwbGF5aW5nUGxheWVyID0gdmFsaWRQbGF5ZXJzLmZpbmQocCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwLnBsYXliYWNrU3RhdHVzID09PSBNcHJpcy5QbGF5YmFja1N0YXR1cy5QTEFZSU5HO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHBsYXlpbmdQbGF5ZXIpIHtcbiAgICByZXR1cm4gcGxheWluZ1BsYXllcjtcbiAgfVxuXG4gIGNvbnN0IHBhdXNlZFBsYXllciA9IHZhbGlkUGxheWVycy5maW5kKHAgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gcC5wbGF5YmFja1N0YXR1cyA9PT0gTXByaXMuUGxheWJhY2tTdGF0dXMuUEFVU0VEO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHBhdXNlZFBsYXllcikge1xuICAgIHJldHVybiBwYXVzZWRQbGF5ZXI7XG4gIH1cblxuICByZXR1cm4gdmFsaWRQbGF5ZXJzWzBdO1xufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplTXByaXMoKSB7XG4gIGNvbnNvbGUubG9nKFwiSW5pY2lhbGl6YW5kbyBNUFJJUy4uLlwiKTtcbiAgY29uc3QgaW5pdGlhbFBsYXllciA9IGZpbmRCZXN0UGxheWVyKCk7XG4gIGlmIChpbml0aWFsUGxheWVyKSB7XG4gICAgY29ubmVjdFRvUGxheWVyKGluaXRpYWxQbGF5ZXIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKFwiTmVuaHVtIHBsYXllciBkaXNwb25cdTAwRUR2ZWwgbmEgaW5pY2lhbGl6YVx1MDBFN1x1MDBFM29cIik7XG4gIH1cbn1cblxubGV0IG1wcmlzSGFuZGxlcnM6IG51bWJlcltdID0gW107XG5cbmZ1bmN0aW9uIHNldHVwTXByaXNIYW5kbGVycygpIHtcbiAgbXByaXNIYW5kbGVycyA9IFtcbiAgICBtcHJpcy5jb25uZWN0KFwicGxheWVyLWFkZGVkXCIsIChfLCBwbGF5ZXI6IE1wcmlzLlBsYXllcikgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFBsYXllciA9IG1lZGlhU3RhdGUuZ2V0KCkubGFzdFBsYXllcjtcblxuICAgICAgaWYgKCFjdXJyZW50UGxheWVyKSB7XG4gICAgICAgIGNvbm5lY3RUb1BsYXllcihwbGF5ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAocGxheWVyLnBsYXliYWNrU3RhdHVzID09PSBNcHJpcy5QbGF5YmFja1N0YXR1cy5QTEFZSU5HKSB7XG4gICAgICAgICAgICBjb25uZWN0VG9QbGF5ZXIocGxheWVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiRXJybyBhbyB2ZXJpZmljYXIgc3RhdHVzIGRvIG5vdm8gcGxheWVyOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICAgIG1wcmlzLmNvbm5lY3QoXCJwbGF5ZXItY2xvc2VkXCIsIChfLCBwbGF5ZXI6IE1wcmlzLlBsYXllcikgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFBsYXllciA9IG1lZGlhU3RhdGUuZ2V0KCkubGFzdFBsYXllcjtcblxuICAgICAgaWYgKGN1cnJlbnRQbGF5ZXIgPT09IHBsYXllcikge1xuICAgICAgICBjb25zdCBuZXh0UGxheWVyID0gZmluZEJlc3RQbGF5ZXIoKTtcbiAgICAgICAgaWYgKG5leHRQbGF5ZXIpIHtcbiAgICAgICAgICBjb25uZWN0VG9QbGF5ZXIobmV4dFBsYXllcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlzY29ubmVjdEZyb21QbGF5ZXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIF07XG59XG5cbmZ1bmN0aW9uIE1wcmlzSW5mbygpIHtcbiAgcmV0dXJuIChcbiAgICA8Ym94IGNzc0NsYXNzZXM9e1tcIk1wcmlzSW5mb1wiXX0gdmV4cGFuZD5cbiAgICAgIDxsYWJlbFxuICAgICAgICBjc3NDbGFzc2VzPXtbXCJNcHJpc0xhYmVsXCJdfVxuICAgICAgICBsYWJlbD17YmluZChtZWRpYVN0YXRlKS5hcyhjID0+IGMuY3VycmVudFN0YXRlKX1cbiAgICAgICAgZWxsaXBzaXplPXszfVxuICAgICAgICBtYXhXaWR0aENoYXJzPXs3NX1cbiAgICAgIC8+XG4gICAgPC9ib3g+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lZGlhKCkge1xuICAvLyBJbmljaWFsaXphIG8gTVBSSVMgcXVhbmRvIG8gY29tcG9uZW50ZSBcdTAwRTkgY3JpYWRvXG4gIGluaXRpYWxpemVNcHJpcygpO1xuICBzZXR1cE1wcmlzSGFuZGxlcnMoKTtcblxuICByZXR1cm4gKFxuICAgIDxib3hcbiAgICAgIGNzc0NsYXNzZXM9e2JpbmQobWVkaWFTdGF0ZSkuYXMobSA9PiBbXCJNZWRpYVwiLCBtLmN1cnJlbnRDc3NdKX1cbiAgICAgIG9yaWVudGF0aW9uPXtHdGsuT3JpZW50YXRpb24uVkVSVElDQUx9XG4gICAgICBzZXR1cD17KHNlbGYpID0+IHtcbiAgICAgICAgY29uc3QgY2xpY2sgPSBuZXcgR3RrLkdlc3R1cmVDbGljaygpO1xuICAgICAgICBjbGljay5zZXRfYnV0dG9uKEdkay5CVVRUT05fUFJJTUFSWSk7XG4gICAgICAgIGNvbnN0IGNsaWNrSGFuZGxlciA9IGNsaWNrLmNvbm5lY3QoXCJwcmVzc2VkXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBtZWRpYVN0YXRlLmdldCgpLmxhc3RQbGF5ZXI7XG4gICAgICAgICAgaWYgKHBsYXllcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcGxheWVyLnBsYXlfcGF1c2UoKTtcbiAgICAgICAgICAgICAgLy8gVXNlIEdMaWIudGltZW91dF9hZGQgZW0gdmV6IGRlIHNldFRpbWVvdXRcbiAgICAgICAgICAgICAgR0xpYi50aW1lb3V0X2FkZChHTGliLlBSSU9SSVRZX0RFRkFVTFQsIDEwMCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGV4ZWN1dGVVcGRhdGVNZWRpYVN0YXRlKHBsYXllcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEdMaWIuU09VUkNFX1JFTU9WRTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvIGFvIHBhdXNhci90b2NhcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYuYWRkX2NvbnRyb2xsZXIoY2xpY2spO1xuXG4gICAgICAgIChzZWxmIGFzIGFueSkuX2NsaWNrSGFuZGxlciA9IGNsaWNrSGFuZGxlcjtcbiAgICAgICAgKHNlbGYgYXMgYW55KS5fY2xpY2tDb250cm9sbGVyID0gY2xpY2s7XG4gICAgICB9fVxuICAgICAgb25EZXN0cm95PXsoKSA9PiB7XG4gICAgICAgIGRpc2Nvbm5lY3RGcm9tUGxheWVyKCk7XG4gICAgICAgIG1lZGlhU3RhdGUuZHJvcCgpO1xuXG4gICAgICAgIG1wcmlzSGFuZGxlcnMuZm9yRWFjaChoID0+IHtcbiAgICAgICAgICBpZiAoR09iamVjdC5zaWduYWxfaGFuZGxlcl9pc19jb25uZWN0ZWQobXByaXMsIGgpKSB7XG4gICAgICAgICAgICBtcHJpcy5kaXNjb25uZWN0KGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1wcmlzSGFuZGxlcnMgPSBbXTtcblxuICAgICAgICBpZiAodXBkYXRlVGltZW91dCkge1xuICAgICAgICAgIEdMaWIuc291cmNlX3JlbW92ZSh1cGRhdGVUaW1lb3V0KTtcbiAgICAgICAgICB1cGRhdGVUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICA+XG4gICAgICA8Q2F2YUNvbnRhaW5lciAvPlxuICAgICAgPE1wcmlzSW5mbyAvPlxuICAgIDwvYm94PlxuICApO1xufVxuIiwgImltcG9ydCB7IEd0ayB9IGZyb20gXCJhc3RhbC9ndGs0XCI7XG5pbXBvcnQgR3NrIGZyb20gJ2dpOi8vR3NrJztcbmltcG9ydCBBc3RhbENhdmEgZnJvbSBcImdpOi8vQXN0YWxDYXZhP3ZlcnNpb249MC4xXCI7XG5pbXBvcnQgR09iamVjdCBmcm9tICdnaTovL0dPYmplY3QnO1xuaW1wb3J0IEdyYXBoZW5lIGZyb20gXCJnaTovL0dyYXBoZW5lP3ZlcnNpb249MS4wXCI7XG5cbmNvbnN0IENhdmFDb25maWcgPSB7XG4gIGF1dG9zZW5zOiB0cnVlLFxuICBiYXJzOiA0MCxcbiAgYmFyV2lkdGg6IDIwLFxuICBiYXJIZWlnaHQ6IDE0MCxcbiAgZnJhbWVyYXRlOiA2MCxcbiAgaW5wdXQ6IEFzdGFsQ2F2YS5JbnB1dC5QSVBFV0lSRSxcbiAgbm9pc2VSZWR1Y3Rpb246IDAuNzcsXG4gIHNlbnNpdGl2aXR5OiAwLjc1LFxuICBzdGVyZW86IGZhbHNlLFxuICBsZXJwRmFjdG9yOiAxXG59O1xuXG5jb25zdCBjYXZhSW5zdGFuY2UgPSBBc3RhbENhdmEuZ2V0X2RlZmF1bHQoKTtcbmxldCBoYW5kbGVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuY29uc3QgQ2F2YSA9IEdPYmplY3QucmVnaXN0ZXJDbGFzcyh7IEdUeXBlTmFtZTogJ0NhdmEnIH0sIGNsYXNzIENhdmEgZXh0ZW5kcyBHdGsuRHJhd2luZ0FyZWEge1xuICAgIHByaXZhdGUgX3JlY3QgPSBuZXcgR3JhcGhlbmUuUmVjdCgpO1xuICAgIHByaXZhdGUgX3NpemUgPSBuZXcgR3JhcGhlbmUuU2l6ZSgpO1xuICAgIHByaXZhdGUgYnVpbGRlciA9IG5ldyBHc2suUGF0aEJ1aWxkZXIoKTtcbiAgICBwcml2YXRlIGNsaXAhOiBHc2suUm91bmRlZFJlY3QgfCBudWxsO1xuICAgIHByaXZhdGUgdmFsdWVzITogRmxvYXQzMkFycmF5O1xuICAgIHByaXZhdGUgbm9ybSE6IEZsb2F0MzJBcnJheTtcbiAgICBwcml2YXRlIF9pc0Rlc3Ryb3llZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5zZXR1cFJlY3QoKTtcbiAgICAgIHRoaXMuc2V0dXBDYXZhKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cFJlY3QoKSB7XG4gICAgICB0aGlzLnNldF9zaXplX3JlcXVlc3QoQ2F2YUNvbmZpZy5iYXJXaWR0aCAqIENhdmFDb25maWcuYmFycywgQ2F2YUNvbmZpZy5iYXJIZWlnaHQpO1xuICAgICAgdGhpcy5jbGlwID0gbmV3IEdzay5Sb3VuZGVkUmVjdCgpO1xuICAgICAgdGhpcy5fc2l6ZS5pbml0KDcsIDcpO1xuICAgICAgdGhpcy5fcmVjdC5pbml0KDAsIDAsIHRoaXMuZ2V0X2FsbG9jYXRlZF93aWR0aCgpLCB0aGlzLmdldF9hbGxvY2F0ZWRfaGVpZ2h0KCkpO1xuICAgICAgdGhpcy5jbGlwLmluaXQodGhpcy5fcmVjdCwgdGhpcy5fc2l6ZSwgdGhpcy5fc2l6ZSwgR3JhcGhlbmUuU2l6ZS56ZXJvKCksIEdyYXBoZW5lLlNpemUuemVybygpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwQ2F2YSgpIHtcbiAgICAgIGlmKGNhdmFJbnN0YW5jZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhdmFJbnN0YW5jZS5zZXRfYXV0b3NlbnMoQ2F2YUNvbmZpZy5hdXRvc2Vucyk7XG4gICAgICAgICAgY2F2YUluc3RhbmNlLnNldF9iYXJzKENhdmFDb25maWcuYmFycyk7XG4gICAgICAgICAgY2F2YUluc3RhbmNlLnNldF9mcmFtZXJhdGUoQ2F2YUNvbmZpZy5mcmFtZXJhdGUpO1xuICAgICAgICAgIGNhdmFJbnN0YW5jZS5zZXRfaW5wdXQoQ2F2YUNvbmZpZy5pbnB1dCk7XG4gICAgICAgICAgY2F2YUluc3RhbmNlLnNldF9ub2lzZV9yZWR1Y3Rpb24oQ2F2YUNvbmZpZy5ub2lzZVJlZHVjdGlvbik7XG4gICAgICAgICAgY2F2YUluc3RhbmNlLnNldF9zdGVyZW8oQ2F2YUNvbmZpZy5zdGVyZW8pO1xuICAgICAgICAgIHRoaXMuYWRkX2Nzc19jbGFzcyhcIkNhdmFDb250YWluZXJcIik7XG4gICAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KENhdmFDb25maWcuYmFycyk7XG4gICAgICAgICAgdGhpcy5ub3JtID0gbmV3IEZsb2F0MzJBcnJheShDYXZhQ29uZmlnLmJhcnMpO1xuXG4gICAgICAgICAgLy8gTGltcGFyIGhhbmRsZXIgYW50ZXJpb3Igc2UgZXhpc3RpclxuICAgICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICBjYXZhSW5zdGFuY2UuZGlzY29ubmVjdChoYW5kbGVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBoYW5kbGVyID0gY2F2YUluc3RhbmNlLmNvbm5lY3QoXCJub3RpZnk6OnZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2lzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgIHRoaXMucXVldWVfZHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm8gYW8gY29uZmlndXJhciBDYXZhOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvdmVycmlkZSB2ZnVuY19zaXplX2FsbG9jYXRlKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgICB0aGlzLmNsaXAgPSBudWxsO1xuICAgICAgc3VwZXIudmZ1bmNfc2l6ZV9hbGxvY2F0ZSh3aWR0aCwgaGVpZ2h0LCAtMSk7XG4gICAgfVxuXG4gICAgb3ZlcnJpZGUgdmZ1bmNfc25hcHNob3Qoc25hcHNob3Q6IEd0ay5TbmFwc2hvdCk6IHZvaWQge1xuICAgICAgaWYgKCFjYXZhSW5zdGFuY2UgfHwgdGhpcy5faXNEZXN0cm95ZWQpIHJldHVybjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaXApIHtcbiAgICAgICAgICB0aGlzLmNsaXAgPSBuZXcgR3NrLlJvdW5kZWRSZWN0KCk7XG4gICAgICAgICAgdGhpcy5fcmVjdC5pbml0KDAsIDAsIHRoaXMuZ2V0X2FsbG9jYXRlZF93aWR0aCgpLCB0aGlzLmdldF9hbGxvY2F0ZWRfaGVpZ2h0KCkpO1xuICAgICAgICAgIHRoaXMuY2xpcC5pbml0KHRoaXMuX3JlY3QsIHRoaXMuX3NpemUsIHRoaXMuX3NpemUsIEdyYXBoZW5lLlNpemUuemVybygpLCBHcmFwaGVuZS5TaXplLnplcm8oKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzbmFwc2hvdC5wdXNoX3JvdW5kZWRfY2xpcCh0aGlzLmNsaXApO1xuICAgICAgICB0aGlzLmRyYXdfY2F0bXVsbF9yb20oc25hcHNob3QpO1xuICAgICAgICBzbmFwc2hvdC5wb3AoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkVycm8gbm8gc25hcHNob3QgZG8gQ2F2YTpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENvZGUgZnJvbSBLb3RvbnRyaW9uLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2tvdG9udHJpb24va29tcGFzcy9ibG9iL21haW4vbGlia29tcGFzcy9zcmMvY2F2YS52YWxhXG4gICAgcHJpdmF0ZSBkcmF3X2NhdG11bGxfcm9tKHNuYXBzaG90OiBHdGsuU25hcHNob3QpOiB2b2lkIHtcbiAgICAgIGlmKCFjYXZhSW5zdGFuY2UgfHwgdGhpcy5faXNEZXN0cm95ZWQpIHJldHVybjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYoIXRoaXMuYnVpbGRlcikgdGhpcy5idWlsZGVyID0gbmV3IEdzay5QYXRoQnVpbGRlcigpO1xuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5nZXRfYWxsb2NhdGVkX3dpZHRoKCk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0X2FsbG9jYXRlZF9oZWlnaHQoKTtcbiAgICAgICAgY29uc3QgcmF3ID0gY2F2YUluc3RhbmNlLmdldF92YWx1ZXMoKTtcblxuICAgICAgICBpZiAoIXJhdyB8fCByYXcubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgYmFycyA9IE1hdGgubWluKENhdmFDb25maWcuYmFycywgcmF3Lmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGJhcldpZHRoID0gd2lkdGggLyBNYXRoLm1heCgxLCBiYXJzLTEpO1xuICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuZ2V0X2NvbG9yKCk7XG4gICAgICAgIGNvbnN0IHNlbnMgPSBDYXZhQ29uZmlnLnNlbnNpdGl2aXR5O1xuICAgICAgICBjb25zdCBsZXJwID0gQ2F2YUNvbmZpZy5sZXJwRmFjdG9yO1xuICAgICAgICBjb25zdCBpbnZTaXggPSAxLzY7XG5cbiAgICAgICAgLy8gVmFsaWRhciBhcnJheXNcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlcyB8fCB0aGlzLnZhbHVlcy5sZW5ndGggIT09IGJhcnMpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoYmFycyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm5vcm0gfHwgdGhpcy5ub3JtLmxlbmd0aCAhPT0gYmFycykge1xuICAgICAgICAgIHRoaXMubm9ybSA9IG5ldyBGbG9hdDMyQXJyYXkoYmFycyk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYmFyczsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgdlJhdyA9IChyYXdbaV0gfHwgMCkgKiBzZW5zO1xuICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnZhbHVlc1tpXSArPSAodlJhdyAtIHRoaXMudmFsdWVzW2ldKSAqIGxlcnA7XG4gICAgICAgICAgdGhpcy5ub3JtW2ldID0gaGVpZ2h0IC0gaGVpZ2h0ICogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdikpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWlsZGVyLm1vdmVfdG8oMCwgdGhpcy5ub3JtWzBdKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhcnMgLSAxOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBwMHggPSAoaSAtIDEpICogYmFyV2lkdGg7XG4gICAgICAgICAgY29uc3QgcDB5ID0gdGhpcy5ub3JtW2kgPiAwID8gaSAtIDEgOiAwXTtcbiAgICAgICAgICBjb25zdCBwMXggPSBpICogYmFyV2lkdGg7XG4gICAgICAgICAgY29uc3QgcDF5ID0gdGhpcy5ub3JtW2ldO1xuICAgICAgICAgIGNvbnN0IHAyeCA9IChpICsgMSkgKiBiYXJXaWR0aDtcbiAgICAgICAgICBjb25zdCBwMnkgPSB0aGlzLm5vcm1baSArIDFdO1xuICAgICAgICAgIGNvbnN0IHAzeCA9IChpICsgMikgKiBiYXJXaWR0aDtcbiAgICAgICAgICBjb25zdCBwM3kgPSB0aGlzLm5vcm1baSArIDIgPCBiYXJzID8gaSArIDIgOiBiYXJzIC0gMV07XG5cbiAgICAgICAgICBjb25zdCBjMXggPSBwMXggKyAocDJ4IC0gcDB4KSAqIGludlNpeDtcbiAgICAgICAgICBjb25zdCBjMXkgPSBwMXkgKyAocDJ5IC0gcDB5KSAqIGludlNpeDtcbiAgICAgICAgICBjb25zdCBjMnggPSBwMnggLSAocDN4IC0gcDF4KSAqIGludlNpeDtcbiAgICAgICAgICBjb25zdCBjMnkgPSBwMnkgLSAocDN5IC0gcDF5KSAqIGludlNpeDtcblxuICAgICAgICAgIHRoaXMuYnVpbGRlci5jdWJpY190byhjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnVpbGRlci5saW5lX3RvKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLmJ1aWxkZXIubGluZV90bygwLCBoZWlnaHQpO1xuXG4gICAgICAgIHNuYXBzaG90LmFwcGVuZF9maWxsKHRoaXMuYnVpbGRlci50b19wYXRoKCksIEdzay5GaWxsUnVsZS5XSU5ESU5HLCBjb2xvcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvIGFvIGRlc2VuaGFyIENhdmE6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzdHJveSgpIHtcbiAgICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIGlmIChoYW5kbGVyICYmIGNhdmFJbnN0YW5jZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhdmFJbnN0YW5jZS5kaXNjb25uZWN0KGhhbmRsZXIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm8gYW8gZGVzY29uZWN0YXIgaGFuZGxlciBkbyBDYXZhOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlciA9IG51bGw7XG4gICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENhdmFDb250YWluZXIoKSB7XG4gIGxldCBjYXZhV2lkZ2V0OiBJbnN0YW5jZVR5cGU8dHlwZW9mIENhdmE+IHwgbnVsbCA9IG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICAgIDxib3hcbiAgICAgICAgc2V0dXA9e1xuICAgICAgICAgIChzZWxmKSA9PiB7XG4gICAgICAgICAgICBzZWxmLnNldF9zaXplX3JlcXVlc3QoQ2F2YUNvbmZpZy5iYXJXaWR0aCAqIENhdmFDb25maWcuYmFycywgQ2F2YUNvbmZpZy5iYXJIZWlnaHQpO1xuICAgICAgICAgICAgY2F2YVdpZGdldCA9IG5ldyBDYXZhKCk7XG4gICAgICAgICAgICBzZWxmLmFwcGVuZChjYXZhV2lkZ2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25EZXN0cm95PXtcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2F2YVdpZGdldCkge1xuICAgICAgICAgICAgICBjYXZhV2lkZ2V0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgY2F2YVdpZGdldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihoYW5kbGVyICYmIGNhdmFJbnN0YW5jZSkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhdmFJbnN0YW5jZS5kaXNjb25uZWN0KGhhbmRsZXIpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm8gYW8gbGltcGFyIGhhbmRsZXIgZG8gQ2F2YTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgLz5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyBBcHAsIEFzdGFsLCBHdGssIEdkayB9IGZyb20gXCJhc3RhbC9ndGs0XCI7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gXCIuLi9tb2R1bGVzL0RhdGVUaW1lXCI7XG5pbXBvcnQgTWVkaWEgZnJvbSBcIi4uL21vZHVsZXMvTWVkaWFcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQmFja2dyb3VuZChnZGttb25pdG9yOiBHZGsuTW9uaXRvcikge1xuICAgIGNvbnN0IHsgQk9UVE9NLCBSSUdIVCwgTEVGVCB9ID0gQXN0YWwuV2luZG93QW5jaG9yXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8d2luZG93XG4gICAgICAgICAgICB2aXNpYmxlXG4gICAgICAgICAgICBnZGttb25pdG9yPXsgZ2RrbW9uaXRvciB9XG4gICAgICAgICAgICBleGNsdXNpdml0eT17IEFzdGFsLkV4Y2x1c2l2aXR5LklHTk9SRSB9XG4gICAgICAgICAgICBsYXllcj17IEFzdGFsLkxheWVyLkJPVFRPTSB9XG4gICAgICAgICAgICBhbmNob3I9eyBCT1RUT00gfCBMRUZUIHwgUklHSFQgfVxuICAgICAgICAgICAgYXBwbGljYXRpb249eyBBcHAgfVxuICAgICAgICAgICAgcG9wdXA9eyBmYWxzZSB9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxjZW50ZXJib3ggY3NzQ2xhc3Nlcz17W1wiQmFja2dyb3VuZFwiXX0gaGFsaWduPXtHdGsuQWxpZ24uRklMTH0+XG4gICAgICAgICAgICAgICAgPGJveCBjc3NDbGFzc2VzPXtbIFwiQmFja2dyb3VuZExlZnRNb2R1bGVzXCIgXX0gaGFsaWduPXsgR3RrLkFsaWduLlNUQVJUIH0+XG4gICAgICAgICAgICAgICAgICAgIDxNZWRpYSAvPlxuICAgICAgICAgICAgICAgIDwvYm94PlxuICAgICAgICAgICAgICAgIDxib3ggY3NzQ2xhc3Nlcz17WyBcIkJhY2tncm91bmRMZWZ0TW9kdWxlc1wiIF19IGhhbGlnbj17IEd0ay5BbGlnbi5DRU5URVIgfSBoZXhwYW5kPlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8L2JveD5cbiAgICAgICAgICAgICAgICA8Ym94IGNzc0NsYXNzZXM9e1sgXCJCYWNrZ3JvdW5kUmlnaHRNb2R1bGVzXCIgXX0gaGFsaWduPXsgR3RrLkFsaWduLkVORCB9PlxuICAgICAgICAgICAgICAgICAgICA8RGF0ZVRpbWUgLz5cbiAgICAgICAgICAgICAgICA8L2JveD5cbiAgICAgICAgICAgIDwvY2VudGVyYm94PlxuICAgICAgICA8L3dpbmRvdz5cbiAgICApO1xufSIsICJpbXBvcnQgeyBBcHAsIEdkaywgR3RrIH0gZnJvbSBcImFzdGFsL2d0azRcIlxuaW1wb3J0IHN0eWxlIGZyb20gXCIuL3N0eWxlLnNjc3NcIlxuaW1wb3J0IEJhciBmcm9tIFwiLi93aWRnZXQvQmFyXCJcbmltcG9ydCBCYWNrZ3JvdW5kIGZyb20gXCIuL3dpZGdldC9CYWNrZ3JvdW5kXCJcblxuQXBwLnN0YXJ0KHtcbiAgICBpbnN0YW5jZU5hbWU6IFwiQWdzRWNvc3lzdGVtXCIsXG4gICAgY3NzOiBcIlwiLFxuICAgIG1haW4oKSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IEd0ay5Dc3NQcm92aWRlcigpO1xuICAgICAgICBwcm92aWRlci5sb2FkX2Zyb21fc3RyaW5nKHN0eWxlKTtcbiAgICAgICAgR3RrLlN0eWxlQ29udGV4dC5hZGRfcHJvdmlkZXJfZm9yX2Rpc3BsYXkoR2RrLkRpc3BsYXkuZ2V0X2RlZmF1bHQoKSEsIHByb3ZpZGVyLCBHdGsuU1RZTEVfUFJPVklERVJfUFJJT1JJVFlfVVNFUik7XG5cbiAgICAgICAgQXBwLmdldF9tb25pdG9ycygpLm1hcChcbiAgICAgICAgICAgIChtb25pdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgQmFyKG1vbml0b3IpO1xuICAgICAgICAgICAgICAgIEJhY2tncm91bmQobW9uaXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxufSlcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBQSxPQUFPQSxZQUFXO0FBQ2xCLE9BQU9DLFVBQVM7QUFDaEIsT0FBT0MsVUFBUzs7O0FDRmhCLE9BQU9DLFlBQVc7OztBQ0FYLElBQU0sV0FBVyxDQUFDLFFBQWdCLElBQ3BDLFFBQVEsbUJBQW1CLE9BQU8sRUFDbEMsV0FBVyxLQUFLLEdBQUcsRUFDbkIsWUFBWTtBQUVWLElBQU0sV0FBVyxDQUFDLFFBQWdC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QUNoQyxPQUFRQSxPQUFNLE1BQU07QUFBQSxNQUNwQixRQUFTLFNBQVMsT0FBTztBQUFBLE1BQ3pCLGFBQWM7QUFBQSxNQUNkLE9BQVE7QUFBQSxNQUVSLCtCQUFDLGVBQVUsWUFBWSxDQUFDLFlBQVksR0FBRyxRQUFRRSxLQUFJLE1BQU0sTUFDckQ7QUFBQSx3QkFBQUQsS0FBQyxTQUFJLFlBQVksQ0FBRSx1QkFBd0IsR0FBRyxRQUFTQyxLQUFJLE1BQU0sT0FDN0QsMEJBQUFELEtBQUMsU0FBTSxHQUNYO0FBQUEsUUFDQSxnQkFBQUEsS0FBQyxTQUFJLFlBQVksQ0FBRSx1QkFBd0IsR0FBRyxRQUFTQyxLQUFJLE1BQU0sUUFBUyxTQUFPLE1BRWpGO0FBQUEsUUFDQSxnQkFBQUQsS0FBQyxTQUFJLFlBQVksQ0FBRSx3QkFBeUIsR0FBRyxRQUFTQyxLQUFJLE1BQU0sS0FDOUQsMEJBQUFELEtBQUMsWUFBUyxHQUNkO0FBQUEsU0FDSjtBQUFBO0FBQUEsRUFDSjtBQUVSOzs7QUN6QkEsWUFBSSxNQUFNO0FBQUEsRUFDTixjQUFjO0FBQUEsRUFDZCxLQUFLO0FBQUEsRUFDTCxPQUFPO0FBQ0gsVUFBTSxXQUFXLElBQUlFLEtBQUksWUFBWTtBQUNyQyxhQUFTLGlCQUFpQixhQUFLO0FBQy9CLElBQUFBLEtBQUksYUFBYSx5QkFBeUJDLEtBQUksUUFBUSxZQUFZLEdBQUksVUFBVUQsS0FBSSw0QkFBNEI7QUFFaEgsZ0JBQUksYUFBYSxFQUFFO0FBQUEsTUFDZixDQUFDLFlBQVk7QUFDVCxZQUFJLE9BQU87QUFDWCxtQkFBVyxPQUFPO0FBQUEsTUFDdEI7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNKLENBQUM7IiwKICAibmFtZXMiOiBbIkFzdGFsIiwgIkd0ayIsICJHZGsiLCAiQXN0YWwiLCAiYmluZCIsICJpbnRlcnZhbCIsICJBc3RhbCIsICJBc3RhbCIsICJBc3RhbCIsICJ2IiwgImludGVydmFsIiwgImhhbmRsZXIiLCAiY3RvcnMiLCAiR3RrIiwgIkFzdGFsIiwgInNuYWtlaWZ5IiwgInBhdGNoIiwgIk1wcmlzIiwgIldpZmkiLCAiV3AiLCAiR3RrIiwgIkFzdGFsIiwgIkFzdGFsIiwgIkd0ayIsICJHdGsiLCAiQXN0YWwiLCAiY2giLCAiZGVmYXVsdCIsICJBc3RhbCIsICJHT2JqZWN0IiwgImRlZmF1bHQiLCAiR09iamVjdCIsICJqc3giLCAianN4IiwgIkd0ayIsICJHZGsiLCAiaGFuZGxlcnMiLCAiZGVmYXVsdCIsICJqc3giLCAianN4IiwgImhhbmRsZXJzIiwgIkd0ayIsICJHZGsiLCAianN4IiwgIkd0ayIsICJqc3giLCAiQXN0YWwiLCAianN4IiwgIkd0ayIsICJHT2JqZWN0IiwgIkdPYmplY3QiLCAiQ2F2YSIsICJHdGsiLCAianN4IiwgImRlZmF1bHQiLCAiaGFuZGxlciIsICJHT2JqZWN0IiwgImhhbmRsZXJzIiwgImpzeCIsICJHdGsiLCAiR2RrIiwgIkFzdGFsIiwgImpzeCIsICJHdGsiLCAiR3RrIiwgIkdkayJdCn0K
